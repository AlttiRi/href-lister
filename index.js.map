{"version":3,"file":"index.js","sources":["../src/components/settings.ts","../src/components/core-filters.ts","../src/components/core.ts","../src/components/InputControls.vue","../src/components/util.ts","../src/components/state-store.ts","../src/components/UrlListItem.vue","../src/components/MessageEditPopup.vue","../src/main.ts"],"sourcesContent":["export const defaultFilterSettings = {\n    input_only: \"\",\n    input_only_disabled: false,\n    input_ignore: \"\",\n    input_ignore_disabled: false,\n    reverse_input_only: false,\n    case_sensitive: false,\n}\n// export const defaultCommonSettings = {\n//     unique: true,\n//     sort: true,\n//     reverse: false,\n//     hide_prefix: true,\n//     https: true,\n// }\n//\n// export const defaultSettings = {\n//     ...defaultFilterSettings,\n//     ...defaultCommonSettings,\n// }\n","import {computed, ComputedRef, Ref, ref} from \"vue\";\nimport {defaultFilterSettings as settings} from \"./settings\";\n\n\nexport const input_only:   Ref<string> = ref(settings.input_only);\nexport const input_ignore: Ref<string> = ref(settings.input_ignore);\n\nconst matcher = computed(() => {\n    let onlyParts   =   input_only.value.trim().split(/\\s+/g).filter(o => o);\n    let ignoreParts = input_ignore.value.trim().split(/\\s+/g).filter(o => o);\n    if (!settings.case_sensitive) {\n        onlyParts   =   onlyParts.map(text => text.toLowerCase());\n        ignoreParts = ignoreParts.map(text => text.toLowerCase());\n    }\n\n    let matchOnly:   (url: string) => boolean;\n    let matchIgnore: (url: string) => boolean;\n    if (!settings.case_sensitive) {\n        matchOnly   = (url: string) =>   onlyParts.some(text => url.toLowerCase().includes(text));\n        matchIgnore = (url: string) => ignoreParts.some(text => url.toLowerCase().includes(text));\n    } else {\n        matchOnly   = (url: string) =>   onlyParts.some(text => url.includes(text));\n        matchIgnore = (url: string) => ignoreParts.some(text => url.includes(text));\n    }\n    return {matchOnly, matchIgnore, onlyParts, ignoreParts};\n});\n\ntype FilterPredicate = (url: string) => boolean;\nexport const urlFilter: ComputedRef<FilterPredicate> = computed(() => {\n    const {matchOnly, matchIgnore, onlyParts} = matcher.value;\n\n    if (!settings.input_only_disabled && onlyParts.length) {\n        if (!settings.reverse_input_only) {\n            return (url: string) => matchOnly(url);\n        } else {\n            return (url: string) => !matchOnly(url);\n        }\n    }\n    if (!settings.input_ignore_disabled) {\n        return (url: string) => !matchIgnore(url);\n    }\n\n    return (url: string) => Boolean(url);\n});\n","import {computed, ref, Ref, ComputedRef, reactive, UnwrapNestedRefs} from \"vue\";\nimport {urlFilter} from \"./core-filters\";\n\nexport const inputText: Ref<string> = ref(\"\");\n\nif (location.href === \"http://localhost:5173/\") {\n    inputText.value =\n        \"http://localhost:5173/ asdf\\n\" +\n        \"http://localhost:5173/#qwe #qwerty1qwerty2qwerty3qwerty4qwerty5qwerty6\\n\" +\n        \"http://localhost:5173/#qqq\"\n}\n\nexport type UrlEntry = {\n    url: string,\n    comment?: string,\n    commentFromStore?: string,\n}\n\nexport const popupEntry: Ref<UrlEntry | null> = ref(null);\nexport const lastClickedEntry: Ref<UrlEntry | null> = ref(null);\n\nexport const urlEntryList: ComputedRef<UnwrapNestedRefs<UrlEntry[]>> = computed(() => {\n    const urlEntries = parseUrlEntries(inputText.value);\n    const reactiveUrlEntries = reactive(urlEntries);\n    console.log(urlEntries, reactiveUrlEntries);\n    return reactiveUrlEntries;\n});\nexport const urlEntryListFiltered: ComputedRef<UrlEntry[]> = computed(() => {\n    return urlEntryList.value.filter(ue => urlFilter.value(ue.url));\n});\n\nexport const urls: ComputedRef<string[]> = computed(() => {\n    return urlEntryList.value.map(ue => ue.url);\n});\nexport const urlsFiltered: ComputedRef<string[]> = computed(() => {\n    return urlEntryListFiltered.value.map(ue => ue.url);\n});\n\n\n// todo add tests\nexport function parseUrlEntries(text: string) {\n    const lines = text.split(\"\\n\").map(line => line.trim()).filter(line => line);\n    const urls: UrlEntry[] = [];\n    for (const line of lines) {\n        const [main, ...comments] = line.split(/\\s+(#|\\/\\/)/);\n        const [firstWord, ...words] = main.trim().split(/\\s+/);\n\n        if (firstWord.startsWith(\"http\")) {\n            const url = matchUrl(firstWord);\n            if (url && words.every(word => !matchUrl(word))) {\n                urls.push({\n                    url,\n                    comment: [...words, ...comments].join(\" \")\n                });\n                continue;\n            }\n            if (url) {\n                urls.push({url});\n            }\n        } else {\n            words.unshift(firstWord);\n        }\n\n        for (const word of words) {\n            const url = matchUrl(word);\n            if (url) {\n                urls.push({url});\n            }\n        }\n    }\n    return urls;\n}\n\nfunction matchUrl(word: string) {\n    const match = word.match(/(['\"]?)(?<url>https?:\\/\\/[^\\s\"]+)(\\1)/);\n    console.log(match);\n    if (match?.groups) {\n        return match.groups.url;\n    }\n}\n\nexport function getCodeArrays(items: string[], size = 100) {\n    const jsonArray = (a: string[]) => `${a.length ? \"[\\\"\" + a.join(`\", \"`) + \"\\\"]\" : \"[]\"}`;\n    if (items.length <= size) {\n        return `/* ${items.length.toString().padStart(3)} */ ${jsonArray(items)},`;\n    }\n    const len = (n: number) => n.toString().length;\n    const count = Math.trunc(items.length / size);\n    const comment = items.length.toString().padStart(1 + len(items.length)) + \" \".repeat(3 + len(count));\n    const parts = [`/* ${comment} */`];\n    for (let i = 0; i <= count; i++) {\n        const part = items.slice(size * i, size + size * i);\n        const page = `(${i + 1})`.padStart(2 + len(count));\n        const pageCount = part.length.toString().padStart(1 + len(items.length));\n        parts.push(`/* ${pageCount} ${page} */ ${jsonArray(part)},`);\n    }\n    return parts.join(\"\\n\");\n}\n","<template>\n  <div class=\"row row-cols-lg-3 g-3 align-items-end\">\n    <div class=\"input col-12\">\n      <label for=\"urls-textarea\" class=\"fuck-off-lighthouse\"></label>\n      <textarea id=\"urls-textarea\" spellcheck=\"false\"\n                v-model=\"inputText\"\n                ref=\"textareaEl\"\n      ></textarea>\n    </div>\n    <div class=\"input col-12\">\n      <span  class=\"row\">\n        <span class=\".col m-1\">\n          <span class=\"btn-group\">\n            <span class=\"input-group-text me-2\">Clipboard</span>\n          </span>\n          <button class=\"btn btn-outline-primary me-1\"\n                  @click=\"onReplaceClipboardText\"\n          >Replace</button>\n          <button class=\"btn btn-outline-primary me-1\"\n                  @click=\"onAppendClipboardText\"\n          >Append</button>\n        </span>\n        <span class=\".col m-1\">\n          <span class=\"btn-group\">\n            <span class=\"input-group-text me-2 text-center\">Controls</span>\n          </span>\n          <button class=\"btn btn-outline-primary me-1\"\n                  @click=\"onClearTextInput\"\n          >Clear</button>\n          <button class=\"btn btn-primary me-1\" title=\"Copy URLs\"\n                  @click=\"onCopyUrlsAsList\"\n                  @contextmenu=\"onCopyUrlsAsColumn\"\n                  @pointerdown=\"onCopyUrlsAsCodeArrays\"\n          >Copy</button>\n        </span>\n      </span>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport {Ref, ref} from \"vue\";\nimport {sleep} from \"@alttiri/util-js\";\nimport {getCodeArrays, inputText, urlsFiltered} from \"./core\";\n\n\nconst blinkButtonMap = new WeakMap();\nasync function blink(elem: HTMLElement) {\n  elem.classList.add(\"btn-active\");\n  const sleep_time = sleep(150);\n  blinkButtonMap.set(elem, sleep_time);\n  await sleep_time;\n  if (blinkButtonMap.get(elem) === sleep_time) {\n    elem.classList.remove(\"btn-active\");\n  }\n}\n\n\nconst textareaEl: Ref<HTMLTextAreaElement | null> = ref(null);\n\nfunction onClearTextInput(event: MouseEvent) {\n  inputText.value = \"\";\n  textareaEl.value?.focus();\n  void blink(event.currentTarget as HTMLElement);\n}\n\n\nfunction onCopyUrlsAsList(event: MouseEvent) {\n  void navigator.clipboard.writeText(urlsFiltered.value.join(\" \"));\n  void blink(event.currentTarget as HTMLElement);\n}\nfunction onCopyUrlsAsColumn(event: MouseEvent) {\n  event.preventDefault();\n  void navigator.clipboard.writeText(urlsFiltered.value.join(\"\\n\"));\n  void blink(event.currentTarget as HTMLElement);\n}\nfunction onCopyUrlsAsCodeArrays(event: PointerEvent) {\n  const MIDDLE_BUTTON = 1;\n  if (event.button === MIDDLE_BUTTON) {\n    event.preventDefault();\n    void navigator.clipboard.writeText(getCodeArrays(urlsFiltered.value));\n    void blink(event.currentTarget as HTMLElement);\n  }\n}\n\nasync function onAppendClipboardText(event: MouseEvent) {\n  const {currentTarget} = event;\n  const text = await navigator.clipboard.readText();\n  console.log(\"[clipboard] readText:\", text);\n  if (inputText.value && !inputText.value.endsWith(\"\\n\")) {\n    inputText.value += \"\\n\";\n  }\n  inputText.value += text;\n  void blink(currentTarget as HTMLElement);\n}\nasync function onReplaceClipboardText(event: MouseEvent) {\n  const {currentTarget} = event;\n  const text = await navigator.clipboard.readText();\n  console.log(\"[clipboard] readText:\", text);\n  inputText.value = text;\n  void blink(currentTarget as HTMLElement);\n}\n\n\n</script>\n\n\n<style scoped>\n.btn-group > .input-group-text {\n  width: 100px;\n  justify-content: center;\n}\n.btn-active,\n.btn-active:active {\n  background-color: black;\n  color: white;\n}\n\ntextarea {\n  width: 100%;\n  height: 82px;\n  resize: none;\n}\ntextarea:focus {\n  outline: none;\n}\n\n.fuck-off-lighthouse {\n  position: absolute;\n  top: -1000px;\n  left: -1000px;\n  height: 0;\n  width: 0;\n}\n</style>\n","export function throttle<A extends any[]>(runnable: (...args: A) => any, time = 50): (...args: A) => void {\n    let waiting = false;\n    let queued  = false;\n    let context: any;\n    let args: A;\n\n    return function(this: any, ..._arguments: A) {\n        if (!waiting) {\n            waiting = true;\n            setTimeout(function() {\n                if (queued) {\n                    runnable.apply(context, args);\n                }\n                waiting = queued = false;\n            }, time);\n            runnable.apply(this, _arguments);\n        } else {\n            context = this;\n            args = _arguments;\n            queued = true;\n        }\n    }\n}\n","import {createStore, del, get, set} from \"idb-keyval\";\n\nconst commentsStore = createStore(\"HrefListerComments\", \"Comments\");\nexport function saveComment(url: string, comment: string) {\n    void set(url, comment, commentsStore);\n}\nexport function loadComment(url: string) {\n    return get(url, commentsStore);\n}\n\n\nconst visitsStore = createStore(\"HrefLister\", \"Visits\");\nexport function setVisit(url: string, value: number) {\n    return set(url, value, visitsStore);\n}\nexport function getVisit(url: string) {\n    return get(url, visitsStore);\n}\nexport function removeVisit(url: string) {\n    return del(url, visitsStore);\n}\n","<template>\n  <tr @pointerenter=\"onPointerEnter\"\n      :class=\"{\n        clicked,\n        'last-clicked': isLastClicked,\n      }\"\n  >\n    <td class=\"col-9 nowrap-text-ceil url\">\n      <span class=\"nowrap-text-ceil-content\">\n        <span class=\"info-dot\"\n              :class=\"{\n                ['has-comment']: ue.comment,\n                visited: visitedMs > 0,\n                [timePassedClass]: true,\n              }\"\n              :title=\"visitedText\"\n              @contextmenu.prevent=\"onInfoDotContextMenu\"\n              @pointerdown=\"onPointerDown\"\n        ></span>\n        <a class=\"url link-primary\" target=\"_blank\" rel=\"noreferrer noopener\"\n           :href=\"ue.url\"\n           :title=\"ue.comment\"\n           @click=\"markUrlAsClicked\"\n           @pointerup=\"markUrlAsClickedOnMMBClick\"\n        >{{ue.url}}</a>\n      </span>\n    </td>\n    <td class=\"col-3 comment nowrap-text-ceil\"\n        @dblclick=\"onDblClick\"\n        :class=\"{\n          [commentCssClass]: commentCssClass\n        }\"\n    >\n      <span class=\"comment-content nowrap-text-ceil-content no-dbl-click-select\" >{{ue.commentFromStore || ue.comment || \"&nbsp;\"}}</span>\n    </td>\n  </tr>\n</template>\n\n<script setup lang=\"ts\">\nimport {lastClickedEntry, popupEntry, UrlEntry} from \"./core\";\nimport {ref, onMounted, computed, toRaw, triggerRef, onUpdated, onUnmounted, watch} from \"vue\";\nimport {formatDate} from \"@alttiri/util-js\";\nimport {throttle} from \"./util\";\nimport {getVisit, loadComment, removeVisit, setVisit} from \"./state-store\";\n\nconst props = defineProps<{ue: UrlEntry}>();\nconst url = props.ue.url;\n\nconst visitedMs = ref(-1);\nonMounted(loadState);\nonUpdated(loadState);\n\nasync function loadState() {\n  const visitedMsPromise = getVisit(url);\n  const commentPromise = loadComment(url);\n\n  visitedMs.value = (await visitedMsPromise) || -2;\n\n  const savedComment = await commentPromise;\n  if (savedComment) {\n    props.ue.commentFromStore = savedComment;\n  }\n}\n\nfunction removeVisitStore() {\n  void removeVisit(url);\n  visitedMs.value = -2;\n}\nfunction updateVisitStore() {\n  const msNow = Date.now();\n  void setVisit(url, msNow);\n  visitedMs.value = msNow;\n}\n\nconst visitedText = computed(updateVisitedTitle);\nfunction updateVisitedTitle() {\n  if (visitedMs.value < 0) {\n    return \"never clicked\";\n  }\n  return formatVisitedMs(visitedMs.value);\n}\n\nconst commentCssClass = computed(() => {\n  if (props.ue.commentFromStore && !props.ue.comment) {\n    return \"comment-from-store\"\n  }\n  if (props.ue.commentFromStore && props.ue.commentFromStore !== props.ue.comment) {\n    return \"comment-from-store-over\";\n  }\n});\n\nfunction onDblClick() {\n  if (toRaw(popupEntry.value) === toRaw(props.ue)) {\n    popupEntry.value = null;\n  } else {\n    popupEntry.value = props.ue;\n  }\n}\n\nconst timePassedClass = computed(() => getTimePassedClass(visitedMs.value));\nfunction getTimePassedClass(ms: number) {\n  if (ms < 0) { return \"never-clicked\"; }\n  const now = Date.now();\n  const diff = Math.trunc((now - ms) / 1000);\n  if (diff < 60)       { return \"minute-1\";  }\n  if (diff < 60 *  2)  { return \"minute-2\";  }\n  if (diff < 60 *  5)  { return \"minute-5\";  }\n  if (diff < 60 * 10)  { return \"minute-10\"; }\n  if (diff < 60 * 30)  { return \"minute-30\"; }\n  if (diff < 60 * 45)  { return \"minute-45\"; }\n  if (diff < 60 * 60)  { return \"minute-60\"; }\n  if (diff < 3600 * 2)  { return \"hour-2\";  }\n  if (diff < 3600 * 4)  { return \"hour-4\";  }\n  if (diff < 3600 * 8)  { return \"hour-8\";  }\n  if (diff < 3600 * 14) { return \"hour-14\"; }\n  if (diff < 3600 * 24) { return \"day-1\";   }\n  if (diff < 86400 * 7) { return \"day-7\";   }\n  if (diff < 86400 * 30)  { return \"month-1\"; }\n  if (diff < 2592000 * 3) { return \"month-3\"; }\n  if (diff < 2592000 * 6) { return \"month-6\"; }\n  return \"long-ago\";\n}\n\n\nwatch(visitedMs,(value) => { // does not trigger on `triggerRef` in comparison with `watchEffect`\n  if (value > 0) {\n    setTimer();\n  }\n});\nonUnmounted(clearTimer);\n\nlet timerId: number;\nconst MINUTE = 1000 * 60;\nfunction setTimer() {\n  clearTimer();\n  const diff = Date.now() - visitedMs.value;\n  let time: number;\n  if (diff < MINUTE * 10) {\n    time = MINUTE;\n  } else if (diff < MINUTE * 60) {\n    time = MINUTE * 10;\n  } else if (diff < MINUTE * 60 * 24) {\n    time = MINUTE * 60;\n  } else {\n    return;\n  }\n  console.log(\"setTimeout\", time);\n  timerId = setTimeout(() => {\n    triggerRef(visitedMs);\n    setTimer();\n  }, time);\n}\nfunction clearTimer() {\n  clearTimeout(timerId);\n}\n\n\nfunction formatVisitedMs(value: number) {\n  return timeAgo(value) + \" â€” \" + formatDate(value, \"YYYY.MM.DD HH:mm:SS\", false);\n}\n\nfunction timeAgo(ms: number) {\n  const now = Date.now();\n  const secs = Math.trunc((now - ms) / 1000);\n  if (secs < 60) {\n    return `${secs} second${secs > 1 ? \"s\" : \"\"} ago`;\n  }\n\n  if (secs < 60 * 60) {\n    const m = Math.trunc(secs / 60);\n    return `${m} minute${m > 1 ? \"s\" : \"\"} ago`;\n  }\n  if (secs < 60 * 60 * 24) {\n    const m = Math.trunc(secs / 60 % 60).toString().padStart(2, \"0\");\n    const h = Math.trunc(secs / 60 / 60);\n    return `${h}:${m} ago`;\n  }\n  return Math.trunc(secs / 60 / 60 / 24) + \" days ago\";\n}\n\nconst clicked = ref(false);\nfunction markUrlAsClickedOnMMBClick(event: PointerEvent) { // on \"pointerup\"\n    const MIDDLE_BUTTON = 1;\n    if (event.button !== MIDDLE_BUTTON) {\n        return;\n    }\n    const activeElement = (document.getRootNode() as Document).activeElement;\n    if (activeElement !== event.currentTarget) {\n        return;\n    }\n    markUrlAsClicked();\n}\nfunction markUrlAsClicked() {\n  clicked.value = true;\n  updateVisitStore();\n  lastClickedEntry.value = toRaw(props.ue);\n}\nconst isLastClicked = computed(() => {\n  return toRaw(lastClickedEntry.value) === toRaw(props.ue);\n});\n\nfunction onInfoDotContextMenu() {\n  clicked.value = !clicked.value;\n}\nconst onPointerEnter = throttle(_onPointerEnter, 1000);\nfunction _onPointerEnter() {\n  triggerRef(visitedMs);\n}\nfunction onPointerDown(event: PointerEvent) {\n  const MIDDLE_BUTTON = 1;\n  if (event.button === MIDDLE_BUTTON) {\n    event.preventDefault();\n    removeVisitStore();\n  }\n}\n\n\n</script>\n\n<style scoped>\n\n.nowrap-text-ceil {\n  display: inline-flex;\n}\n.nowrap-text-ceil-content {\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n\na {\n  margin-left: 4px;\n  text-decoration: none;\n}\na:visited {\n  color: #6f42c1 !important;\n}\n.clicked {\n  background-color: #0000000a;\n}\n.clicked.last-clicked {\n  background-color: #0000000e;\n}\n.info-dot {\n  height: 16px;\n  width: 16px;\n  background-color: #0000000f;\n  margin-bottom: -3px;\n  display: inline-block;\n  border-radius: 8px;\n  border: 1px solid white;\n}\n/*.has-comment {*/\n/*  border: 1px solid gray;*/\n/*}*/\n.visited {\n  background-color: #dee2e6;\n}\n\n/*.never-clicked { background-color: #0000000f; }*/\n.minute-1  { background-color: #46c142; }\n.minute-2  { background-color: #6bc841; }\n.minute-5  { background-color: #88cf3f; }\n.minute-10 { background-color: #a3d53e; }\n.minute-30 { background-color: #bcdb3c; }\n.minute-45 { background-color: #d4e139; }\n.minute-60 { background-color: #ece737; }\n.hour-2  { background-color: #42c1b2; }\n.hour-4  { background-color: #4ba4b6; }\n.hour-8  { background-color: #4b88b9; }\n.hour-14 { background-color: #487abb; }\n.day-1   { background-color: #446cbc; }\n.day-7   { background-color: #5b5cb6; }\n.month-1 { background-color: #6a49b1; }\n.month-3 { background-color: #703fae; }\n.month-6 { background-color: #7633ab; }\n.long-ago { background-color: gray; }\n\ntr:hover {\n  box-shadow: 0 0 1px gray;\n}\n\n.no-dbl-click-select:active {\n  user-select: none;\n}\n\n.comment {\n  border-right: 2px solid transparent;\n}\n.comment-from-store {\n  border-right: 2px solid rgb(230, 244, 255);\n}\n.comment-from-store-over {\n  border-right: 2px solid #6f42c1;\n}\n\n.url {\n  border-left: 2px solid transparent;\n}\n.last-clicked > td.url {\n  border-left: 2px solid #b3bfff;\n}\n</style>\n","<template>\n  <Teleport to=\"body\">\n    <div class=\"message-edit-popup modal\" v-if=\"popupEntry\" @click=\"onCloseClick\">\n      <div class=\"popup-content\">\n        <div class=\"modal-content\">\n          <div class=\"modal-header\">\n            <h5 class=\"modal-title\">{{popupEntry.url}}</h5>\n            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\" @click=\"onCloseClick\"></button>\n          </div>\n          <div class=\"modal-body\">\n            <textarea rows=\"5\"\n                      :value=\"popupEntry.commentFromStore || popupEntry.comment\"\n                      @input=\"onInput\"\n                      ref=\"textareaElem\"\n                      @keydown=\"onEnterKeyDown\"\n            ></textarea>\n          </div>\n<!--          <div class=\"modal-footer\">-->\n<!--            <button type=\"button\" class=\"btn btn-secondary\">Close</button>-->\n<!--            <button type=\"button\" class=\"btn btn-primary\">Save changes</button>-->\n<!--          </div>-->\n        </div>\n      </div>\n    </div>\n  </Teleport>\n</template>\n\n<script setup lang=\"ts\">\nimport {popupEntry} from \"./core\";\nimport {saveComment} from \"./state-store\";\nimport {onMounted, onUpdated, Ref, ref} from \"vue\";\n\n\nfunction onCloseClick(event: MouseEvent) {\n  if (event.currentTarget === event.target) {\n    popupEntry.value = null;\n  }\n}\n\nfunction onEnterKeyDown(event: KeyboardEvent) {\n  if (event.key === \"Enter\" && !event.shiftKey) {\n    event.preventDefault();\n    popupEntry.value = null;\n  }\n}\n\nconst textareaElem: Ref<HTMLInputElement | null> = ref(null);\nconst focusTextarea = () => textareaElem.value?.focus();\nonMounted(focusTextarea);\nonUpdated(focusTextarea);\n\nfunction onInput(event: InputEvent) {\n  if (!popupEntry.value) {\n    return;\n  }\n  const newValue = (event.currentTarget as HTMLInputElement).value;\n  popupEntry.value.commentFromStore = newValue;\n  // console.log(popupEntry.value.comment);\n  // console.log(popupEntry.value.commentFromStore);\n  saveComment(popupEntry.value.url, newValue);\n}\n\n\n\n</script>\n\n<style scoped>\n.message-edit-popup {\n  min-width: 100vw;\n  min-height: 100vh;\n  position: fixed;\n  top: 0;\n  left: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  backdrop-filter: blur(1px);\n  background-color: rgba(255, 255, 255, 0.3);\n  /*pointer-events: none;*/\n}\n.popup-content {\n  /*pointer-events: auto;*/\n  min-width: 420px;\n  max-width: min(520px, 80%);\n}\n.modal-content {\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);\n}\n\ntextarea {\n  width: 100%;\n  height: 100%;\n  resize: none;\n}\ntextarea:focus {\n  outline: none;\n}\n\n.modal-title {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n</style>\n","import {createApp} from \"vue\";\nimport App from \"./App.vue\";\n\ncreateApp(App).mount(\"#app\");\n"],"names":["defaultFilterSettings","input_only","ref","settings","input_ignore","matcher","computed","onlyParts","ignoreParts","text","matchOnly","matchIgnore","url","urlFilter","inputText","popupEntry","lastClickedEntry","urlEntryList","urlEntries","parseUrlEntries","reactiveUrlEntries","reactive","urlEntryListFiltered","ue","urlsFiltered","lines","line","urls","main","comments","firstWord","words","matchUrl","word","match","getCodeArrays","items","size","jsonArray","a","len","n","count","parts","i","part","page","pageCount","blinkButtonMap","blink","elem","sleep_time","sleep","textareaEl","onClearTextInput","event","_a","onCopyUrlsAsList","onCopyUrlsAsColumn","onCopyUrlsAsCodeArrays","onAppendClipboardText","currentTarget","onReplaceClipboardText","throttle","runnable","time","waiting","queued","context","args","_arguments","commentsStore","createStore","saveComment","comment","set","loadComment","get","visitsStore","setVisit","value","getVisit","removeVisit","del","props","visitedMs","onMounted","loadState","onUpdated","visitedMsPromise","commentPromise","savedComment","removeVisitStore","updateVisitStore","msNow","visitedText","updateVisitedTitle","formatVisitedMs","commentCssClass","onDblClick","toRaw","timePassedClass","getTimePassedClass","ms","now","diff","watch","setTimer","onUnmounted","clearTimer","timerId","MINUTE","triggerRef","timeAgo","formatDate","secs","m","clicked","markUrlAsClickedOnMMBClick","markUrlAsClicked","isLastClicked","onInfoDotContextMenu","onPointerEnter","_onPointerEnter","onPointerDown","onCloseClick","onEnterKeyDown","textareaElem","focusTextarea","onInput","newValue","createApp","App"],"mappings":"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"}