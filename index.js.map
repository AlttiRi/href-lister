{"version":3,"file":"index.js","sources":["../src/components/core.ts","../src/components/InputControls.vue","../src/components/UrlList.vue","../src/main.ts"],"sourcesContent":["import {computed, ref, Ref} from \"vue\";\n\nexport const inputText: Ref<string> = ref(\"\");\n\nexport const urls: Ref<string[]> = computed(() => {\n    const lines = inputText.value.split(\"\\n\").map(line => line.trim()).filter(line => line);\n    const urls: string[] = [];\n    for (const line of lines) {\n        const main = line.split(/\\s+(#|\\/\\/)/)[0]; // trim comments\n        const words = main.trim().split(/\\s+/);\n        for (const word of words) {\n            const match = word.match(/(['\"]?)(?<url>https?:\\/\\/\\S+)(\\1)/);\n            if (match?.groups) {\n                urls.push(match.groups.url);\n            }\n        }\n    }\n    return urls;\n});\n\nexport function getCodeArrays(items: string[], size = 100) {\n    const jsonArray = (a: string[]) => `${a.length ? \"[\\\"\" + a.join(`\", \"`) + \"\\\"]\" : \"[]\"}`;\n    if (items.length <= size) {\n        return `/* ${items.length.toString().padStart(3)} */ ${jsonArray(items)},`;\n    }\n    const len = (n: number) => n.toString().length;\n    const count = Math.trunc(items.length / size);\n    const comment = items.length.toString().padStart(1 + len(items.length)) + \" \".repeat(3 + len(count));\n    const parts = [`/* ${comment} */`];\n    for (let i = 0; i <= count; i++) {\n        const part = items.slice(size * i, size + size * i);\n        const page = `(${i + 1})`.padStart(2 + len(count));\n        const pageCount = part.length.toString().padStart(1 + len(items.length));\n        parts.push(`/* ${pageCount} ${page} */ ${jsonArray(part)},`);\n    }\n    return parts.join(\"\\n\");\n}\n","<template>\n  <div class=\"row row-cols-lg-3 g-3 align-items-end\">\n    <div class=\"input col-12\">\n      <label style=\"display: contents;\">\n        <textarea spellcheck=\"false\" v-model=\"inputText\" ref=\"textareaEl\"></textarea>\n      </label>\n    </div>\n    <div class=\"input col-12\">\n      <span  class=\"row\">\n        <span class=\".col m-1\">\n          <span class=\"btn-group\">\n            <span class=\"input-group-text me-2\">Clipboard</span>\n          </span>\n          <button class=\"btn btn-outline-primary me-1\"\n                  @click=\"onReplaceClipboardText\"\n          >Replace</button>\n          <button class=\"btn btn-outline-primary me-1\"\n                  @click=\"onAppendClipboardText\"\n          >Append</button>\n        </span>\n        <span class=\".col m-1\">\n          <span class=\"btn-group\">\n            <span class=\"input-group-text me-2 text-center\">Controls</span>\n          </span>\n          <button class=\"btn btn-outline-primary me-1\"\n                  @click=\"onClearTextInput\"\n          >Clear</button>\n          <button class=\"btn btn-primary me-1\" title=\"Copy URLs\"\n                  @click=\"onCopyUrlsAsList\"\n                  @contextmenu=\"onCopyUrlsAsColumn\"\n                  @pointerdown=\"onCopyUrlsAsCodeArrays\"\n          >Copy</button>\n        </span>\n      </span>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport {Ref, ref} from \"vue\";\nimport {sleep} from \"@alttiri/util-js\";\nimport {getCodeArrays, inputText, urls} from \"./core\";\n\n\nconst blinkButtonMap = new WeakMap();\nasync function blink(elem: HTMLElement) {\n  elem.classList.add(\"btn-active\");\n  const sleep_time = sleep(150);\n  blinkButtonMap.set(elem, sleep_time);\n  await sleep_time;\n  if (blinkButtonMap.get(elem) === sleep_time) {\n    elem.classList.remove(\"btn-active\");\n  }\n}\n\n\nconst textareaEl: Ref<HTMLTextAreaElement | null> = ref(null);\n\nfunction onClearTextInput(event: MouseEvent) {\n  inputText.value = \"\";\n  textareaEl.value?.focus();\n  void blink(event.currentTarget as HTMLElement);\n}\n\n\nfunction onCopyUrlsAsList(event: MouseEvent) {\n  void navigator.clipboard.writeText(urls.value.join(\" \"));\n  void blink(event.currentTarget as HTMLElement);\n}\nfunction onCopyUrlsAsColumn(event: MouseEvent) {\n  event.preventDefault();\n  void navigator.clipboard.writeText(urls.value.join(\"\\n\"));\n  void blink(event.currentTarget as HTMLElement);\n}\nfunction onCopyUrlsAsCodeArrays(event: PointerEvent) {\n  const MIDDLE_BUTTON = 1;\n  if (event.button === MIDDLE_BUTTON) {\n    event.preventDefault();\n    void navigator.clipboard.writeText(getCodeArrays(urls.value));\n    void blink(event.currentTarget as HTMLElement);\n  }\n}\n\nasync function onAppendClipboardText(event: MouseEvent) {\n  const {currentTarget} = event;\n  const text = await navigator.clipboard.readText();\n  console.log(\"[clipboard] readText:\", text);\n  if (inputText.value && !inputText.value.endsWith(\"\\n\")) {\n    inputText.value += \"\\n\";\n  }\n  inputText.value += text;\n  void blink(currentTarget as HTMLElement);\n}\nasync function onReplaceClipboardText(event: MouseEvent) {\n  const {currentTarget} = event;\n  const text = await navigator.clipboard.readText();\n  console.log(\"[clipboard] readText:\", text);\n  inputText.value = text;\n  void blink(currentTarget as HTMLElement);\n}\n\n\n\n</script>\n\n<style scoped>\n\n\n.btn-group > .input-group-text {\n  width: 100px;\n  justify-content: center;\n}\n.btn-active,\n.btn-active:active {\n  background-color: black;\n  color: white;\n}\n\ntextarea {\n  width: 100%;\n  height: 82px;\n  resize: none;\n}\ntextarea:focus {\n  outline: none;\n}\n</style>\n","<template>\n  <div>\n    <table class=\"table table-borderless\">\n      <tbody>\n      <tr v-for=\"url in urls\" :key=\"url\">\n        <td>\n          <span class=\"info-dot\" @contextmenu=\"onInfoDotContextMenu\"></span>\n          <a class=\"url link-primary\" :href=\"url\" target=\"_blank\" rel=\"noreferrer noopener\"\n             @click=\"onClick\"\n          >{{url}}</a>\n        </td>\n      </tr>\n      </tbody>\n    </table>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport {urls} from \"./core\";\n\nfunction onClick(event: MouseEvent) {\n  const linkEl = event.currentTarget as HTMLAnchorElement;\n  linkEl.parentElement?.classList.add(\"clicked\");\n}\n\nfunction onInfoDotContextMenu(event: MouseEvent) {\n  event.preventDefault();\n  const spanEl = event.currentTarget as HTMLElement;\n  spanEl.parentElement?.classList.toggle(\"clicked\");\n}\n\n</script>\n\n<style scoped>\na {\n  margin-left: 4px;\n  text-decoration: none;\n  vertical-align: middle;\n}\na:visited {\n  color: #6f42c1 !important;\n}\n.clicked {\n  background-color: #0000000f;\n}\n.info-dot {\n  height: 16px;\n  width: 16px;\n  background-color: #0000000f;\n  vertical-align: middle;\n  display: inline-block;\n  border-radius: 8px;\n}\n</style>\n","import {createApp} from \"vue\";\nimport App from \"./App.vue\";\n\ncreateApp(App).mount(\"#app\");\n"],"names":["inputText","ref","urls","computed","lines","line","words","word","match","getCodeArrays","items","size","jsonArray","a","len","n","count","parts","i","part","page","pageCount","blinkButtonMap","blink","elem","sleep_time","sleep","textareaEl","onClearTextInput","event","_a","onCopyUrlsAsList","onCopyUrlsAsColumn","onCopyUrlsAsCodeArrays","onAppendClipboardText","currentTarget","text","onReplaceClipboardText","onClick","onInfoDotContextMenu","createApp","App"],"mappings":"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"}