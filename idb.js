function u(e){return new Promise((n,t)=>{e.oncomplete=e.onsuccess=()=>n(e.result),e.onabort=e.onerror=()=>t(e.error)})}function s(e,n){const t=indexedDB.open(e);t.onupgradeneeded=()=>t.result.createObjectStore(n);const r=u(t);return(o,c)=>r.then(a=>c(a.transaction(n,o).objectStore(n)))}let l;function i(){return l||(l=s("keyval-store","keyval")),l}function d(e,n=i()){return n("readonly",t=>u(t.get(e)))}function p(e,n,t=i()){return t("readwrite",r=>(r.put(n,e),u(r.transaction)))}function h(e,n=i()){return n("readwrite",t=>(e.forEach(r=>t.put(r[1],r[0])),u(t.transaction)))}function y(e,n=i()){return n("readwrite",t=>(t.delete(e),u(t.transaction)))}function f(e,n){return e.openCursor().onsuccess=function(){this.result&&(n(this.result),this.result.continue())},u(e.transaction)}function g(e=i()){return e("readonly",n=>{if(n.getAll&&n.getAllKeys)return Promise.all([u(n.getAllKeys()),u(n.getAll())]).then(([r,o])=>r.map((c,a)=>[c,o[a]]));const t=[];return e("readonly",r=>f(r,o=>t.push([o.key,o.value])).then(()=>t))})}export{s as createStore,y as del,g as entries,d as get,p as set,h as setMany};
//# sourceMappingURL=idb.js.map
