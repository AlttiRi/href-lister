import{r as C,c as T,a as lt,d as k,o as y,b as w,e as s,w as ut,v as dt,u as m,i as pt,p as W,f as Y,s as ft,g as G,h as J,j as Q,k as mt,l as X,m as Z,n as _t,q as vt,t as ht,x as $,y as E,z as gt,A as U,B as H,F as P,C as yt,D as N,E as z,T as bt,G as A,H as Ct}from"./vendor.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function r(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function n(o){if(o.ep)return;o.ep=!0;const u=r(o);fetch(o.href,u)}})();const g=C("");location.href==="http://localhost:5173/"&&(g.value=`http://localhost:5173/ asdf
http://localhost:5173/#qwe #qwerty1qwerty2qwerty3qwerty4qwerty5qwerty6
http://localhost:5173/#qqq`);const v=C(null),K=C(null),tt=T(()=>{const t=wt(g.value),e=lt(t);return console.log(t,e),e}),I=T(()=>tt.value.map(t=>t.url));function wt(t){const e=t.split(`
`).map(n=>n.trim()).filter(n=>n),r=[];for(const n of e){const[o,...u]=n.split(/\s+(#|\/\/)/),[c,...d]=o.trim().split(/\s+/);if(c.startsWith("http")){const _=L(c);if(_&&d.every(h=>!L(h))){r.push({url:_,comment:[...d,...u].join(" ")});continue}_&&r.push({url:_})}else d.unshift(c);for(const _ of d){const h=L(_);h&&r.push({url:h})}}return r}function L(t){const e=t.match(/(['"]?)(?<url>https?:\/\/[^\s"]+)(\1)/);if(console.log(e),e!=null&&e.groups)return e.groups.url}function xt(t,e=100){const r=d=>`${d.length?'["'+d.join('", "')+'"]':"[]"}`;if(t.length<=e)return`/* ${t.length.toString().padStart(3)} */ ${r(t)},`;const n=d=>d.toString().length,o=Math.trunc(t.length/e),c=[`/* ${t.length.toString().padStart(1+n(t.length))+" ".repeat(3+n(o))} */`];for(let d=0;d<=o;d++){const _=t.slice(e*d,e+e*d),h=`(${d+1})`.padStart(2+n(o)),l=_.length.toString().padStart(1+n(t.length));c.push(`/* ${l} ${h} */ ${r(_)},`)}return c.join(`
`)}const O=t=>(W("data-v-95e40442"),t=t(),Y(),t),Tt={class:"row row-cols-lg-3 g-3 align-items-end"},kt={class:"input col-12"},$t=O(()=>s("label",{for:"urls-textarea",class:"fuck-off-lighthouse"},null,-1)),Mt={class:"input col-12"},Dt={class:"row"},St=O(()=>s("span",{class:"btn-group"},[s("span",{class:"input-group-text me-2"},"Clipboard")],-1)),Et={class:".col m-1"},It=O(()=>s("span",{class:"btn-group"},[s("span",{class:"input-group-text me-2 text-center"},"Controls")],-1)),Lt=k({__name:"InputControls",setup(t){const e=new WeakMap;async function r(l){l.classList.add("btn-active");const p=ft(150);e.set(l,p),await p,e.get(l)===p&&l.classList.remove("btn-active")}const n=C(null);function o(l){var p;g.value="",(p=n.value)==null||p.focus(),r(l.currentTarget)}function u(l){navigator.clipboard.writeText(I.value.join(" ")),r(l.currentTarget)}function c(l){l.preventDefault(),navigator.clipboard.writeText(I.value.join(`
`)),r(l.currentTarget)}function d(l){l.button===1&&(l.preventDefault(),navigator.clipboard.writeText(xt(I.value)),r(l.currentTarget))}async function _(l){const{currentTarget:p}=l,b=await navigator.clipboard.readText();console.log("[clipboard] readText:",b),g.value&&!g.value.endsWith(`
`)&&(g.value+=`
`),g.value+=b,r(p)}async function h(l){const{currentTarget:p}=l,b=await navigator.clipboard.readText();console.log("[clipboard] readText:",b),g.value=b,r(p)}return(l,p)=>(y(),w("div",Tt,[s("div",kt,[$t,ut(s("textarea",{id:"urls-textarea",spellcheck:"false","onUpdate:modelValue":p[0]||(p[0]=b=>pt(g)?g.value=b:null),ref_key:"textareaEl",ref:n},null,512),[[dt,m(g)]])]),s("div",Mt,[s("span",Dt,[s("span",{class:".col m-1"},[St,s("button",{class:"btn btn-outline-primary me-1",onClick:h},"Replace"),s("button",{class:"btn btn-outline-primary me-1",onClick:_},"Append")]),s("span",Et,[It,s("button",{class:"btn btn-outline-primary me-1",onClick:o},"Clear"),s("button",{class:"btn btn-primary me-1",title:"Copy URLs",onClick:u,onContextmenu:c,onPointerdown:d},"Copy",32)])])])]))}});const S=(t,e)=>{const r=t.__vccOpts||t;for(const[n,o]of e)r[n]=o;return r},Ut=S(Lt,[["__scopeId","data-v-95e40442"]]);function At(t,e=50){let r=!1,n=!1,o,u;return function(...c){r?(o=this,u=c,n=!0):(r=!0,setTimeout(function(){n&&t.apply(o,u),r=n=!1},e),t.apply(this,c))}}const et=G("HrefListerComments","Comments");function Pt(t,e){Q(t,e,et)}function Nt(t){return J(t,et)}const q=G("HrefLister","Visits");function Ot(t,e){return Q(t,e,q)}function qt(t){return J(t,q)}function Bt(t){return mt(t,q)}const Vt={class:"col-9 nowrap-text-ceil url"},Ft={class:"nowrap-text-ceil-content"},Rt=["title","onContextmenu"],jt=["href","title"],Ht={class:"comment-content nowrap-text-ceil-content no-dbl-click-select"},Kt=k({__name:"UrlListItem",props:{ue:null},setup(t){const e=t,r=e.ue.url,n=C(-1);X(o),Z(o);async function o(){const i=qt(r),f=Nt(r);n.value=await i||-2;const a=await f;a&&(e.ue.commentFromStore=a)}function u(){Bt(r),n.value=-2}function c(){const i=Date.now();Ot(r,i),n.value=i}const d=T(_);function _(){return n.value<0?"never clicked":nt(n.value)}const h=T(()=>{if(e.ue.commentFromStore&&!e.ue.comment)return"comment-from-store";if(e.ue.commentFromStore&&e.ue.commentFromStore!==e.ue.comment)return"comment-from-store-over"});function l(){$(v.value)===$(e.ue)?v.value=null:v.value=e.ue}const p=T(()=>b(n.value));function b(i){if(i<0)return"never-clicked";const f=Date.now(),a=Math.trunc((f-i)/1e3);return a<60?"minute-1":a<60*2?"minute-2":a<60*5?"minute-5":a<60*10?"minute-10":a<60*30?"minute-30":a<60*45?"minute-45":a<60*60?"minute-60":a<3600*2?"hour-2":a<3600*4?"hour-4":a<3600*8?"hour-8":a<3600*14?"hour-14":a<3600*24?"day-1":a<86400*7?"day-7":a<86400*30?"month-1":a<2592e3*3?"month-3":a<2592e3*6?"month-6":"long-ago"}_t(n,i=>{i>0&&V()}),vt(F);let B;const x=1e3*60;function V(){F();const i=Date.now()-n.value;let f;if(i<x*10)f=x;else if(i<x*60)f=x*10;else if(i<x*60*24)f=x*60;else return;console.log("setTimeout",f),B=setTimeout(()=>{H(n),V()},f)}function F(){clearTimeout(B)}function nt(i){return ot(i)+" — "+ht(i,"YYYY.MM.DD HH:mm:SS",!1)}function ot(i){const f=Date.now(),a=Math.trunc((f-i)/1e3);if(a<60)return`${a} second${a>1?"s":""} ago`;if(a<60*60){const D=Math.trunc(a/60);return`${D} minute${D>1?"s":""} ago`}if(a<60*60*24){const D=Math.trunc(a/60%60).toString().padStart(2,"0");return`${Math.trunc(a/60/60)}:${D} ago`}return Math.trunc(a/60/60/24)+" days ago"}const M=C(!1);function st(i){i.button!==1||document.getRootNode().activeElement!==i.currentTarget||R()}function R(){M.value=!0,c(),K.value=$(e.ue)}const rt=T(()=>$(K.value)===$(e.ue));function at(){M.value=!M.value}const j=At(ct,1e3);function ct(){H(n)}function it(i){i.button===1&&(i.preventDefault(),u())}return(i,f)=>(y(),w("tr",{onPointerenter:f[0]||(f[0]=(...a)=>m(j)&&m(j)(...a)),class:E({clicked:M.value,"last-clicked":m(rt)})},[s("td",Vt,[s("span",Ft,[s("span",{class:E(["info-dot",{["has-comment"]:t.ue.comment,visited:n.value>0,[m(p)]:!0}]),title:m(d),onContextmenu:gt(at,["prevent"]),onPointerdown:it},null,42,Rt),s("a",{class:"url link-primary",target:"_blank",rel:"noreferrer noopener",href:t.ue.url,title:t.ue.comment,onClick:R,onPointerup:st},U(t.ue.url),41,jt)])]),s("td",{class:E(["col-3 comment nowrap-text-ceil",{[m(h)]:m(h)}]),onDblclick:l},[s("span",Ht,U(t.ue.commentFromStore||t.ue.comment||" "),1)],34)],34))}});const Wt=S(Kt,[["__scopeId","data-v-29f57139"]]),Yt={class:"table table-borderless"},Gt=k({__name:"UrlList",setup(t){return(e,r)=>(y(),w("div",null,[s("table",Yt,[s("tbody",null,[(y(!0),w(P,null,yt(m(tt),n=>(y(),N(Wt,{key:n.url,ue:n},null,8,["ue"]))),128))])])]))}}),Jt={class:"popup-content"},Qt={class:"modal-content"},Xt={class:"modal-header"},Zt={class:"modal-title"},zt={class:"modal-body"},te=["value"],ee=k({__name:"MessageEditPopup",setup(t){function e(c){c.currentTarget===c.target&&(v.value=null)}function r(c){c.key==="Enter"&&!c.shiftKey&&(c.preventDefault(),v.value=null)}const n=C(null),o=()=>{var c;return(c=n.value)==null?void 0:c.focus()};X(o),Z(o);function u(c){if(!v.value)return;const d=c.currentTarget.value;v.value.commentFromStore=d,Pt(v.value.url,d)}return(c,d)=>(y(),N(bt,{to:"body"},[m(v)?(y(),w("div",{key:0,class:"message-edit-popup modal",onClick:e},[s("div",Jt,[s("div",Qt,[s("div",Xt,[s("h5",Zt,U(m(v).url),1),s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:e})]),s("div",zt,[s("textarea",{rows:"5",value:m(v).commentFromStore||m(v).comment,onInput:u,ref_key:"textareaElem",ref:n,onKeydown:r},null,40,te)])])])])):z("",!0)]))}});const ne=S(ee,[["__scopeId","data-v-c6abb4ea"]]),oe=s("hr",null,null,-1),se=s("hr",null,null,-1),re=k({__name:"Main",setup(t){return(e,r)=>(y(),w(P,null,[oe,A(Ut),se,A(Gt),m(v)?(y(),N(ne,{key:0})):z("",!0)],64))}}),ae=t=>(W("data-v-80fad6c5"),t=t(),Y(),t),ce=ae(()=>s("a",{class:"readme",title:"Open Readme",href:"https://github.com/AlttiRi/href-lister#keeplister",target:"_blank"},[s("i",null,"i")],-1)),ie=k({__name:"App",setup(t){return(e,r)=>(y(),w(P,null,[A(re),ce],64))}});const le=S(ie,[["__scopeId","data-v-80fad6c5"]]);Ct(le).mount("#app");
//# sourceMappingURL=index.js.map
