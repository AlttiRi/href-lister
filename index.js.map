{"version":3,"file":"index.js","sources":["../src/core/settings.ts","../src/core/filters.ts","../src/components/Filters.vue","../src/components/PopupWrapper.vue","../src/core/url-parser.ts","../src/core/url-entry.ts","../src/core/core.ts","../src/core/util.ts","../src/components/InputControls.vue","../src/core/title-handler.ts","../src/components/URLsInfoLine.vue","../src/core/relative-time-trigger.ts","../src/components/UrlListItemTags.vue","../src/components/UrlListItem.vue","../src/components/UrlList.vue","../src/components/MessageEditPopup.vue","../src/components/popup/FancyPopup.vue","../src/components/popup/UrlCleanerConfig.vue","../src/components/popup/PopupUrlCleaner.vue","../src/components/popup/PopupAutoClicker.vue","../src/components/edit-tags-popup/SelectedTags.vue","../src/components/edit-tags-popup/SuggestedTag.vue","../src/core/tags.ts","../src/components/edit-tags-popup/UrlEntryTagsEditPopup.vue","../src/components/popup/export-util.ts","../src/components/popup/PopupSettings.vue","../src/components/Main.vue","../src/App.vue","../src/main.ts"],"sourcesContent":["export const defaultFilterSettings = {\n    input_only: \"\",\n    input_only_disabled: false,\n    input_ignore: \"\",\n    input_ignore_disabled: false,\n    reverse_input_only: false,\n    case_sensitive: false,\n}\n// export const defaultCommonSettings = {\n//     unique: true,\n//     sort: true,\n//     reverse: false,\n//     hide_prefix: true,\n//     https: true,\n// }\n//\n// export const defaultSettings = {\n//     ...defaultFilterSettings,\n//     ...defaultCommonSettings,\n// }\n","import {computed, ComputedRef, Ref, ref} from \"vue\";\nimport {defaultFilterSettings as settings} from \"./settings\";\n\n\nexport const input_only:   Ref<string> = ref(settings.input_only);\nexport const input_ignore: Ref<string> = ref(settings.input_ignore);\n\nconst matcher = computed(() => {\n    let onlyParts   =   input_only.value.trim().split(/\\s+/g).filter(o => o);\n    let ignoreParts = input_ignore.value.trim().split(/\\s+/g).filter(o => o);\n    if (!settings.case_sensitive) {\n        onlyParts   =   onlyParts.map(text => text.toLowerCase());\n        ignoreParts = ignoreParts.map(text => text.toLowerCase());\n    }\n\n    let matchOnly:   (url: string) => boolean;\n    let matchIgnore: (url: string) => boolean;\n    if (!settings.case_sensitive) {\n        matchOnly   = (url: string) =>   onlyParts.some(text => url.toLowerCase().includes(text));\n        matchIgnore = (url: string) => ignoreParts.some(text => url.toLowerCase().includes(text));\n    } else {\n        matchOnly   = (url: string) =>   onlyParts.some(text => url.includes(text));\n        matchIgnore = (url: string) => ignoreParts.some(text => url.includes(text));\n    }\n    return {matchOnly, matchIgnore, onlyParts, ignoreParts};\n});\n\ntype FilterPredicate = (url: string) => boolean;\nexport const urlFilter: ComputedRef<FilterPredicate> = computed(() => {\n    const {matchOnly, matchIgnore, onlyParts} = matcher.value;\n\n    if (!settings.input_only_disabled && onlyParts.length) {\n        if (!settings.reverse_input_only) {\n            return (url: string) => matchOnly(url);\n        } else {\n            return (url: string) => !matchOnly(url);\n        }\n    }\n    if (!settings.input_ignore_disabled) {\n        return (url: string) => !matchIgnore(url);\n    }\n\n    return (url: string) => Boolean(url);\n});\n","<script setup lang=\"ts\">\nimport {input_only, input_ignore} from \"@/core/filters\";\n</script>\n\n<template>\n  <div class=\"row row-cols-lg-3 g-3 align-items-center\" data-component=\"Filters\">\n    <div class=\"col-12\">\n      <label>\n        <span class=\"input-group\">\n          <span class=\"input-group-text\">Only</span>\n          <input type=\"text\" class=\"form-control\" v-model=\"input_only\">\n        </span>\n      </label>\n    </div>\n    <div class=\"col-12\">\n      <label>\n        <span class=\"input-group\">\n          <span class=\"input-group-text\">Ignore</span>\n          <input type=\"text\" class=\"form-control\" v-model=\"input_ignore\">\n        </span>\n      </label>\n    </div>\n  </div>\n</template>\n\n<style scoped>\nlabel {\n    display: contents;\n}\n</style>\n","<template>\n  <Teleport to=\"body\">\n    <slot></slot>\n  </Teleport>\n</template>\n","export type InputUrlEntry = {\n    url: string,\n    inputComment?: string,\n}\n\n// todo add tests\nexport function parseUrlEntries(text: string): InputUrlEntry[] {\n    const lines = text.split(\"\\n\").map(line => line.trim()).filter(line => line);\n    const urls: InputUrlEntry[] = [];\n    for (const line of lines) {\n        const [main, ...comments] = line.split(/\\s+(#|\\/\\/)/);\n        const [firstWord, ...words] = main.trim().split(/\\s+/);\n\n        if (firstWord.startsWith(\"http\")) {\n            const url = matchUrl(firstWord);\n            if (url && words.every(word => !matchUrl(word))) {\n                urls.push({\n                    url,\n                    inputComment: [...words, ...comments].join(\" \")\n                });\n                continue;\n            }\n            if (url) {\n                urls.push({url});\n            }\n        } else {\n            words.unshift(firstWord);\n        }\n\n        for (const word of words) {\n            const url = matchUrl(word);\n            if (url) {\n                urls.push({url});\n            }\n        }\n    }\n    return urls;\n}\n\nfunction matchUrl(word: string) {\n    const match = word.match(/(['\"]?)(?<url>https?:\\/\\/[^\\s\"]+)(\\1)/);\n    console.log(match);\n    if (match?.groups) {\n        return match.groups.url;\n    }\n}\n","import {toRaw} from \"vue\";\nimport {isString} from \"@alttiri/util-js\";\nimport {createStore, del, get, set, entries, setMany} from \"idb-keyval\";\nconst idb = {createStore, del, get, set, entries, setMany};\nimport {InputUrlEntry} from \"./url-parser\";\n\n\nconst urlInfoStore = idb.createStore(\"HrefListerUrlInfo\", \"UrlInfo\"); // todo rename to `UrlEntry`\n\nexport type UrlEntryState = {\n    comment?: string,\n    visited?: number,\n    tags?: string[],\n}\n\nexport function exportUrlEntryStore(): Promise<[string, UrlEntryState][]> {\n    return idb.entries(urlInfoStore);\n}\nexport async function importUrlEntryStore(entries: [string, UrlEntryState][]): Promise<boolean> {\n    if (!Array.isArray(entries)) {\n        return false;\n    }\n    if (entries.length === 0) {\n        return false;\n    }\n    const [k, v] = entries[0];\n    if (!isString(k) || typeof v !== \"object\") {\n        return false;\n    }\n    await idb.setMany(entries, urlInfoStore);\n    return true;\n}\n\nexport type UrlInit = {url: string, inputComment?: string, urlOrigin?: string};\nexport type InputUrlEntryEx = InputUrlEntry & {urlOrigin?: string};\n\nexport class UrlEntry {\n    static stateMap = new Map<string, UrlEntryState>();\n    private readonly state: UrlEntryState;\n    readonly url: string;\n    readonly inputComment?: string;\n    readonly initialVisited?: number;\n    readonly urlOrigin?: string;\n    private constructor({url, inputComment, urlOrigin}: UrlInit, state: UrlEntryState, ) {\n        this.url = url;\n        this.state = state;\n        if (inputComment) {\n            this.inputComment = inputComment;\n        }\n        if (state.visited) {\n            this.initialVisited = state.visited;\n        }\n        if (urlOrigin) {\n            this.urlOrigin = urlOrigin;\n        }\n    }\n    static async getInstance(init: InputUrlEntryEx): Promise<UrlEntry> {\n        const url = init.urlOrigin || init.url;\n        let state = UrlEntry.stateMap.get(url);\n        if (state) {\n            return new UrlEntry(init, state);\n        }\n        state = await idb.get(url, urlInfoStore);\n        if (state === undefined) {\n            state = {};\n        }\n        UrlEntry.stateMap.set(url, state);\n        return new UrlEntry(init, state);\n    }\n    isEquals(target: UrlEntry | null): boolean {\n        if (!target) {\n            return false;\n        }\n        return this.state === target.state && this.inputComment === target.inputComment;\n    }\n    get comment() { return this.state.comment; }\n    get visited() { return this.state.visited; }\n    get tags()    { return this.state.tags;    }\n    async setComment(comment: string) {\n        this.state.comment = comment;\n        await this.update();\n    }\n    async delComment() {\n        delete this.state.comment;\n        await this.update();\n    }\n    async setVisited(visited: number) {\n        this.state.visited = visited;\n        await this.update();\n    }\n    async delVisited() {\n        delete this.state.visited;\n        await this.update();\n    }\n    async addTag(tag: string) {\n        if (!this.state.tags) {\n            this.state.tags = [];\n        }\n        if (this.state.tags.includes(tag)) {\n            return;\n        }\n        this.state.tags.push(tag);\n        await this.update();\n    }\n    async delTag(tag: string) {\n        if (!this.state.tags) {\n            return;\n        }\n        const index = this.state.tags.indexOf(tag);\n        if (index == -1) {\n            return;\n        }\n        this.state.tags.splice(index, 1);\n        if (this.state.tags.length === 0) {\n            delete this.state.tags;\n        }\n        await this.update();\n    }\n    private update() {\n        if (!Object.keys(this.state).length) {\n            return idb.del(this.urlOrigin || this.url, urlInfoStore);\n        }\n        return idb.set(this.urlOrigin || this.url, toRaw(this.state), urlInfoStore);\n    }\n}\n\n\n// The old stores\n// const commentsStore = idb.createStore(\"HrefListerComments\", \"Comments\");\n// const visitsStore   = idb.createStore(\"HrefLister\", \"Visits\");\nObject.assign(globalThis, {\n    idb: {\n        createStore, del, get, set, entries,\n        // commentsStore, visitsStore,\n        urlInfoStore,\n        // await idb.get(\"http://localhost:5173/\", idb.urlInfoStore)\n        // await idb.entries(idb.urlInfoStore)\n    },\n    UrlEntry,\n});\n","import {computed, ref, Ref, ComputedRef, watchEffect, reactive, watch, Reactive, toRefs} from \"vue\";\nimport {UCCompiledRules, UCRuleStrings, UrlCleaner} from \"@alttiri/string-magic\";\nimport {InputUrlEntry, parseUrlEntries} from \"./url-parser\";\nimport {InputUrlEntryEx, UrlEntry} from \"./url-entry\";\nimport {urlFilter} from \"./filters\";\n\n\nexport const NEVER_VISITED_TIME = -1;\n\nexport const inputText: Ref<string> = ref(\"\");\nexport const messagePopupEntry: Ref<UrlEntry | null> = ref(null);\nexport const tagsPopupEntry:    Ref<UrlEntry | null> = ref(null);\nexport const clickedUrls = ref(new Set<string>());\nexport const showPopupAutoClicker = ref<boolean>(false);\nexport const showPopupUrlCleaner  = ref<boolean>(false);\nexport const showPopupSettings    = ref<boolean>(false);\nexport const resets: Record<string, Function> = {}; // Uses `id` of `FancyPopup`\nexport function resetACPopup() {\n    resets[\"auto-clicker\"]?.();\n}\nexport function resetUCPopup() {\n    resets[\"url-cleaner\"]?.();\n}\nexport function resetSTPopup() {\n    resets[\"settings\"]?.();\n}\n\nexport const editable   = ref(true);\nexport const appendable = ref(true);\n\nexport type LastClickedInfo = {\n    index: number,\n    entry: UrlEntry,\n    elem:  HTMLTableRowElement,\n};\nexport const lastClickedInfo: Ref<LastClickedInfo | null> = ref(null);\n\n\n// todo \"inline\"\nfunction useLocalStorageObject<T extends object>(itemName: string, defaultValue: T | (() => T)): Reactive<T> {\n    const lsValue: string | null = localStorage.getItem(itemName);\n    const object = reactive(lsValue === null\n        ? (typeof defaultValue === \"function\" ? defaultValue() : defaultValue)\n        : JSON.parse(lsValue));\n    watch(object,() => {\n        localStorage.setItem(itemName, JSON.stringify(object));\n    });\n    return object;\n}\n\nexport const clickerSettings = toRefs(useLocalStorageObject(\"href-lister-clicker-settings\", {\n    delay: 1,\n    count: 0,\n}));\n\nexport const urlCleanerSettings = toRefs(useLocalStorageObject(\"href-lister-url-cleaner-settings\", () => {\n    const defaultUCRules: UCRuleStrings = [\n        \"site:youtube.com\",    \"trim-search-params:feature t si\",\n        \"site:t.umblr.com\",    \"filter-start:https://t.umblr.com/redirect\", \"search-param:z\", \"recursive\",\n        \"site:deviantart.com\", \"trim-start:https://www.deviantart.com/users/outgoing?\", \"decode-url\", \"recursive\",\n    ];\n    return {\n        ucRuleStrings:   defaultUCRules as UCRuleStrings,\n        ucCompiledRules: UrlCleaner.compileRuleStrings(defaultUCRules) as UCCompiledRules,\n    }\n}));\nexport type UCSettings = typeof urlCleanerSettings;\n\nconst cleaner = ref(UrlCleaner.fromRuleRecords(urlCleanerSettings.ucCompiledRules.value));\nwatch(urlCleanerSettings.ucCompiledRules, () => {\n    cleaner.value = UrlCleaner.fromRuleRecords(urlCleanerSettings.ucCompiledRules.value);\n});\n\nexport const urlOriginSettings = toRefs(useLocalStorageObject(\"href-lister-url-origin-settings\", () => {\n    const defaultUORules: UCRuleStrings = [\"site:cdn.discordapp.com\", \"trim-search-params:ex is hm\"];\n    return {\n        ucRuleStrings:   defaultUORules as UCRuleStrings,\n        ucCompiledRules: UrlCleaner.compileRuleStrings(defaultUORules) as UCCompiledRules,\n    }\n}));\n\nconst origin = ref(UrlCleaner.fromRuleRecords(urlOriginSettings.ucCompiledRules.value));\nwatch(urlOriginSettings.ucCompiledRules, () => {\n    origin.value = UrlCleaner.fromRuleRecords(urlOriginSettings.ucCompiledRules.value);\n});\n\nexport const commonSettings = toRefs(useLocalStorageObject(\"href-lister-common-settings\", {\n    useCleaner:  true,\n    useOriginer: true,\n}));\n\nconst {useCleaner, useOriginer} = commonSettings;\nexport const urlEntryList: Ref<UrlEntry[]> = ref([]);\nwatchEffect(async () => {\n    const urlEntries: InputUrlEntry[] = parseUrlEntries(inputText.value);\n    const urlInfos: UrlEntry[] = [];\n    for (const urlEntry of urlEntries) {\n        urlEntry.url    = useCleaner.value  ? cleaner.value.clean(urlEntry.url) : urlEntry.url;\n        const urlOrigin = useOriginer.value ?  origin.value.clean(urlEntry.url) : urlEntry.url;\n        if (urlOrigin !== urlEntry.url) {\n            (urlEntry as InputUrlEntryEx).urlOrigin = urlOrigin;\n        }\n        urlInfos.push(await UrlEntry.getInstance(urlEntry));\n    }\n    urlEntryList.value = urlInfos;\n});\n\nexport const urlEntryListFiltered: ComputedRef<UrlEntry[]> = computed(() => {\n    return urlEntryList.value.filter(ue => urlFilter.value(ue.url));\n});\n\nexport const urlsFiltered: ComputedRef<string[]> = computed(() => {\n    const urls = urlEntryListFiltered.value.map(ue => ue.url);\n    // @ts-ignore\n    globalThis.__urls = urls;\n    return urls;\n});\n\n\nif (location.href === \"http://localhost:5173/\") {\n    inputText.value =\n          \"http://localhost:5173/ asdf\\n\"\n        + \"http://localhost:5173/#qqq\\n\"\n        + \"http://localhost:5173/#qqq\\n\"\n        + \"http://localhost:5173/#www\\n\"\n     // + \"http://localhost:5173/#qwe #qwerty1qwerty2qwerty3qwerty4qwerty5qwerty6\\n\"\n        + \"https://www.youtube.com/watch?feature=player_embedded&v=Qwert123\"\n}\n","export function getCodeArrays(items: string[], size = 100) {\n    const jsonArray = (a: string[]) => `${a.length ? \"[\\\"\" + a.join(`\", \"`) + \"\\\"]\" : \"[]\"}`;\n    if (items.length <= size) {\n        return `/* ${items.length.toString().padStart(3)} */ ${jsonArray(items)},`;\n    }\n    const len = (num: number) => num.toString().length;\n    const count = Math.trunc(items.length / size);\n    const comment = items.length.toString().padStart(1 + len(items.length)) + \" \".repeat(3 + len(count));\n    const parts = [`/* ${comment} */`];\n    for (let i = 0; i <= count; i++) {\n        const part = items.slice(size * i, size + size * i);\n        const page = `(${i + 1})`.padStart(2 + len(count));\n        const pageCount = part.length.toString().padStart(1 + len(items.length));\n        parts.push(`/* ${pageCount} ${page} */ ${jsonArray(part)},`);\n    }\n    return parts.join(\"\\n\");\n}\n\nexport function timeAgo(ms: number) {\n    const now = Date.now();\n    const secs = Math.trunc((now - ms) / 1000);\n    if (secs < 60) {\n        return `${secs} second${secs > 1 ? \"s\" : \"\"} ago`;\n    }\n\n    if (secs < 60 * 60) {\n        const m = Math.trunc(secs / 60);\n        return `${m} minute${m > 1 ? \"s\" : \"\"} ago`;\n    }\n    if (secs < 60 * 60 * 24) {\n        const m = Math.trunc(secs / 60 % 60).toString().padStart(2, \"0\");\n        const h = Math.trunc(secs / 60 / 60);\n        return `${h}:${m} ago`;\n    }\n    return Math.trunc(secs / 60 / 60 / 24) + \" days ago\";\n}\n\n\nconst ordinals = [\n    \"1st\", \"2nd\", \"3rd\"\n];\nexport function ordinalIndicator(index: number | string) {\n    index = Number(index);\n    if (ordinals[index]) {\n        return ordinals[index];\n    }\n    return index + 1 + \"th\";\n}\n\n\nexport function downloadBlob(blob: Blob, name: string, url?: string): void {\n    const anchor = document.createElement(\"a\");\n    anchor.setAttribute(\"download\", name || \"\");\n    const blobUrl = URL.createObjectURL(blob);\n    anchor.href = blobUrl + (url ? (\"#\" + url) : \"\");\n    anchor.click();\n    setTimeout(() => URL.revokeObjectURL(blobUrl), 15000);\n}\n\nObject.assign(globalThis, {downloadBlob});\n\n/*\n// back up href-lister\nlet json = {};\nfor (const [url, value] of await idb.entries(idb.urlInfoStore)) {\n    console.log([url, value])\n    json[url] = value;\n}\nlet text = JSON.stringify(json, null, \" \");\ndownloadBlob(new Blob([text]), `[href-lister] urlInfoStore-${Date.now()}.json`);\n*/\n","<script setup lang=\"ts\">\nimport {Ref, ref} from \"vue\";\nimport {hashString, sleep} from \"@alttiri/util-js\";\nimport {\n  appendable, commonSettings,\n  editable,\n  inputText,\n  resetACPopup, resetUCPopup, resetSTPopup,\n  showPopupAutoClicker,\n  showPopupUrlCleaner,\n  showPopupSettings,\n  urlsFiltered\n} from \"@/core/core\";\nimport {getCodeArrays} from \"@/core/util\";\n\nconst blinkButtonMap = new WeakMap();\nasync function blink(elem: HTMLElement, {klass = \"btn-active\", time = 180} = {}) {\n  elem.classList.add(klass);\n  const sleep_time = sleep(time);\n  blinkButtonMap.set(elem, sleep_time);\n  await sleep_time;\n  if (blinkButtonMap.get(elem) === sleep_time) {\n    elem.classList.remove(klass);\n  }\n}\n\n\nconst textareaEl: Ref<HTMLTextAreaElement | null> = ref(null);\n\nfunction onClearTextInput(event: MouseEvent) {\n  inputText.value = \"\";\n  textareaEl.value?.focus();\n  onInput();\n  void blink(event.currentTarget as HTMLElement);\n}\n\n\nfunction onCopyUrlsAsList(event: MouseEvent) {\n  void navigator.clipboard.writeText(urlsFiltered.value.join(\" \"));\n  void blink(event.currentTarget as HTMLElement);\n}\nfunction onCopyUrlsAsColumn(event: MouseEvent) {\n  event.preventDefault();\n  void navigator.clipboard.writeText(urlsFiltered.value.join(\"\\n\"));\n  void blink(event.currentTarget as HTMLElement);\n}\nfunction onCopyUrlsAsCodeArrays(event: PointerEvent) {\n  const MIDDLE_BUTTON = 1;\n  if (event.button === MIDDLE_BUTTON) {\n    event.preventDefault();\n    void navigator.clipboard.writeText(getCodeArrays(urlsFiltered.value));\n    void blink(event.currentTarget as HTMLElement);\n  }\n}\n\nlet lastPasteInfo: {\n  size: number, hash: number,\n  type: \"append\" | \"replace\",\n} | null = null;\nfunction onInput() {\n  lastPasteInfo = null;\n}\nfunction sameTextPasted(text: string, type: \"append\" | \"replace\"): boolean {\n  const last = lastPasteInfo;\n  const {hash, size} = {hash: hashString(text), size: text.length};\n  lastPasteInfo = {hash, size, type};\n\n  if (last) {\n    if (last.type === \"append\" && type === \"replace\") {\n      return inputText.value === text;\n    }\n    return size === last.size && hash === last.hash;\n  }\n  return false;\n}\n\nasync function onAppendClipboardText(event: MouseEvent) {\n  const {currentTarget} = event;\n  const text = await navigator.clipboard.readText();\n\n  if (sameTextPasted(text, \"append\")) {\n    void blink(currentTarget as HTMLElement, {klass: \"same-data-warning\", time: 300});\n    return;\n  }\n\n  console.log(\"[clipboard] readText:\", text);\n  if (inputText.value && !inputText.value.endsWith(\"\\n\")) {\n    inputText.value += \"\\n\";\n  }\n  inputText.value += text;\n  void blink(currentTarget as HTMLElement);\n}\nasync function onReplaceClipboardText(event: MouseEvent) {\n  const {currentTarget} = event;\n  const text = await navigator.clipboard.readText();\n\n  if (sameTextPasted(text, \"replace\")) {\n    void blink(currentTarget as HTMLElement, {klass: \"same-data-warning\", time: 300});\n    return;\n  }\n\n  console.log(\"[clipboard] readText:\", text);\n  inputText.value = text;\n  void blink(currentTarget as HTMLElement);\n}\n\nconst {useCleaner, useOriginer} = commonSettings;\n</script>\n\n<template>\n  <div class=\"row row-cols-lg-3 g-3 align-items-end\" data-component=\"InputControls\">\n    <div class=\"input col-12\">\n      <label for=\"urls-textarea\" class=\"fuck-off-lighthouse\"></label>\n      <textarea\n        id=\"urls-textarea\" spellcheck=\"false\"\n        v-model=\"inputText\"\n        ref=\"textareaEl\"\n        @input=\"onInput\"\n        :disabled=\"!editable\"\n      ></textarea>\n    </div>\n    <div class=\"input col-12\">\n      <span class=\"row\">\n        <span class=\"line m-1\">\n          <span class=\"btn-group\">\n            <span class=\"input-group-text me-1\">Clipboard</span>\n          </span>\n          <button\n            class=\"btn btn-outline-primary\"\n            @click=\"onReplaceClipboardText\"\n            :disabled=\"!editable\"\n          >Replace</button>\n          <button\n            class=\"btn btn-outline-primary\"\n            @click=\"onAppendClipboardText\"\n            :disabled=\"!(editable || appendable)\"\n          >Append</button>\n        </span>\n        <span class=\"line m-1\">\n          <span class=\"btn-group\">\n            <span class=\"input-group-text me-1 text-center\">Controls</span>\n          </span>\n          <button\n            class=\"btn btn-outline-danger\"\n            @click=\"onClearTextInput\"\n            :disabled=\"!editable\"\n          >Clear</button>\n          <button\n            class=\"btn btn-primary\" title=\"Copy URLs\"\n            @click=\"onCopyUrlsAsList\"\n            @contextmenu=\"onCopyUrlsAsColumn\"\n            @pointerdown=\"onCopyUrlsAsCodeArrays\"\n          >Copy</button>\n        </span>\n\n      </span>\n    </div>\n    <div class=\"input col-12\" style=\"align-self: end;\">\n      <span class=\"row\">\n        <span class=\"line m-1\">\n          <span class=\"btn-group\">\n            <span class=\"input-group-text me-1 text-center\">Popups</span>\n          </span>\n          <button\n            class=\"btn btn-outline-primary\"\n            title=\"Toggle Auto Clicker Popup\"\n            @click=\"showPopupAutoClicker = !showPopupAutoClicker\"\n            @contextmenu.prevent=\"resetACPopup\"\n          >Auto Clicker</button>\n          <button\n            class=\"btn btn-outline-primary\"\n            title=\"Toggle Url Cleaner Popup\"\n            @click=\"showPopupUrlCleaner = !showPopupUrlCleaner\"\n            @contextmenu.prevent=\"resetUCPopup\"\n            :class=\"{\n              'turned-off': !useCleaner && !useOriginer\n            }\"\n          >Url Magic</button>\n          <button\n            class=\"btn btn-outline-primary\"\n            title=\"Toggle Settings Popup\"\n            @click=\"showPopupSettings = !showPopupSettings\"\n            @contextmenu.prevent=\"resetSTPopup\"\n          >Settings</button>\n        </span>\n      </span>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.btn-group > .input-group-text {\n  width: 100px;\n  justify-content: center;\n}\n.btn-active,\n.btn-active:active {\n  background-color: #198754;\n  border-color: #198754;;\n  color: white;\n}\n.btn {\n  white-space: nowrap;\n}\n\n.line {\n  display: flex;\n  gap: 0.25rem;\n}\n\ntextarea {\n  width: 100%;\n  height: 82px;\n  resize: none;\n}\ntextarea:focus {\n  outline: none;\n}\n\n.fuck-off-lighthouse {\n  position: absolute;\n  top: -1000px;\n  left: -1000px;\n  height: 0;\n  width: 0;\n}\n.turned-off {\n  text-decoration: line-through;\n}\n.same-data-warning {\n  background-color: #adb5bd;\n  border-color: #6c757d;\n}\n</style>\n","import {computed} from \"vue\";\nimport {hashString} from \"@alttiri/util-js\";\nimport {clickedUrls, urlsFiltered} from \"./core\";\n\n\nexport const hash = computed<string>(() => {\n    const joinedUrls = [...new Set(urlsFiltered.value)].sort().join(\" \");\n    return Math.abs(hashString(joinedUrls)).toString(16).slice(-8).padStart(8, \"0\").toUpperCase();\n});\n\nexport type UrlCount = {\n    count: number,\n    uniqueCount: number,\n};\n\nexport const urlsCount = computed<UrlCount>(() => {\n    const urls = urlsFiltered.value;\n    const count = urls.length;\n    const uniqueCount = new Set(urls).size;\n    return {count, uniqueCount};\n});\n\nexport const clickedUrlsCount = computed<UrlCount>(() => {\n    let count = 0;\n    const set = new Set();\n    for (const url of urlsFiltered.value) {\n        if (clickedUrls.value.has(url)) {\n            count++;\n            set.add(url);\n        }\n    }\n    return {count, uniqueCount: set.size};\n});\n","<script setup lang=\"ts\">\nimport {watchEffect} from \"vue\";\nimport {sleep} from \"@alttiri/util-js\";\nimport {clickedUrlsCount, hash, urlsCount} from \"@/core/title-handler\";\nimport {lastClickedInfo}  from \"@/core/core\";\nimport {ordinalIndicator} from \"@/core/util\";\n\n\nwatchEffect(() => {\n    const {count, uniqueCount} = urlsCount.value;\n    if (!count) {\n        document.title = \"HrefLister\";\n        return;\n    }\n    document.title = `HrefLister — ${formatCounts(count, uniqueCount)} — #${hash.value}`;\n    if (clickedUrlsCount.value.count) {\n        const {count, uniqueCount} = clickedUrlsCount.value;\n        document.title = `${document.title} — [ ${formatCounts(count, uniqueCount)} ]`;\n    }\n});\n\nfunction formatCounts(count: number, uniqueCount: number): string {\n    let countText = count.toString();\n    const hasDuplicates = count !== uniqueCount;\n    if (hasDuplicates) {\n        countText = `${countText} (${uniqueCount})`;\n    }\n    return countText;\n}\n\nasync function scrollToListItem() {\n  if (!lastClickedInfo.value) {\n    return;\n  }\n  const elem = lastClickedInfo.value.elem;\n  elem.scrollIntoView({block: \"center\"});\n  elem.classList.add(\"highlighted-2\");\n  await sleep(800);\n  elem.classList.remove(\"highlighted-2\");\n}\n\nfunction onPointerenter() {\n  if (lastClickedInfo.value) {\n    lastClickedInfo.value.elem.classList.add(\"highlighted-1\");\n  }\n}\nfunction onPointerleave() {\n  if (lastClickedInfo.value) {\n    lastClickedInfo.value.elem.classList.remove(\"highlighted-1\");\n  }\n}\n\n</script>\n\n<template>\n  <div data-component=\"URLsInfoLine\">\n    <span>\n       <span title=\"URLs count\">{{urlsCount.count}}</span>\n       <span\n         title=\"URLs count (unique)\"\n         v-if=\"urlsCount.count !== urlsCount.uniqueCount\"\n       > ({{urlsCount.uniqueCount}})</span>\n    </span>\n    <span class=\"grey\"> — </span>\n    <span title=\"URLs hash\">\n      <span class=\"grey\">#</span>\n      <span class=\"urls-hash\">{{hash}}</span>\n    </span>\n    <span v-if=\"clickedUrlsCount.count\">\n      <span class=\"grey\"> — </span>\n      <span>\n        <span class=\"grey\">[</span>\n        <span class=\"clicked-count\">\n          <span title=\"Clicked URLs count\">{{clickedUrlsCount.count}}</span>\n          <span\n            title=\"Clicked URLs count (unique)\"\n            v-if=\"clickedUrlsCount.count !== clickedUrlsCount.uniqueCount\"\n          > ({{clickedUrlsCount.uniqueCount}})</span>\n        </span>\n        <span class=\"grey\">]</span>\n      </span>\n    </span>\n    <span\n      v-if=\"lastClickedInfo\"\n      @click=\"scrollToListItem\"\n      @pointerenter=\"onPointerenter\"\n      @pointerleave=\"onPointerleave\"\n    >\n      <span class=\"grey\"> — </span>\n      <span\n        class=\"grey\"\n        :title=\"'Last clicked URL index\\n' + lastClickedInfo.entry.url\">\n        {{ordinalIndicator(lastClickedInfo.index)}}\n      </span>\n    </span>\n  </div>\n</template>\n\n<style scoped>\n.grey, .urls-hash {\n    color: #777;\n}\n.clicked-count {\n  padding: 0 3px;\n}\n</style>\n","import {onUnmounted, Ref, triggerRef, watch} from \"vue\";\n\nconst MINUTE = 1000 * 60;\nconst TEN_MINUTES = MINUTE * 10;\nconst HOUR = MINUTE * 60;\nconst DAY = HOUR * 24;\n\nexport class RefTriggerTimer {\n    private readonly timeRef: Ref<number>;\n    private timerId?: number;\n    constructor(timeRef: Ref<number>) {\n        this.timeRef = timeRef;\n        watch(timeRef,(value) => { // Ignores `triggerRef` in comparison with `watchEffect`, watches only direct `.value` changing\n            if (value > 0) {\n                this.setTimer();\n            }\n        });\n        onUnmounted(() => {\n            this.clearTimer()\n        });\n    }\n    setTimer() {\n        this.clearTimer();\n        const diff = Date.now() - this.timeRef.value;\n        let time: number;\n        if (diff < TEN_MINUTES) {\n            time = MINUTE;\n        } else if (diff < HOUR) {\n            time = TEN_MINUTES;\n        } else if (diff < DAY) {\n            time = HOUR;\n        } else {\n            return;\n        }\n        this.timerId = window.setTimeout(() => {\n            triggerRef(this.timeRef);\n            this.setTimer();\n        }, time);\n    }\n    clearTimer() {\n        clearTimeout(this.timerId);\n    }\n    forceTrigger() {\n        triggerRef(this.timeRef);\n        this.setTimer();\n    }\n}\n\n\n// import {Ref, watchEffect} from \"vue\";\n//\n// const less_minute_refs: Ref<number>[] = [];\n// const less_hour_refs: Ref<number>[] = [];\n// const less_day_refs: Ref<number>[] = [];\n// const other_refs: Ref<number>[] = [];\n// export function addTimeRef(timeRef: Ref<number>) {\n//     const now = Date.now();\n//     watchEffect(() => {\n//         if (timeRef.value > 0 && !refs.includes(timeRef)) {\n//             refs.push(timeRef);\n//         }\n//     });\n// }\n","<script setup lang=\"ts\">\nimport {toRaw} from \"vue\";\nimport {UrlEntry}       from \"@/core/url-entry\";\nimport {tagsPopupEntry} from \"@/core/core\";\n\n\nconst props = defineProps<{ue: UrlEntry}>();\n\nfunction toggleTagsEditPopup() { // <.tags-wrapper> @click\n  if (toRaw(tagsPopupEntry.value) === toRaw(props.ue)) {\n    tagsPopupEntry.value = null;\n  } else {\n    tagsPopupEntry.value = props.ue;\n  }\n  console.log(toRaw(tagsPopupEntry.value));\n}\n</script>\n\n<template>\n  <div\n    class=\"tags-wrapper\"\n    @click=\"toggleTagsEditPopup\"\n    data-component=\"UrlListItemTags\"\n  >\n    <div class=\"tags\">\n      <div class=\"tag-master\" data-component=\"EntryTags\">\n        <div class=\"tag\" v-for=\"tag of ue.tags\" :data-tag=\"tag\">{{tag}}</div>\n      </div>\n    </div>\n    <div v-if=\"!ue.tags?.length\" class=\"tag add-tag\"><span class=\"plus\">+</span></div>\n  </div>\n</template>\n\n<style scoped lang=\"scss\">\n.tags-wrapper {\n  position: absolute;\n  right: 0;\n  display: flex;\n  .plus {\n    display: inline-flex;\n    justify-content: center;\n  }\n}\n</style>\n","<script setup lang=\"ts\">\nimport {computed, toRaw, ComputedRef, ref, onBeforeUnmount} from \"vue\";\nimport {formatDate, throttle} from \"@alttiri/util-js\";\nimport {\n  clickedUrls,\n  NEVER_VISITED_TIME,\n  messagePopupEntry,\n  lastClickedInfo,\n}                        from \"@/core/core\";\nimport {timeAgo}         from \"@/core/util\";\nimport {RefTriggerTimer} from \"@/core/relative-time-trigger\";\nimport {UrlEntry}        from \"@/core/url-entry\";\nimport UrlListItemTags   from \"./UrlListItemTags.vue\";\n\nconst props = defineProps<{ue: UrlEntry, index: number}>();\n\n\nconst visitedMs: ComputedRef<number> = computed(() => props.ue.visited || NEVER_VISITED_TIME);\n\nfunction removeUrlVisit() {\n  void props.ue.delVisited();\n}\n\nfunction visitUrl() {\n  const msNow = Date.now();\n  void props.ue.setVisited(msNow);\n}\n\nfunction removeVisitOnMMB(event: PointerEvent) { // <.info-dot> @pointerdown\n  const MIDDLE_BUTTON = 1;\n  if (event.button === MIDDLE_BUTTON) {\n    event.preventDefault();\n    removeUrlVisit();\n  }\n}\n\nconst commentCssClass = computed(() => {\n  if (props.ue.comment !== undefined) {\n    if (!props.ue.inputComment) {\n      return \"comment-from-store\";\n    }\n    if (props.ue.comment !== props.ue.inputComment) {\n      return \"comment-from-store-over\";\n    }\n  }\n  return \"\";\n});\n\nconst comment = computed(() => {\n  if (props.ue.comment !== undefined) {\n    return props.ue.comment.trim();\n  }\n  return props.ue.inputComment;\n});\n\n\nfunction toggleMessageEditPopup() { // <td> @dblclick\n  if (toRaw(messagePopupEntry.value) === toRaw(props.ue)) {\n    messagePopupEntry.value = null;\n  } else {\n    messagePopupEntry.value = props.ue;\n  }\n}\n\nconst htmlCompRef = ref<HTMLTableRowElement>();\nconst isClicked = computed(() => {\n  return clickedUrls.value.has(props.ue.url);\n});\nfunction markUrlAsClicked() { // <a.url> @click\n  clickedUrls.value.add(props.ue.url);\n  visitUrl();\n  lastClickedInfo.value = {\n    entry: props.ue,\n    index: props.index,\n    elem:  htmlCompRef.value as HTMLTableRowElement,\n  };\n}\nfunction markUrlAsClickedOnMMBClick(event: PointerEvent) { // <a.url> @pointerup\n  const MIDDLE_BUTTON = 1;\n  if (event.button !== MIDDLE_BUTTON) {\n    return;\n  }\n  const activeElement = (document.getRootNode() as Document).activeElement;\n  if (activeElement !== event.currentTarget) {\n    return;\n  }\n  markUrlAsClicked();\n}\nfunction unmarkUrlAsClicked() { // <.info-dot> @contextmenu.prevent\n  clickedUrls.value.delete(props.ue.url);\n}\nconst isLastClicked = computed(() => {\n  const lcInfo = lastClickedInfo.value;\n  if (!lcInfo) {\n    return false;\n  }\n  return props.index === lcInfo.index && props.ue.isEquals(lcInfo.entry);\n});\n\nonBeforeUnmount(() => {\n  if (isLastClicked.value) {\n    lastClickedInfo.value = null;\n  }\n});\n\n\n// Recalculates `timePassedClass`, `visitedText` based on `visitedMs`\nconst refTrigger = new RefTriggerTimer(visitedMs);\nfunction recalculateComponentState() {\n  refTrigger.forceTrigger();\n}\nconst triggerVisitedMs = throttle(recalculateComponentState, 2000); // <tr> @pointerenter\n\nconst titleText = computed(() => {\n  let text: string = `№ ${props.index + 1}.\\n`;\n  if (visitedMs.value < 0) {\n    text += \"never clicked\";\n  } else {\n    text += formatVisitedMs(visitedMs.value);\n  }\n  if (props.ue.initialVisited && props.ue.initialVisited !== visitedMs.value) {\n    return `${text}\\n${formatVisitedMs(props.ue.initialVisited)}`;\n  }\n  return text;\n});\nfunction formatVisitedMs(value: number) {\n  return timeAgo(value) + \" — \" + formatDate(value, \"YYYY.MM.DD hh:mm:ss\", false);\n}\n\nconst timePassedClass = computed(() => getTimePassedClass(visitedMs.value));\nfunction getTimePassedClass(ms: number) {\n  if (ms < 0) { return \"never-clicked\"; }\n  const now = Date.now();\n  const diff = Math.trunc((now - ms) / 1000);\n  if (diff < 60)       { return \"minute-1\";  }\n  if (diff < 60 *  2)  { return \"minute-2\";  }\n  if (diff < 60 *  5)  { return \"minute-5\";  }\n  if (diff < 60 * 10)  { return \"minute-10\"; }\n  if (diff < 60 * 30)  { return \"minute-30\"; }\n  if (diff < 60 * 45)  { return \"minute-45\"; }\n  if (diff < 60 * 60)  { return \"minute-60\"; }\n  if (diff < 3600 * 2)  { return \"hour-2\";  }\n  if (diff < 3600 * 4)  { return \"hour-4\";  }\n  if (diff < 3600 * 8)  { return \"hour-8\";  }\n  if (diff < 3600 * 14) { return \"hour-14\"; }\n  if (diff < 3600 * 24) { return \"day-1\";   }\n  if (diff < 86400 * 7) { return \"day-7\";   }\n  if (diff < 86400 * 30)  { return \"month-1\"; }\n  if (diff < 2592000 * 3) { return \"month-3\"; }\n  if (diff < 2592000 * 6) { return \"month-6\"; }\n  return \"long-ago\";\n}\n</script>\n\n<template>\n  <tr\n    @pointerenter=\"triggerVisitedMs\"\n    :data-index=\"index + 1\"\n    :class=\"{\n      'clicked': isClicked,\n      'last-clicked': isLastClicked,\n    }\"\n    class=\"list-item-row\"\n    data-component=\"UrlListItem\"\n    ref=\"htmlCompRef\"\n  >\n    <td class=\"col-9 nowrap-text-ceil url url-cell\">\n      <span class=\"nowrap-text-ceil-content\">\n        <span\n          class=\"info-dot\"\n          :class=\"{\n            ['has-comment']: ue.inputComment,\n            visited: visitedMs > 0,\n            [timePassedClass]: true,\n          }\"\n          :title=\"titleText\"\n          @contextmenu.prevent=\"unmarkUrlAsClicked\"\n          @pointerdown=\"removeVisitOnMMB\"\n        ></span>\n        <a\n          class=\"url link-primary\"\n          target=\"_blank\" rel=\"noreferrer noopener\"\n          :href=\"ue.url\"\n          :title=\"ue.inputComment || ue.urlOrigin\"\n          :data-url-origin=\"ue.urlOrigin\"\n          @click=\"markUrlAsClicked\"\n          @pointerup=\"markUrlAsClickedOnMMBClick\"\n        >{{ue.url}}</a>\n      </span>\n      <UrlListItemTags class=\"tags\" :ue=\"ue\"/>\n    </td>\n    <td\n      class=\"col-3 comment nowrap-text-ceil\"\n      @dblclick=\"toggleMessageEditPopup\"\n      :class=\"{\n        [commentCssClass]: commentCssClass\n      }\"\n    >\n      <span class=\"comment-content nowrap-text-ceil-content no-dbl-click-select\">{{comment || \"&nbsp;\"}}</span>\n    </td>\n  </tr>\n</template>\n\n<style scoped>\n.url-cell {\n  position: relative;\n}\ntd {\n  align-items: center;\n}\n\n.nowrap-text-ceil {\n  display: inline-flex;\n}\n.nowrap-text-ceil-content {\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n\na {\n  margin-left: 4px;\n  text-decoration: none;\n}\na:visited {\n  color: #6f42c1 !important;\n}\n.clicked {\n  background-color: #0000000a;\n}\n.clicked.last-clicked {\n  background-color: #0000000e;\n}\n.info-dot {\n  height: 16px;\n  width: 16px;\n  background-color: #0000000f;\n  margin-bottom: -3px;\n  display: inline-block;\n  border-radius: 8px;\n  border: 1px solid white;\n}\n/*.has-comment {*/\n/*  border: 1px solid gray;*/\n/*}*/\n.visited {\n  background-color: #dee2e6;\n}\n\n/*.never-clicked { background-color: #0000000f; }*/\n.minute-1  { background-color: #46c142; }\n.minute-2  { background-color: #6bc841; }\n.minute-5  { background-color: #88cf3f; }\n.minute-10 { background-color: #a3d53e; }\n.minute-30 { background-color: #bcdb3c; }\n.minute-45 { background-color: #d4e139; }\n.minute-60 { background-color: #ece737; }\n.hour-2  { background-color: #42c1b2; }\n.hour-4  { background-color: #4ba4b6; }\n.hour-8  { background-color: #4b88b9; }\n.hour-14 { background-color: #487abb; }\n.day-1   { background-color: #446cbc; }\n.day-7   { background-color: #5b5cb6; }\n.month-1 { background-color: #6a49b1; }\n.month-3 { background-color: #703fae; }\n.month-6 { background-color: #7633ab; }\n.long-ago { background-color: gray; }\n\ntr:hover, tr.hover {\n  box-shadow: 0 0 1px gray;\n}\n\n.highlighted-1 {\n  box-shadow: 0 0 1px gray;\n}\n.highlighted-2 {\n  box-shadow: 0 0 2px gray;\n}\n\n.no-dbl-click-select:active {\n  user-select: none;\n}\n\n.comment {\n  border-right: 2px solid transparent;\n}\n.comment-from-store {\n  border-right: 2px solid rgb(230, 244, 255);\n}\n.comment-from-store-over {\n  border-right: 2px solid #6f42c1;\n}\n\n.url {\n  border-left: 2px solid transparent;\n}\n.last-clicked > td.url {\n  border-left: 2px solid #b3bfff;\n}\n</style>\n","<script setup lang=\"ts\">\nimport {urlEntryListFiltered} from \"@/core/core\";\nimport UrlListItem from \"./UrlListItem.vue\";\n</script>\n\n<template>\n  <div data-component=\"UrlList\">\n    <table class=\"table table-borderless\">\n      <tbody>\n        <UrlListItem v-for=\"(ue, index) in urlEntryListFiltered\" :ue=\"ue\" :index=\"index\" :key=\"index + ue.url\"/>\n      </tbody>\n    </table>\n  </div>\n</template>\n\n<style scoped>\n\n</style>\n","<script setup lang=\"ts\">\nimport {computed, onMounted, Ref, ref} from \"vue\";\nimport {UrlEntry} from \"@/core/url-entry\";\nimport {messagePopupEntry} from \"@/core/core\";\n\n\nconst comment = computed(() => {\n  const urlEntry = messagePopupEntry.value as UrlEntry;\n  return urlEntry.comment === undefined ? urlEntry.inputComment : urlEntry.comment;\n});\n\nfunction closePopup(event: MouseEvent) {\n  if (event.currentTarget === event.target) {\n    messagePopupEntry.value = null;\n  }\n}\n\nfunction closePopupOnEnter(event: KeyboardEvent) {\n  if (event.key === \"Enter\" && !event.shiftKey) {\n    event.preventDefault();\n    messagePopupEntry.value = null;\n  }\n}\n\nconst textareaElem: Ref<HTMLInputElement | null> = ref(null);\nconst focusTextarea = () => {\n  textareaElem.value?.focus();\n};\nonMounted(focusTextarea);\n\nfunction onInputSaveComment(event: Event /* InputEvent */) {\n  const newValue = (event.currentTarget as HTMLInputElement).value;\n  void messagePopupEntry.value?.setComment(newValue);\n}\n\nfunction removeComment() {\n  messagePopupEntry.value?.delComment();\n}\n\n</script>\n\n<template>\n  <div\n    class=\"modal message-edit-popup\"\n    data-component=\"MessageEditPopup\"\n    v-if=\"messagePopupEntry\"\n    @pointerdown=\"closePopup\"\n  >\n    <div class=\"popup-content\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <h5 class=\"modal-title\">{{messagePopupEntry.url}}</h5>\n          <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\" @click=\"closePopup\"></button>\n        </div>\n        <div class=\"modal-body\">\n          <textarea\n            rows=\"5\"\n            :value=\"comment\"\n            @input=\"onInputSaveComment\"\n            ref=\"textareaElem\"\n            @keydown=\"closePopupOnEnter\"\n          ></textarea>\n        </div>\n        <div class=\"modal-footer\">\n          <button type=\"button\" class=\"btn btn-secondary\" @click=\"removeComment\">Reset</button>\n<!--            <button type=\"button\" class=\"btn btn-primary\">Select</button>-->\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style scoped lang=\"scss\">\n.modal {\n  min-width: 100vw;\n  min-height: 100vh;\n  position: fixed;\n  top: 0;\n  left: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: rgba(255, 255, 255, 0.5);\n}\n.popup-content {\n  min-width: 420px;\n  max-width: min(520px, 80%);\n}\n.modal-content {\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);\n}\n\ntextarea {\n  width: 100%;\n  height: 100%;\n  resize: none;\n}\ntextarea:focus {\n  outline: none;\n}\n\n.modal-title {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n</style>\n","<script setup lang=\"ts\">\nimport {ref, watchEffect} from \"vue\";\nimport {getPopupEnh, makeFocusable} from \"@alttiri/popup-enhance\";\nimport {resets} from \"@/core/core\";\n\nconst {makeMovableEx} = getPopupEnh(\"href-lister\");\n\nconst props = defineProps<{\n  id: string;\n  header: HTMLElement | null;\n}>();\n\nconst popupElem = ref<HTMLElement>();\n\nconst stopWE = watchEffect(() => {\n  if (!popupElem.value || !props.header) {\n    return;\n  }\n  const popup = popupElem.value;\n  const handle = props.header;\n  const {reset} = makeMovableEx(popup, props.id, {handle});\n  resets[props.id] = reset;\n  makeFocusable(popup, handle);\n  stopWE();\n});\n</script>\n\n<template>\n  <div data-component=\"FancyPopup\" class=\"popup-root\">\n    <div class=\"popup\" ref=\"popupElem\">\n      <slot></slot>\n    </div>\n  </div>\n</template>\n\n<style scoped lang=\"scss\">\n.popup :deep(.popup-header) {\n  background-color: #e9ecef;\n}\n</style>\n","<script setup lang=\"ts\">\nimport {ref, Ref, watch} from \"vue\";\nimport {debounce, sleep, isString} from \"@alttiri/util-js\";\nimport {isUCRuleStringArray, UCRuleString, UrlCleaner} from \"@alttiri/string-magic\";\nimport {UCSettings} from \"@/core/core\";\n\n\nconst props = defineProps<{\n  ucSettings: UCSettings,\n  btnInsertPlace: HTMLElement | null,\n}>();\nconst {ucRuleStrings, ucCompiledRules} = props.ucSettings;\n\n\nconst saveBtn: Ref<HTMLButtonElement | null> = ref(null);\nconst saved: Ref<boolean> = ref(true);\nconst valid: Ref<boolean> = ref(true);\n\nconst warnText: Ref<string> = ref(\"\");\nconst editorValue: Ref<string> = ref(\"\");\nlet lastSavedEditorValue = \"\";\n\nconst handleInputDebounced = debounce(handleInput, 220);\nwatch(ucRuleStrings, () => {\n  editorValue.value = formatRuleStringArray(ucRuleStrings.value);\n  lastSavedEditorValue = editorValue.value;\n  watch(editorValue, handleInputDebounced);\n}, {immediate: true});\n\n\nasync function save() {\n  const btn = saveBtn.value!;\n  btn.blur();\n  ucRuleStrings.value = JSON.parse(editorValue.value) as UCRuleString[];\n  ucCompiledRules.value = UrlCleaner.compileRuleStrings(ucRuleStrings.value);\n  lastSavedEditorValue = editorValue.value;\n  btn.classList.add(\"btn-outline-success\");\n\n  await sleep(800);\n  saved.value = true;\n  btn.classList.remove(\"btn-outline-success\");\n}\n\n\nfunction handleInput() {\n  const btn = saveBtn.value;\n  if (!btn) {\n    return;\n  }\n  if (editorValue.value === lastSavedEditorValue) {\n    saved.value = true;\n    valid.value = true;\n    warnText.value = \"\";\n    return;\n  }\n  valid.value = false;\n  saved.value = false;\n\n  // if (!editorValue.value) {\n  //   editorValue.value = formatRuleStringArray(tcRuleStrings.defaultValue);\n  //   // todo add restore btn\n  // }\n\n  try {\n    const array: any = JSON.parse(editorValue.value);\n    if (!Array.isArray(array)) {\n      warnText.value = \"Not an array\";\n      return;\n    }\n    if (array.length !== array.flat().length) {\n      warnText.value = \"Array is not flat\";\n      return;\n    }\n    if (!array.every(isString)) {\n      warnText.value = \"Array is not string one\";\n      return;\n    }\n    if (!isUCRuleStringArray(array)) {\n      warnText.value = \"Wrong data in the rule string array\";\n      return;\n    }\n    valid.value = true;\n    warnText.value = \"\";\n  } catch (e) {\n    warnText.value = \"Incorrect JSON\";\n  }\n}\n\nfunction formatRuleStringArray(array: UCRuleString[]): string {\n  let str = JSON.stringify(array, null, 4);\n  str = str.replaceAll(`    \"site`, `\"site`);\n  return str;\n}\n\n\n</script>\n\n<template>\n  <div data-component=\"UrlCleanerConfig\" class=\"url-cleaner\">\n    <textarea spellcheck=\"false\" id=\"editor\" class=\"form-control\"\n              v-model=\"editorValue\"\n    ></textarea>\n\n    <teleport :to=\"btnInsertPlace\">\n      <button ref=\"saveBtn\" id=\"save\" class=\"btn btn-outline-primary\"\n              @click=\"save\"\n              :class=\"{\n              disabled: saved || !valid,\n            }\"\n      >Save</button>\n    </teleport>\n    <span class=\"warning\">{{warnText}}</span>\n  </div>\n</template>\n\n<style scoped>\n.url-cleaner {\n  padding: 2px;\n}\n#editor {\n  width: 540px;\n  min-height: 400px;\n}\n.warning {\n  margin: 0 10px;\n  color: grey;\n}\n.form-control:focus {\n  box-shadow: none;\n}\n</style>\n","<script setup lang=\"ts\">\nimport {ref, watchEffect} from \"vue\";\nimport {commonSettings, urlCleanerSettings, urlOriginSettings} from \"@/core/core\";\nimport FancyPopup       from \"./FancyPopup.vue\";\nimport UrlCleanerConfig from \"./UrlCleanerConfig.vue\";\n\nconst headerElem = ref<HTMLElement | null>(null);\n\nconst activeTab = ref<\"cleaner\" | \"originer\">(\"cleaner\");\nconst btnInsertPlace = ref<HTMLElement | null>(null);\n\nconst ready = ref(false);\nwatchEffect(() => {\n  if (btnInsertPlace.value) {\n    ready.value = true;\n  }\n});\n\nconst {useCleaner, useOriginer} = commonSettings;\nfunction toggle(property: \"useCleaner\" | \"useOriginer\") {\n  commonSettings[property].value = !commonSettings[property].value;\n}\n</script>\n\n<template>\n  <FancyPopup data-slot-component=\"PopupUrlCleaner\"\n              id=\"url-cleaner\" :header=\"headerElem\"\n              v-show=\"ready\"\n  >\n    <div class=\"popup-header p-1\" ref=\"headerElem\">Url Magic Transforms</div>\n    <div class=\"popup-content\">\n      <div class=\"p-1 flex\">\n        <span class=\"btn-group\">\n          <span class=\"input-group-text me-1 text-center\">Configs</span>\n        </span>\n        <span class=\"btn-group\">\n          <button title=\"Rule String Array based config\"\n                  class=\"btn btn-outline-primary\"\n                  :class=\"{\n                    'active': activeTab === 'cleaner',\n                    'turned-off': !useCleaner,\n                  }\"\n                  @click=\"activeTab = 'cleaner'\"\n                  @contextmenu.prevent=\"() => toggle('useCleaner')\"\n          >Url Cleaner</button>\n          <button title=\"Rule String Array based config\"\n                  class=\"btn btn-outline-primary\"\n                  :class=\"{\n                    'active': activeTab === 'originer',\n                    'turned-off': !useOriginer,\n                  }\"\n                  @click=\"activeTab = 'originer'\"\n                  @contextmenu.prevent=\"() => toggle('useOriginer')\"\n          >Url Origin</button>\n        </span>\n        <span style=\"margin-left: auto;\" class=\"btn-insert-place\"\n              ref=\"btnInsertPlace\"\n        >\n          <!-- teleport place -->\n        </span>\n      </div>\n      <div v-if=\"ready\" class=\"ready-required\">\n        <div v-if=\"activeTab === 'cleaner'\">\n          <UrlCleanerConfig :ucSettings=\"urlCleanerSettings\" :btnInsertPlace/>\n        </div>\n        <div v-else>\n          <UrlCleanerConfig :ucSettings=\"urlOriginSettings\" :btnInsertPlace/>\n        </div>\n      </div>\n    </div>\n  </FancyPopup>\n</template>\n\n<style scoped>\n.flex {\n  display: flex;\n}\n.turned-off {\n  text-decoration: line-through;\n}\n</style>\n","<script setup lang=\"ts\">\nimport {ref, watch} from \"vue\";\nimport {sleep, sleepEx} from \"@alttiri/util-js\";\nimport {appendable, clickerSettings, editable, lastClickedInfo} from \"@/core/core\";\nimport FancyPopup from \"@/components/popup/FancyPopup.vue\";\n\n\nconst headerElem = ref<HTMLElement | null>(null);\n\nconst {delay, count} = clickerSettings;\n\n\ntype ClickingState = \"ready\" | \"started\" | \"paused\" | \"stopped\";\nconst state = ref<ClickingState>(\"ready\");\nconst lastClickedIndex = ref(0);\nlet controller = new AbortController();\n\nwatch(state,() => {\n  if (state.value === \"ready\") {\n    appendable.value = editable.value = true;\n  } else if (state.value === \"started\") {\n    appendable.value = editable.value = false;\n  } else if (state.value === \"paused\") {\n    appendable.value = true;\n  }\n});\n\nasync function startClicking() {\n  console.log(\"startClicking\");\n  const anchors = [...document.querySelectorAll(\"a.url\")] as HTMLAnchorElement[];\n  const to = count.value === 0 ? anchors.length : Math.min(anchors.length, count.value + lastClickedIndex.value);\n  const isPart = to < anchors.length;\n  state.value = \"started\";\n  while (lastClickedIndex.value < to) {\n    const a = anchors[lastClickedIndex.value];\n    const urlListItem = a.closest(`[data-component=\"UrlListItem\"]`)!;\n    urlListItem.classList.add(\"hover\");\n    await sleepEx(delay.value * 1000, controller.signal);\n    urlListItem.classList.remove(\"hover\");\n    if (state.value === \"started\") {\n      lastClickedIndex.value++;\n      a.dispatchEvent(new MouseEvent(\"click\"));\n      await sleep();\n    } else if (state.value === \"paused\") {\n      state.value = \"paused\";\n      return;\n    } else if (state.value === \"stopped\") {\n      lastClickedIndex.value = 0;\n      state.value = \"ready\";\n      return;\n    }\n  }\n  if (!isPart) {\n    lastClickedIndex.value = 0;\n    state.value = \"ready\";\n  } else {\n    state.value = \"paused\";\n  }\n}\n\nfunction interrupt(reason: \"paused\" | \"stopped\") {\n  if (lastClickedIndex.value === 0) {\n    reason = \"stopped\";\n  }\n  state.value = reason;\n  controller.abort(reason);\n  controller = new AbortController();\n}\nfunction stop() {\n  if (state.value === \"started\") {\n    interrupt(\"stopped\");\n    return;\n  }\n  lastClickedIndex.value = 0;\n  state.value = \"ready\";\n}\n\n\nlet startElem: Element | null;\nfunction onPointerenter() {\n  if (lastClickedInfo.value && state.value !== \"ready\") {\n    const nextElem = lastClickedInfo.value.elem.nextElementSibling;\n    if (nextElem) {\n      nextElem.classList.add(\"highlighted-1\");\n      startElem = nextElem;\n    }\n  } else {\n    const firstElem = document.querySelector(`[data-component=\"UrlListItem\"]`);\n    if (firstElem) {\n      firstElem.classList.add(\"highlighted-1\");\n      startElem = firstElem;\n    }\n  }\n}\nfunction onPointerleave() {\n  if (startElem) {\n    startElem.classList.remove(\"highlighted-1\");\n    startElem = null;\n  }\n}\n\n</script>\n\n<template>\n  <FancyPopup data-slot-component=\"PopupAutoClicker\"\n              id=\"auto-clicker\" :header=\"headerElem\"\n  >\n    <div class=\"popup-header p-1\" ref=\"headerElem\">Auto Clicker</div>\n    <div class=\"popup-content\">\n      <div class=\"btn-group p-1 container\">\n        <button\n          class=\"btn btn-primary col-4\"\n          :class=\"{\n            'btn-danger': delay === 0,\n          }\"\n          @click=\"startClicking\"\n          @pointerenter=\"onPointerenter\"\n          @pointerleave=\"onPointerleave\"\n          :disabled=\"!(state === 'ready' || state === 'paused')\"\n        >{{ state === \"ready\" || !lastClickedIndex ? \"Start\" : \"Next\" }}</button>\n        <button\n          class=\"btn btn-secondary col-4\"\n          :disabled=\"state !== 'started'\"\n          @click=\"interrupt('paused')\"\n        >Pause</button>\n        <button\n          class=\"btn btn-secondary col-4\"\n          :disabled=\"!lastClickedIndex\"\n          @click=\"stop\"\n        >{{ state === \"paused\" ? \"Reset\" : \"Stop\" }}</button>\n      </div>\n\n      <div class=\"div-wrap\">\n        <label class=\"p-1 pt-0 col-12\">\n          <span class=\"input-group\">\n            <span class=\"input-group-text col-3\">Delay</span>\n            <input\n              title=\"Click delay (seconds)\"\n              class=\"form-control\"\n              type=\"number\"\n              v-model=\"delay\"\n              min=\"0\"\n            >\n          </span>\n        </label>\n      </div>\n\n      <div class=\"div-wrap\">\n        <label class=\"p-1 pt-0 col-12\">\n          <span class=\"input-group\">\n            <span class=\"input-group-text col-3\">Count</span>\n            <input\n              title=\"Count\"\n              class=\"form-control\"\n              type=\"number\"\n              v-model=\"count\"\n              min=\"0\"\n            >\n          </span>\n        </label>\n      </div>\n\n<!--      <div class=\"div-wrap\">-->\n<!--        <label class=\"p-1 pt-0 col-12\">-->\n<!--            <input-->\n<!--              title=\"Only un-clicked\"-->\n<!--              class=\"form-check-input\"-->\n<!--              type=\"checkbox\"-->\n<!--            >-->\n<!--            <span class=\"p-1 pt-0\">Only un-clicked</span>-->\n<!--        </label>-->\n<!--      </div>-->\n\n    </div>\n  </FancyPopup>\n</template>\n\n<style scoped>\n\n</style>\n","<script setup lang=\"ts\">\nimport {UrlEntry} from \"@/core/url-entry\";\nimport {onMounted, Ref, ref} from \"vue\";\n\nconst props = defineProps<{\n    entry: UrlEntry,\n    modelValue: string\n}>();\n\nconst emit = defineEmits([\"update:modelValue\", \"tabPressed\"]);\n\nfunction removeTag(event: MouseEvent) {\n    const tagElem = event.target as HTMLDivElement;\n    const tag = tagElem.dataset.tag;\n    if (!tag) {\n        return;\n    }\n    props.entry?.delTag(tag);\n}\n\nconst tagInput: Ref<HTMLInputElement | null> = ref(null);\nconst canvas = document.createElement(\"canvas\");\nconst context = canvas.getContext(\"2d\")!;\nonMounted(() => {\n    if (tagInput.value) {\n        context.font = window.getComputedStyle(tagInput.value).font;\n    }\n});\nfunction resizeInput() {\n    if (!tagInput.value) {\n        return;\n    }\n    const textWidth = context.measureText(tagInput.value.value).width;\n    tagInput.value.style.width = textWidth + 6 + \"px\";\n}\nfunction focusInput() {\n    if (!tagInput.value) {\n        return;\n    }\n    tagInput.value.selectionStart = tagInput.value.selectionEnd;\n    tagInput.value.focus();\n}\nfunction selectInput() {\n    tagInput.value?.select();\n}\n\n\nfunction emitModelValueUpdate(event: InputEvent) {\n    emit(\"update:modelValue\", (event.target as HTMLInputElement).value);\n}\n\nfunction onTab(event: KeyboardEvent) {\n  console.log(event);\n  if (event.code === \"Tab\") {\n      event.preventDefault();\n      emit(\"tabPressed\");\n  }\n}\n\n</script>\n\n<template>\n  <div class=\"selected-tags\" data-component=\"SelectedTags\">\n    <div class=\"tag-master\" @click=\"removeTag\">\n      <div class=\"tag\" v-for=\"tag of entry.tags\" :data-tag=\"tag\">{{tag}}</div>\n    </div>\n    <span\n      class=\"label\"\n      @dblclick=\"selectInput\"\n      @click=\"focusInput\"\n    >\n      <span class=\"input-wrapper\">\n        <input\n          type=\"text\"\n          ref=\"tagInput\"\n          :value=\"modelValue\"\n          v-on=\"{\n             input: [resizeInput, emitModelValueUpdate]\n          }\"\n          @keydown=\"onTab\"\n        >\n      </span>\n    </span>\n  </div>\n</template>\n\n<style scoped>\n.selected-tags {\n    display: flex;\n    flex-wrap: wrap;\n}\n\ninput {\n    border: none;\n    outline: none;\n    width: 16px;\n    min-height: 31px;\n    padding-bottom: 2px;\n}\ninput:before {\n    position: absolute;\n    content: \"+\";\n}\n.input-wrapper {\n    min-width: 38px;\n    display: flex;\n    justify-content: center;\n}\n.label {\n    display: flex;\n    width: auto;\n    flex-grow: 2;\n    margin-left: 3px;\n    margin-bottom: 2px;\n\n    border-image: linear-gradient(to right, transparent 0, #4b88b9 6px, transparent) 1;\n    border-width: 1px;\n    border-style: solid;\n    border-top: 0;\n    border-left: 0;\n    border-right: 0;\n}\n\n</style>\n","<script setup lang=\"ts\">\nimport {computed} from \"vue\";\nimport {TagWrap} from \"@/core/tags\";\n\nconst props = defineProps<{\n    tagWrap: TagWrap,\n}>();\nconst {entry, tag} = props.tagWrap;\n\nconst selected = computed<boolean>(() => {\n  return Boolean(entry.tags?.includes(tag));\n});\n\nfunction toggleTag() {\n  if (selected.value)  {\n    void entry.delTag(tag);\n  } else {\n    void entry.addTag(tag);\n  }\n}\n</script>\n\n<template>\n  <div\n    class=\"tag\"\n    @click=\"toggleTag\"\n    :data-tag=\"tagWrap.tag\"\n    data-component=\"SuggestedTag\"\n    :class=\"{\n      selected\n    }\"\n  >\n    {{tagWrap.tag}}\n  </div>\n</template>\n\n<style scoped>\n\n\n.tag.selected {\n  opacity: 0.6;\n}\n</style>\n","import {ref} from \"vue\";\nimport {UrlEntry} from \"./url-entry\";\n\n\nfunction loadTags(): string[] {\n    return JSON.parse(localStorage.getItem(\"href_lister_all_tags\") || \"[]\");\n}\n\n\nexport const allTags = ref(loadTags());\nexport function addTag(tag: string) {\n    if (!allTags.value.includes(tag)) {\n        allTags.value.push(tag);\n    }\n}\nexport function removeTag(tag: string) {\n    const index = allTags.value.indexOf(tag);\n    if (index !== -1) {\n        allTags.value.splice(index, 1);\n    }\n}\n\n/** An `entry` and one its `tag` */\nexport type TagWrap = {\n    entry: UrlEntry,\n    tag:   string,\n};\n","<script setup lang=\"ts\">\nimport SelectedTags  from \"./SelectedTags.vue\";\nimport SuggestedTag  from \"./SuggestedTag.vue\";\nimport {computed, ComputedRef, Ref, ref} from \"vue\";\nimport {UrlEntry} from \"@/core/url-entry\";\nimport {tagsPopupEntry} from \"@/core/core\";\nimport {allTags, TagWrap} from \"@/core/tags\";\n\n\nconst inputTagText = ref(\"\");\n\n\nconst entry: Ref<UrlEntry> = tagsPopupEntry as Ref<UrlEntry>;\nconst tagWraps: ComputedRef<TagWrap[]> = computed(() => {\n  return allTags.value.map(tag => ({\n    tag,\n    entry: entry.value,\n  }));\n});\nconst tagWrapsFiltered: ComputedRef<TagWrap[]> = computed(() => {\n  const starts:   TagWrap[] = [];\n  const contains: TagWrap[] = [];\n  for (const tagProp of tagWraps.value) {\n    const index = tagProp.tag.indexOf(inputTagText.value);\n    if (index === -1) {\n      continue;\n    }\n    if (index === 0) {\n      starts.push(tagProp);\n    } else {\n      contains.push(tagProp);\n    }\n  }\n  return [starts, contains].flat();\n});\n\n\nfunction selectTag() { // @tabPressed\n                       // todo ...\n  inputTagText.value = \"\";\n}\n\nfunction closePopup(event: MouseEvent) {\n  if (event.currentTarget === event.target) {\n    tagsPopupEntry.value = null;\n  }\n}\n\n</script>\n\n<template>\n  <Teleport to=\"body\">\n    <div\n      class=\"modal tags-edit-popup\"\n      v-if=\"tagsPopupEntry\"\n      @pointerdown=\"closePopup\"\n      data-component=\"URLsInfoLine\"\n    >\n      <div class=\"popup-content\">\n        <div class=\"modal-content\">\n          <div class=\"modal-header\">\n            <h5 class=\"modal-title\">{{tagsPopupEntry.url}}</h5>\n          </div>\n          <div class=\"modal-body\">\n            <div class=\"tags selected-tags-group\">\n              <SelectedTags :entry=\"tagsPopupEntry\" v-model=\"inputTagText\" @tabPressed=\"selectTag\"/>\n            </div>\n            <div class=\"tags all-tags-group\">\n              <div class=\"tag-master\">\n                <SuggestedTag :tag-wrap=\"tagWrap\" v-for=\"tagWrap of tagWrapsFiltered\"/>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </Teleport>\n</template>\n\n<style scoped lang=\"scss\">\n.modal {\n  min-width: 100vw;\n  min-height: 100vh;\n  position: fixed;\n  top: 0;\n  left: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: rgba(255, 255, 255, 0.5);\n}\n.popup-content {\n  min-width: 420px;\n  max-width: min(520px, 80%);\n}\n.modal-content {\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);\n}\n\n.selected-tags-group {\n  min-height: 33px;\n  margin-bottom: 2px;\n}\n</style>\n","import {hashString} from \"@alttiri/util-js\";\n\nexport function entriesToLineJsonParts(entries: [string, any][]): string[] {\n    const jsonParts: string[] = [];\n    jsonParts.push(\"[\\n\");\n    for (const [k, v] of entries) {\n        jsonParts.push(`[\"${k}\",${JSON.stringify(v)}],\\n`);\n    }\n    if (jsonParts.length > 1) {\n        jsonParts[jsonParts.length - 1] = jsonParts[jsonParts.length - 1].replace(\",\\n\", \"\\n\");\n    }\n    jsonParts.push(\"]\");\n    return jsonParts;\n}\n\nexport function hashUrls(urls: string[]): string {\n    const joinedUrls = [...new Set(urls)].sort().join(\" \");\n    return Math.abs(hashString(joinedUrls)).toString(16).slice(-8).padStart(8, \"0\").toUpperCase();\n}\nexport function getListHostname(urls: string[]): string {\n    if (!urls.length) {\n        return \"\";\n    }\n    const firstHostname = getMainHostname(urls[0]);\n    if (urls.length === 1) {\n        return firstHostname;\n    }\n    for (const url of urls) {\n        if (firstHostname !== getMainHostname(url)) {\n            return \"\";\n        }\n    }\n    return firstHostname;\n}\nfunction getMainHostname(url: string): string {\n    const hostname = new URL(url).hostname;\n    return hostname.split(\".\").slice(-2).join(\".\");\n}\n","<script setup lang=\"ts\">\nimport {ref} from \"vue\";\nimport FancyPopup from \"@/components/popup/FancyPopup.vue\";\nimport {exportUrlEntryStore, importUrlEntryStore} from \"@/core/url-entry\";\nimport {downloadBlob} from \"@/core/util\";\nimport {entriesToLineJsonParts, getListHostname, hashUrls} from \"@/components/popup/export-util\";\n\nconst headerElem = ref<HTMLElement | null>(null);\n\nasync function exportStoreIDB(): Promise<void> {\n  const entries = await exportUrlEntryStore();\n  console.log(entries);\n  const urls = entries.map(([k, _v]) => k);\n  const hexes = hashUrls(urls);\n  // let hostname = getListHostname(urls);\n  // if (hostname) {\n  //   hostname = hostname + \"_\";\n  // }\n  const jsonParts = entriesToLineJsonParts(entries);\n  downloadBlob(new Blob(jsonParts), `href-lister-idb_(${entries.length}-${hexes}).json`);\n}\n\nconst importInputElem = ref<HTMLInputElement | null>(null);  // todo: useTemplateRef\nasync function onImportInputChange(): Promise<void> {\n  if (!importInputElem.value?.files) {\n    return;\n  }\n  const file = importInputElem.value.files[0];\n  console.log(file);\n  const json = JSON.parse(await file.text());\n  console.log(json);\n  const result = await importUrlEntryStore(json);\n  console.log(result);\n}\n\n</script>\n\n<template>\n  <FancyPopup data-slot-component=\"PopupSettings\"\n              id=\"settings\" :header=\"headerElem\"\n  >\n    <div class=\"popup-header p-1\" ref=\"headerElem\">Settings</div>\n    <div class=\"popup-content\">\n      <span class=\"row\">\n        <span class=\"line m-1\">\n          <span class=\"btn-group\">\n            <span class=\"input-group-text me-1 text-center\">Store Export</span>\n          </span>\n          <span class=\"btn-group\">\n            <button\n                class=\"btn btn-outline-primary\"\n                title=\"Export IndexedDB data\"\n                @click=\"exportStoreIDB\"\n            >Export IDB</button>\n            <button\n                class=\"btn btn-outline-primary\"\n                title=\"Export IndexedDB data\"\n                @click=\"importInputElem && importInputElem.click()\"\n            >Import IDB</button>\n          </span>\n        </span>\n      </span>\n      <input type=\"file\" accept=\".json\" id=\"importIdb\" hidden\n             ref=\"importInputElem\"\n             @change=\"onImportInputChange\"\n      />\n    </div>\n  </FancyPopup>\n</template>\n\n<style scoped>\n\n</style>","<script setup lang=\"ts\">\nimport Filters          from \"./Filters.vue\";\nimport PopupWrapper     from \"./PopupWrapper.vue\";\nimport InputControls    from \"./InputControls.vue\";\nimport URLsInfoLine     from \"./URLsInfoLine.vue\";\nimport UrlList          from \"./UrlList.vue\";\nimport MessageEditPopup from \"./MessageEditPopup.vue\";\nimport PopupUrlCleaner  from \"./popup/PopupUrlCleaner.vue\";\nimport PopupAutoClicker from \"./popup/PopupAutoClicker.vue\";\nimport UrlEntryTagsEditPopup from \"./edit-tags-popup/UrlEntryTagsEditPopup.vue\";\nimport {\n  messagePopupEntry,\n  showPopupAutoClicker, showPopupUrlCleaner, showPopupSettings,\n  tagsPopupEntry\n} from \"@/core/core\";\nimport PopupSettings from \"@/components/popup/PopupSettings.vue\";\n</script>\n\n<template>\n  <div data-component=\"Main\">\n    <hr>\n    <Filters/>\n    <hr>\n    <InputControls/>\n    <hr>\n    <URLsInfoLine/>\n    <hr>\n    <UrlList/>\n    <UrlEntryTagsEditPopup v-if=\"tagsPopupEntry\"/>\n    <PopupWrapper v-if=\"messagePopupEntry\">\n      <MessageEditPopup/>\n    </PopupWrapper>\n    <PopupWrapper v-if=\"showPopupAutoClicker\">\n      <PopupAutoClicker/>\n    </PopupWrapper>\n    <PopupWrapper v-if=\"showPopupUrlCleaner\">\n      <PopupUrlCleaner/>\n    </PopupWrapper>\n    <PopupWrapper v-if=\"showPopupSettings\">\n      <PopupSettings/>\n    </PopupWrapper>\n  </div>\n</template>\n\n<style scoped>\n\n</style>\n","<template>\n  <Main/>\n  <a class=\"readme\" title=\"Open Readme\" href=\"https://github.com/AlttiRi/href-lister\" target=\"_blank\"><i>i</i></a>\n</template>\n\n<script setup lang=\"ts\">\nimport Main from \"./components/Main.vue\";\n</script>\n\n<style scoped>\n.readme {\n  position: fixed;\n  bottom: 0;\n  right: 0;\n  padding: 2px 8px;\n  margin: 1px;\n  color: darkgray;\n  text-decoration: none;\n}\n</style>\n","import {createApp} from \"vue\";\nimport App from \"./App.vue\";\n\ncreateApp(App).mount(\"#app\");\n\n// Instead of\n// <link href=\"https://alttiri.github.io/3rd-party-libs/bootstrap.css\" rel=\"stylesheet\"\n//       integrity=\"sha256-IrRkRhwdO2IcP2+1tni2UxqwpwTQ4b0Hjd03G4dHPbA=\" crossorigin=\"anonymous\">\nimport \"./style/bootstrap.scss\";\n\nimport \"@alttiri/popup-enhance/css/popup.css\";\n\nimport \"./style/main.scss\";\nimport \"./style/tag.scss\";\n"],"names":["defaultFilterSettings","input_only","ref","settings","input_ignore","matcher","computed","onlyParts","o","ignoreParts","text","matchOnly","matchIgnore","url","urlFilter","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_cache","$event","_unref","_hoisted_4","_hoisted_5","_createBlock","_Teleport","parseUrlEntries","lines","line","urls","main","comments","firstWord","words","matchUrl","word","match","idb","createStore","del","get","set","entries","setMany","urlInfoStore","exportUrlEntryStore","importUrlEntryStore","k","v","isString","_UrlEntry","inputComment","urlOrigin","state","init","target","comment","visited","tag","index","toRaw","UrlEntry","NEVER_VISITED_TIME","inputText","messagePopupEntry","tagsPopupEntry","clickedUrls","showPopupAutoClicker","showPopupUrlCleaner","showPopupSettings","resets","resetACPopup","resetUCPopup","resetSTPopup","editable","appendable","lastClickedInfo","useLocalStorageObject","itemName","defaultValue","lsValue","object","reactive","watch","clickerSettings","toRefs","urlCleanerSettings","defaultUCRules","UrlCleaner","cleaner","urlOriginSettings","defaultUORules","origin","commonSettings","useCleaner","useOriginer","urlEntryList","watchEffect","urlEntries","urlInfos","urlEntry","urlEntryListFiltered","ue","urlsFiltered","getCodeArrays","items","size","jsonArray","a","len","num","count","parts","part","page","pageCount","timeAgo","ms","now","secs","m","ordinals","ordinalIndicator","downloadBlob","blob","name","anchor","blobUrl","blinkButtonMap","blink","elem","klass","time","sleep_time","sleep","textareaEl","onClearTextInput","event","onInput","onCopyUrlsAsList","onCopyUrlsAsColumn","onCopyUrlsAsCodeArrays","lastPasteInfo","sameTextPasted","type","last","hash","hashString","onAppendClipboardText","currentTarget","onReplaceClipboardText","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_withModifiers","args","joinedUrls","urlsCount","uniqueCount","clickedUrlsCount","formatCounts","countText","scrollToListItem","onPointerenter","onPointerleave","_toDisplayString","MINUTE","TEN_MINUTES","HOUR","DAY","RefTriggerTimer","timeRef","value","onUnmounted","diff","triggerRef","props","__props","toggleTagsEditPopup","_Fragment","_renderList","visitedMs","removeUrlVisit","visitUrl","msNow","removeVisitOnMMB","commentCssClass","toggleMessageEditPopup","htmlCompRef","isClicked","markUrlAsClicked","markUrlAsClickedOnMMBClick","unmarkUrlAsClicked","isLastClicked","lcInfo","onBeforeUnmount","refTrigger","recalculateComponentState","triggerVisitedMs","throttle","titleText","formatVisitedMs","formatDate","timePassedClass","getTimePassedClass","_normalizeClass","_createVNode","UrlListItemTags","UrlListItem","closePopup","closePopupOnEnter","textareaElem","onMounted","onInputSaveComment","newValue","removeComment","makeMovableEx","getPopupEnh","popupElem","stopWE","popup","handle","reset","makeFocusable","_renderSlot","_ctx","ucRuleStrings","ucCompiledRules","saveBtn","saved","valid","warnText","editorValue","lastSavedEditorValue","handleInputDebounced","debounce","handleInput","formatRuleStringArray","save","btn","array","isUCRuleStringArray","str","headerElem","activeTab","btnInsertPlace","ready","toggle","property","FancyPopup","UrlCleanerConfig","delay","lastClickedIndex","controller","startClicking","anchors","to","isPart","urlListItem","sleepEx","interrupt","reason","stop","startElem","nextElem","firstElem","emit","__emit","removeTag","tagInput","context","resizeInput","textWidth","focusInput","selectInput","emitModelValueUpdate","onTab","_mergeProps","_toHandlers","entry","selected","toggleTag","loadTags","allTags","inputTagText","tagWraps","tagWrapsFiltered","starts","contains","tagProp","selectTag","SelectedTags","tagWrap","SuggestedTag","entriesToLineJsonParts","jsonParts","hashUrls","exportStoreIDB","_v","hexes","importInputElem","onImportInputChange","file","json","result","Filters","InputControls","URLsInfoLine","UrlList","UrlEntryTagsEditPopup","PopupWrapper","MessageEditPopup","PopupAutoClicker","PopupUrlCleaner","PopupSettings","Main","createApp","App"],"mappings":"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"}