import{r as T,c as b,d as $,o as d,a as _,b as o,w as Z,v as tt,u as f,i as et,p as R,e as A,f as _t,g as ht,h as ot,s as gt,j as vt,t as U,k as at,l as Et,m as C,n as L,q as P,T as rt,x as Lt,y as Ut,z as ut,F as Y,A as z,B as k,C as Mt,D as X,E as Pt,G as yt,H as Dt,I as Vt,J as Ot}from"./vendor.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function e(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerPolicy&&(r.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?r.credentials="include":a.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(a){if(a.ep)return;a.ep=!0;const r=e(a);fetch(a.href,r)}})();const bt={input_only:"",input_only_disabled:!1,input_ignore:"",input_ignore_disabled:!1,reverse_input_only:!1,case_sensitive:!1},J=T(bt.input_only),W=T(bt.input_ignore),Rt=b(()=>{let s=J.value.trim().split(/\s+/g).filter(a=>a),t=W.value.trim().split(/\s+/g).filter(a=>a);s=s.map(a=>a.toLowerCase()),t=t.map(a=>a.toLowerCase());let e,n;return e=a=>s.some(r=>a.toLowerCase().includes(r)),n=a=>t.some(r=>a.toLowerCase().includes(r)),{matchOnly:e,matchIgnore:n,onlyParts:s,ignoreParts:t}}),At=b(()=>{const{matchOnly:s,matchIgnore:t,onlyParts:e}=Rt.value;return e.length?n=>s(n):n=>!t(n)}),Tt=s=>(R("data-v-40d2bd48"),s=s(),A(),s),qt={class:"row row-cols-lg-3 g-3 align-items-center","data-comp":"Filters"},Ht={class:"col-12"},Nt={class:"input-group"},Bt=Tt(()=>o("span",{class:"input-group-text"},"Only",-1)),jt={class:"col-12"},Yt={class:"input-group"},Ft=Tt(()=>o("span",{class:"input-group-text"},"Ignore",-1)),Xt=$({__name:"Filters",setup(s){return(t,e)=>(d(),_("div",qt,[o("div",Ht,[o("label",null,[o("span",Nt,[Bt,Z(o("input",{type:"text",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=n=>et(J)?J.value=n:null)},null,512),[[tt,f(J)]])])])]),o("div",jt,[o("label",null,[o("span",Yt,[Ft,Z(o("input",{type:"text",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=n=>et(W)?W.value=n:null)},null,512),[[tt,f(W)]])])])])]))}}),S=(s,t)=>{const e=s.__vccOpts||s;for(const[n,a]of t)e[n]=a;return e},Jt=S(Xt,[["__scopeId","data-v-40d2bd48"]]);function Wt(s){const t=s.split(`
`).map(n=>n.trim()).filter(n=>n),e=[];for(const n of t){const[a,...r]=n.split(/\s+(#|\/\/)/),[c,...l]=a.trim().split(/\s+/);if(c.startsWith("http")){const i=Q(c);if(i&&l.every(p=>!Q(p))){e.push({url:i,inputComment:[...l,...r].join(" ")});continue}i&&e.push({url:i})}else l.unshift(c);for(const i of l){const p=Q(i);p&&e.push({url:p})}}return e}function Q(s){const t=s.match(/(['"]?)(?<url>https?:\/\/[^\s"]+)(\1)/);if(console.log(t),t?.groups)return t.groups.url}const j={createStore:_t,del:ht,get:ot,set:gt,entries:vt},K=j.createStore("HrefListerUrlInfo","UrlInfo"),$t=class B{constructor(t,e,n){this.url=t,this.state=e,n&&(this.inputComment=n),e.visited&&(this.initialVisited=e.visited)}static async getInstance({url:t,inputComment:e}){let n=B.stateMap.get(t);return n?new B(t,n,e):(n=await ot(t,K),n===void 0&&(n={}),B.stateMap.set(t,n),new B(t,n,e))}get comment(){return this.state.comment}get visited(){return this.state.visited}get tags(){return this.state.tags}async setComment(t){this.state.comment=t,await this.update()}async delComment(){delete this.state.comment,await this.update()}async setVisited(t){this.state.visited=t,await this.update()}async delVisited(){delete this.state.visited,await this.update()}async addTag(t){this.state.tags||(this.state.tags=[]),!this.state.tags.includes(t)&&(this.state.tags.push(t),await this.update())}async delTag(t){if(!this.state.tags)return;const e=this.state.tags.indexOf(t);e!=-1&&(this.state.tags.splice(e,1),this.state.tags.length===0&&delete this.state.tags,await this.update())}update(){return Object.keys(this.state).length?j.set(this.url,U(this.state),K):j.del(this.url,K)}};$t.stateMap=new Map;let Ct=$t;const Kt=j.createStore("HrefListerComments","Comments"),Gt=j.createStore("HrefLister","Visits");Object.assign(globalThis,{idb:{createStore:_t,del:ht,get:ot,set:gt,entries:vt,commentsStore:Kt,visitsStore:Gt,urlInfoStore:K},UrlInfo:Ct});const zt=-1,I=T(""),w=T(null),E=T(null),dt=T(null),G=T(new Set),st=T(!1),It=T([]);at(async()=>{const s=Wt(I.value),t=[];for(const e of s)t.push(await Ct.getInstance(e));It.value=t});const wt=b(()=>It.value.filter(s=>At.value(s.url))),O=b(()=>wt.value.map(s=>s.url));location.href==="http://localhost:5173/"&&(I.value=`http://localhost:5173/ asdf
http://localhost:5173/#qqq
http://localhost:5173/#qqq
http://localhost:5173/#www
`);function Qt(s,t=50){let e=!1,n=!1,a,r;function c(){n?(setTimeout(c,t),s.apply(a,r)):e=!1,n=!1}return function(...l){e?(a=this,r=l,n=!0):(e=!0,setTimeout(c,t),s.apply(this,l))}}function Zt(s,t=100){const e=l=>`${l.length?'["'+l.join('", "')+'"]':"[]"}`;if(s.length<=t)return`/* ${s.length.toString().padStart(3)} */ ${e(s)},`;const n=l=>l.toString().length,a=Math.trunc(s.length/t),c=[`/* ${s.length.toString().padStart(1+n(s.length))+" ".repeat(3+n(a))} */`];for(let l=0;l<=a;l++){const i=s.slice(t*l,t+t*l),p=`(${l+1})`.padStart(2+n(a)),u=i.length.toString().padStart(1+n(s.length));c.push(`/* ${u} ${p} */ ${e(i)},`)}return c.join(`
`)}function te(s){const t=Date.now(),e=Math.trunc((t-s)/1e3);if(e<60)return`${e} second${e>1?"s":""} ago`;if(e<60*60){const n=Math.trunc(e/60);return`${n} minute${n>1?"s":""} ago`}if(e<60*60*24){const n=Math.trunc(e/60%60).toString().padStart(2,"0");return`${Math.trunc(e/60/60)}:${n} ago`}return Math.trunc(e/60/60/24)+" days ago"}function ee(s){let t=0;for(let e=0;e<s.length;e++)t=Math.imul(Math.imul(31,t)+s.charCodeAt(e),1);return t}const it=s=>(R("data-v-09a95f35"),s=s(),A(),s),se={class:"row row-cols-lg-3 g-3 align-items-end","data-comp":"InputControls"},ne={class:"input col-12"},oe=it(()=>o("label",{for:"urls-textarea",class:"fuck-off-lighthouse"},null,-1)),ae={class:"input col-12"},re={class:"row"},ie=it(()=>o("span",{class:"btn-group"},[o("span",{class:"input-group-text me-2"},"Clipboard")],-1)),le={class:".col m-1"},ce=it(()=>o("span",{class:"btn-group"},[o("span",{class:"input-group-text me-2 text-center"},"Controls")],-1)),ue=$({__name:"InputControls",setup(s){const t=new WeakMap;async function e(u){u.classList.add("btn-active");const h=Et(150);t.set(u,h),await h,t.get(u)===h&&u.classList.remove("btn-active")}const n=T(null);function a(u){I.value="",n.value?.focus(),e(u.currentTarget)}function r(u){navigator.clipboard.writeText(O.value.join(" ")),e(u.currentTarget)}function c(u){u.preventDefault(),navigator.clipboard.writeText(O.value.join(`
`)),e(u.currentTarget)}function l(u){u.button===1&&(u.preventDefault(),navigator.clipboard.writeText(Zt(O.value)),e(u.currentTarget))}async function i(u){const{currentTarget:h}=u,v=await navigator.clipboard.readText();console.log("[clipboard] readText:",v),I.value&&!I.value.endsWith(`
`)&&(I.value+=`
`),I.value+=v,e(h)}async function p(u){const{currentTarget:h}=u,v=await navigator.clipboard.readText();console.log("[clipboard] readText:",v),I.value=v,e(h)}return(u,h)=>(d(),_("div",se,[o("div",ne,[oe,Z(o("textarea",{id:"urls-textarea",spellcheck:"false","onUpdate:modelValue":h[0]||(h[0]=v=>et(I)?I.value=v:null),ref_key:"textareaEl",ref:n},null,512),[[tt,f(I)]])]),o("div",ae,[o("span",re,[o("span",{class:".col m-1"},[ie,o("button",{class:"btn btn-outline-primary me-1",onClick:p},"Replace"),o("button",{class:"btn btn-outline-primary me-1",onClick:i},"Append")]),o("span",le,[ce,o("button",{class:"btn btn-outline-primary me-1",onClick:a},"Clear"),o("button",{class:"btn btn-primary me-1",title:"Copy URLs",onClick:r,onContextmenu:c,onPointerdown:l},"Copy",32),o("button",{hidden:"",class:"btn btn-outline-primary me-1",title:"Popup",onClick:h[1]||(h[1]=v=>st.value=!f(st))},"Popup")])])])]))}}),de=S(ue,[["__scopeId","data-v-09a95f35"]]),pt=b(()=>{const s=[...new Set(O.value)].sort().join(" ");return Math.abs(ee(s)).toString(16).slice(-8).padStart(8,"0").toUpperCase()}),N=b(()=>{const s=O.value,t=s.length,e=new Set(s).size;return{count:t,uniqueCount:e}}),M=b(()=>{let s=0;const t=new Set;for(const e of O.value)G.value.has(e)&&(s++,t.add(e));return{count:s,uniqueCount:t.size}}),F=s=>(R("data-v-92a857ba"),s=s(),A(),s),pe={"data-comp":"URLsInfoLine"},fe={title:"URLs count"},me={key:0,title:"URLs count (unique)"},_e=F(()=>o("span",{class:"grey"}," — ",-1)),he={title:"URLs hash"},ge=F(()=>o("span",{class:"grey"},"#",-1)),ve={class:"urls-hash"},ye={key:0},be=F(()=>o("span",{class:"grey"}," — ",-1)),Te=F(()=>o("span",{class:"grey"},"[",-1)),$e={title:"Clicked URLs count"},Ce={key:0,title:"Clicked URLs count (unique)"},Ie=F(()=>o("span",{class:"grey"},"]",-1)),we=$({__name:"URLsInfoLine",setup(s){at(()=>{const{count:e,uniqueCount:n}=N.value;if(!e){document.title="HrefLister";return}if(document.title=`HrefLister — ${t(e,n)} — #${pt.value}`,M.value.count){const{count:a,uniqueCount:r}=M.value;document.title=`${document.title} — [ ${t(a,r)} ]`}});function t(e,n){let a=e.toString();return n!==length&&(a=`${a} (${n})`),a}return(e,n)=>(d(),_("div",pe,[o("span",null,[o("span",fe,C(f(N).count),1),f(N).count!==f(N).uniqueCount?(d(),_("span",me," ("+C(f(N).uniqueCount)+")",1)):L("",!0)]),_e,o("span",he,[ge,o("span",ve,C(f(pt)),1)]),f(M).count?(d(),_("span",ye,[be,o("span",null,[Te,o("span",$e,C(f(M).count),1),f(M).count!==f(M).uniqueCount?(d(),_("span",Ce," ("+C(f(M).uniqueCount)+")",1)):L("",!0),Ie])])):L("",!0)]))}}),Se=S(we,[["__scopeId","data-v-92a857ba"]]);function St(s,t){for(const[e,n]of Object.entries(t))s.style[e]=n}function xe(s,{handle:t,onStop:e,onMove:n,state:a}={}){const r=l=>{n?.(l),St(s,l)};a&&(r(a),e?.(a));const c=t||s;c.style.userSelect="none",c.style.touchAction="none",s.style.position="absolute",c.addEventListener("pointerdown",l=>{const i=l.clientY-parseInt(getComputedStyle(s).top),p=l.clientX-parseInt(getComputedStyle(s).left);let u;function h(g){!c.hasPointerCapture(g.pointerId)&&c.setPointerCapture(g.pointerId),u={top:g.clientY-i+"px",left:g.clientX-p+"px"},r(u)}function v(){removeEventListener("pointermove",h),u&&e?.(u)}addEventListener("pointermove",h,{passive:!0}),addEventListener("pointerup",v,{once:!0})},{passive:!0})}function ke(s,{minW:t=32,minH:e=32,size:n=16,onStop:a,onMove:r,state:c}={}){const l=p=>{r?.(p),St(s,p)};c&&(l(c),a?.(c));const i=document.createElement("div");i.style.cssText=`width: ${n}px; height: ${n}px; border-radius: ${n/2}px;bottom: ${-(n/2)}px; right: ${-(n/2)}px; position: absolute; background-color: transparent; cursor: se-resize; touch-action: none;`,s.append(i),i.addEventListener("pointerdown",p=>{i.setPointerCapture(p.pointerId);const u=p.clientX-s.offsetLeft-parseInt(getComputedStyle(s).width),h=p.clientY-s.offsetTop-parseInt(getComputedStyle(s).height);let v;function g(x){let D=x.clientX-s.offsetLeft-u,H=x.clientY-s.offsetTop-h;D<t&&(D=t),H<e&&(H=e),v={width:D+"px",height:H+"px"},l(v)}function q(){i.removeEventListener("pointermove",g),v&&a?.(v)}i.addEventListener("pointermove",g,{passive:!0}),i.addEventListener("lostpointercapture",q,{once:!0})},{passive:!0})}function ft({id:s,onMove:t,onStop:e,reset:n,restore:a}){if(n&&s&&localStorage.removeItem(s),!a||!s)return{onMove:t,onStop:e};const r=localStorage.getItem(s);let c;r&&(c=JSON.parse(r));function l(p){localStorage.setItem(s,JSON.stringify(p))}let i;return e?i=function(p){e(p),l(p)}:i=l,{onMove:t,onStop:i,state:c}}const Ee=s=>(R("data-v-40ba8c27"),s=s(),A(),s),Le=Ee(()=>o("div",null,"Popup",-1)),Ue=$({__name:"AutoClickPopup",setup(s){const t=T(),e=T();return at(()=>{!t.value||!e.value||(xe(t.value,{handle:e.value,...ft({restore:!0,id:"href-lister-popup-move-state"})}),ke(t.value,{minH:parseInt(getComputedStyle(t.value).height),minW:parseInt(getComputedStyle(t.value).width),...ft({restore:!0,id:"href-lister-popup-resize-state"})}))}),(n,a)=>f(st)?(d(),P(rt,{key:0,to:"body"},[o("div",{ref_key:"popupElem",ref:t,class:"popup","data-comp":"AutoClickPopup"},[o("div",{ref_key:"headerElem",ref:e,class:"header"},"Header",512),Le],512)])):L("",!0)}}),Me=S(Ue,[["__scopeId","data-v-40ba8c27"]]),lt=1e3*60,mt=lt*10,nt=lt*60,Pe=nt*24;class De{constructor(t){this.timeRef=t,Lt(t,e=>{e>0&&this.setTimer()}),Ut(()=>{this.clearTimer()})}setTimer(){this.clearTimer();const t=Date.now()-this.timeRef.value;let e;if(t<mt)e=lt;else if(t<nt)e=mt;else if(t<Pe)e=nt;else return;this.timerId=setTimeout(()=>{ut(this.timeRef),this.setTimer()},e)}clearTimer(){clearTimeout(this.timerId)}forceTrigger(){ut(this.timeRef),this.setTimer()}}const Ve={class:"tag-master","data-comp":"EntryTags"},Oe=["data-tag"],Re=$({__name:"EntryTags",props:{entry:{}},setup(s){return(t,e)=>(d(),_("div",Ve,[(d(!0),_(Y,null,z(t.entry.tags,n=>(d(),_("div",{class:"tag","data-tag":n},C(n),9,Oe))),256))]))}}),Ae=s=>(R("data-v-b46d30db"),s=s(),A(),s),qe={class:"tags"},He={key:0,class:"tag add-tag"},Ne=Ae(()=>o("span",{class:"plus"},"+",-1)),Be=[Ne],je=$({__name:"UrlListItemTags",props:{ue:{}},setup(s){const t=s;function e(){U(E.value)===U(t.ue)?E.value=null:E.value=t.ue,console.log(E.value)}return(n,a)=>(d(),_("div",{class:"tags-wrapper",onClick:e,"data-comp":"UrlListItemTags"},[o("div",qe,[k(Re,{entry:n.ue},null,8,["entry"])]),n.ue.tags?.length?L("",!0):(d(),_("div",He,Be))]))}}),Ye=S(je,[["__scopeId","data-v-b46d30db"]]),Fe=["data-index"],Xe={class:"col-9 nowrap-text-ceil url url-cell"},Je={class:"nowrap-text-ceil-content"},We=["title"],Ke=["href","title"],Ge={class:"comment-content nowrap-text-ceil-content no-dbl-click-select"},ze=$({__name:"UrlListItem",props:{ue:{},index:{}},setup(s){const t=s,e=b(()=>t.ue.visited||zt);function n(){t.ue.delVisited()}function a(){const m=Date.now();t.ue.setVisited(m)}function r(m){m.button===1&&(m.preventDefault(),n())}const c=b(()=>{if(t.ue.comment!==void 0){if(!t.ue.inputComment)return"comment-from-store";if(t.ue.comment!==t.ue.inputComment)return"comment-from-store-over"}return""}),l=b(()=>t.ue.comment!==void 0?t.ue.comment.trim():t.ue.inputComment);function i(){U(w.value)===U(t.ue)?w.value=null:w.value=t.ue}const p=b(()=>G.value.has(t.ue.url));function u(){G.value.add(t.ue.url),a(),dt.value=U(t.ue)}function h(m){m.button!==1||document.getRootNode().activeElement!==m.currentTarget||u()}function v(){G.value.delete(t.ue.url)}const g=b(()=>U(dt.value)===U(t.ue)),q=new De(e);function x(){q.forceTrigger()}const D=Qt(x,2e3),H=b(()=>{let m="";return e.value<0?m="never clicked":m=ct(e.value),t.ue.initialVisited&&t.ue.initialVisited!==e.value?`${m}
${ct(t.ue.initialVisited)}`:m});function ct(m){return te(m)+" — "+Mt(m,"YYYY.MM.DD HH:mm:SS",!1)}const xt=b(()=>kt(e.value));function kt(m){if(m<0)return"never-clicked";const V=Date.now(),y=Math.trunc((V-m)/1e3);return y<60?"minute-1":y<60*2?"minute-2":y<60*5?"minute-5":y<60*10?"minute-10":y<60*30?"minute-30":y<60*45?"minute-45":y<60*60?"minute-60":y<3600*2?"hour-2":y<3600*4?"hour-4":y<3600*8?"hour-8":y<3600*14?"hour-14":y<3600*24?"day-1":y<86400*7?"day-7":y<86400*30?"month-1":y<2592e3*3?"month-3":y<2592e3*6?"month-6":"long-ago"}return(m,V)=>(d(),_("tr",{onPointerenter:V[0]||(V[0]=(...y)=>f(D)&&f(D)(...y)),class:X([{clicked:p.value,"last-clicked":g.value},"list-item-row"]),"data-comp":"UrlListItem","data-index":m.index+1},[o("td",Xe,[o("span",Je,[o("span",{class:X(["info-dot",{"has-comment":m.ue.inputComment,visited:e.value>0,[xt.value]:!0}]),title:H.value,onContextmenu:Pt(v,["prevent"]),onPointerdown:r},null,42,We),o("a",{class:"url link-primary",target:"_blank",rel:"noreferrer noopener",href:m.ue.url,title:m.ue.inputComment,onClick:u,onPointerup:h},C(m.ue.url),41,Ke)]),k(Ye,{class:"tags",ue:m.ue},null,8,["ue"])]),o("td",{class:X(["col-3 comment nowrap-text-ceil",{[c.value]:c.value}]),onDblclick:i},[o("span",Ge,C(l.value||" "),1)],34)],42,Fe))}}),Qe=S(ze,[["__scopeId","data-v-5c0cfb9f"]]),Ze={"data-comp":"UrlList"},ts={class:"table table-borderless"},es=$({__name:"UrlList",setup(s){return(t,e)=>(d(),_("div",Ze,[o("table",ts,[o("tbody",null,[(d(!0),_(Y,null,z(f(wt),(n,a)=>(d(),P(Qe,{ue:n,index:a},null,8,["ue","index"]))),256))])])]))}}),ss={class:"popup-content"},ns={class:"modal-content"},os={class:"modal-header"},as={class:"modal-title"},rs={class:"modal-body"},is=["value"],ls=$({__name:"MessageEditPopup",setup(s){const t=b(()=>{const i=w.value;return i.comment===void 0?i.inputComment:i.comment});function e(i){i.currentTarget===i.target&&(w.value=null)}function n(i){i.key==="Enter"&&!i.shiftKey&&(i.preventDefault(),w.value=null)}const a=T(null);yt(()=>{a.value?.focus()});function c(i){const p=i.currentTarget.value;w.value?.setComment(p)}function l(){w.value?.delComment()}return(i,p)=>(d(),P(rt,{to:"body"},[f(w)?(d(),_("div",{key:0,class:"modal message-edit-popup","data-comp":"MessageEditPopup",onPointerdown:e},[o("div",ss,[o("div",ns,[o("div",os,[o("h5",as,C(f(w).url),1),o("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:e})]),o("div",rs,[o("textarea",{rows:"5",value:t.value,onInput:c,ref_key:"textareaElem",ref:a,onKeydown:n},null,40,is)]),o("div",{class:"modal-footer"},[o("button",{type:"button",class:"btn btn-secondary",onClick:l},"Reset")])])])],32)):L("",!0)]))}}),cs=S(ls,[["__scopeId","data-v-7eeb70bf"]]),us=["data-tag"],ds=$({__name:"InputTagsItem",props:{selected:{type:Boolean},tag:{}},setup(s){return(t,e)=>(d(),_("div",{class:X(["tag",{selected:t.selected}]),"data-tag":t.tag,"data-comp":"InputTagsItem"},C(t.tag),11,us))}}),ps=S(ds,[["__scopeId","data-v-4e0f90f4"]]),fs=$({__name:"InputTags",props:{tagPropsHelper:{}},setup(s){const t=s;function e(n){const r=n.target.dataset.tag;r&&t.tagPropsHelper.toggleTag(r)}return(n,a)=>(d(),_("div",{class:"tag-master",onClick:e,"data-comp":"InputTags"},[(d(!0),_(Y,null,z(n.tagPropsHelper.tags.value,r=>(d(),P(ps,{tag:r.tag,selected:n.tagPropsHelper.isSelected(r)},null,8,["tag","selected"]))),256))]))}}),ms={class:"selected-tags","data-comp":"SelectedTags"},_s=["data-tag"],hs={class:"input-wrapper"},gs=["value"],vs=$({__name:"SelectedTags",props:{entry:{},modelValue:{}},emits:["update:modelValue","tabPressed"],setup(s,{emit:t}){const e=s,n=t;function a(g){const x=g.target.dataset.tag;x&&e.entry?.delTag(x)}const r=T(null),l=document.createElement("canvas").getContext("2d");yt(()=>{r.value&&(l.font=window.getComputedStyle(r.value).font)});function i(){if(!r.value)return;const g=l.measureText(r.value.value).width;r.value.style.width=g+6+"px"}function p(){r.value&&(r.value.selectionStart=r.value.selectionEnd,r.value.focus())}function u(){r.value?.select()}function h(g){n("update:modelValue",g.target.value)}function v(g){console.log(g),g.code==="Tab"&&(g.preventDefault(),n("tabPressed"))}return(g,q)=>(d(),_("div",ms,[o("div",{class:"tag-master",onClick:a},[(d(!0),_(Y,null,z(g.entry.tags,x=>(d(),_("div",{class:"tag","data-tag":x},C(x),9,_s))),256))]),o("span",{class:"label",onDblclick:u,onClick:p},[o("span",hs,[o("input",Dt({type:"text",ref_key:"tagInput",ref:r,value:g.modelValue},Vt({input:[i,h]},!0),{onKeydown:v}),null,16,gs)])],32)]))}}),ys=S(vs,[["__scopeId","data-v-d8799467"]]);function bs(){return JSON.parse(localStorage.getItem("href_lister_all_tags")||"[]")}const Ts=T(bs());class $s{constructor(t,e){this.entry=t,this.allTags=b(()=>Ts.value.map(n=>({tag:n,selected:!1}))),this.tags=b(()=>{const n=[],a=[];for(const r of this.allTags.value){const c=r.tag.indexOf(e.value);c!==-1&&(c===0?n.push(r):a.push(r))}return[n,a].flat()})}isSelected(t){const e=typeof t=="string"?t:t.tag;return this.entry.value.tags?.includes(e)}toggleTag(t){return this.isSelected(t)?this.entry.value.delTag(t):this.entry.value.addTag(t)}}const Cs={class:"popup-content"},Is={class:"modal-content"},ws={class:"modal-header"},Ss={class:"modal-title"},xs={class:"modal-body"},ks={class:"tags selected-tags-group"},Es={class:"tags all-tags-group"},Ls=$({__name:"UrlListItemTagsEditPopup",setup(s){const t=T("");function e(r){r.currentTarget===r.target&&(E.value=null)}const n=new $s(E,t);function a(){t.value=""}return(r,c)=>(d(),P(rt,{to:"body"},[f(E)?(d(),_("div",{key:0,class:"modal tags-edit-popup",onPointerdown:e,"data-comp":"URLsInfoLine"},[o("div",Cs,[o("div",Is,[o("div",ws,[o("h5",Ss,C(f(E).url),1)]),o("div",xs,[o("div",ks,[k(ys,{entry:f(E),modelValue:t.value,"onUpdate:modelValue":c[0]||(c[0]=l=>t.value=l),onTabPressed:a},null,8,["entry","modelValue"])]),o("div",Es,[k(fs,{tagPropsHelper:f(n)},null,8,["tagPropsHelper"])])])])])],32)):L("",!0)]))}}),Us=S(Ls,[["__scopeId","data-v-56f3faa2"]]),Ms={"data-comp":"Main"},Ps=o("hr",null,null,-1),Ds=o("hr",null,null,-1),Vs=o("hr",null,null,-1),Os=o("hr",null,null,-1),Rs=$({__name:"Main",setup(s){return(t,e)=>(d(),_("div",Ms,[Ps,k(Jt),Ds,k(de),Vs,k(Se),k(Me),Os,k(es),f(w)?(d(),P(cs,{key:0})):L("",!0),f(E)?(d(),P(Us,{key:1})):L("",!0)]))}}),As=s=>(R("data-v-80fad6c5"),s=s(),A(),s),qs=As(()=>o("a",{class:"readme",title:"Open Readme",href:"https://github.com/AlttiRi/href-lister#keeplister",target:"_blank"},[o("i",null,"i")],-1)),Hs=$({__name:"App",setup(s){return(t,e)=>(d(),_(Y,null,[k(Rs),qs],64))}}),Ns=S(Hs,[["__scopeId","data-v-80fad6c5"]]);Ot(Ns).mount("#app");
//# sourceMappingURL=index.js.map
