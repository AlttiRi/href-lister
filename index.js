import{r as w,c as $,a as tt,d as C,o as y,b as x,e as s,w as et,v as nt,u as _,i as ot,p as N,f as B,s as st,g as F,h as R,j,k as rt,l as H,m as W,n as at,q as M,t as ct,x as E,y as O,z as lt,F as U,A as it,B as A,C as Y,T as ut,D as L,E as dt}from"./vendor.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function o(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(r){if(r.ep)return;r.ep=!0;const a=o(r);fetch(r.href,a)}})();const g=w("");location.href==="http://localhost:5173/"&&(g.value=`http://localhost:5173/ asdf
http://localhost:5173/#qwe #qwerty1qwerty2qwerty3qwerty4qwerty5qwerty6
http://localhost:5173/#qqq`);const v=w(null),K=$(()=>{const t=pt(g.value),e=tt(t);return console.log(t,e),e}),D=$(()=>K.value.map(t=>t.url));function pt(t){const e=t.split(`
`).map(n=>n.trim()).filter(n=>n),o=[];for(const n of e){const[r,...a]=n.split(/\s+(#|\/\/)/),[l,...i]=r.trim().split(/\s+/);if(l.startsWith("http")){const m=I(l);if(m&&i.every(h=>!I(h))){o.push({url:m,comment:[...i,...a].join(" ")});continue}m&&o.push({url:m})}else i.unshift(l);for(const m of i){const h=I(m);h&&o.push({url:h})}}return o}function I(t){const e=t.match(/(['"]?)(?<url>https?:\/\/[^\s"]+)(\1)/);if(console.log(e),e!=null&&e.groups)return e.groups.url}function ft(t,e=100){const o=i=>`${i.length?'["'+i.join('", "')+'"]':"[]"}`;if(t.length<=e)return`/* ${t.length.toString().padStart(3)} */ ${o(t)},`;const n=i=>i.toString().length,r=Math.trunc(t.length/e),l=[`/* ${t.length.toString().padStart(1+n(t.length))+" ".repeat(3+n(r))} */`];for(let i=0;i<=r;i++){const m=t.slice(e*i,e+e*i),h=`(${i+1})`.padStart(2+n(r)),c=m.length.toString().padStart(1+n(t.length));l.push(`/* ${c} ${h} */ ${o(m)},`)}return l.join(`
`)}const P=t=>(N("data-v-f9a7f093"),t=t(),B(),t),mt={class:"row row-cols-lg-3 g-3 align-items-end"},_t={class:"input col-12"},vt=P(()=>s("label",{for:"urls-textarea",class:"fuck-off-lighthouse"},null,-1)),ht={class:"input col-12"},gt={class:"row"},yt=P(()=>s("span",{class:"btn-group"},[s("span",{class:"input-group-text me-2"},"Clipboard")],-1)),bt={class:".col m-1"},xt=P(()=>s("span",{class:"btn-group"},[s("span",{class:"input-group-text me-2 text-center"},"Controls")],-1)),wt=C({__name:"InputControls",setup(t){const e=new WeakMap;async function o(c){c.classList.add("btn-active");const u=st(150);e.set(c,u),await u,e.get(c)===u&&c.classList.remove("btn-active")}const n=w(null);function r(c){var u;g.value="",(u=n.value)==null||u.focus(),o(c.currentTarget)}function a(c){navigator.clipboard.writeText(D.value.join(" ")),o(c.currentTarget)}function l(c){c.preventDefault(),navigator.clipboard.writeText(D.value.join(`
`)),o(c.currentTarget)}function i(c){c.button===1&&(c.preventDefault(),navigator.clipboard.writeText(ft(D.value)),o(c.currentTarget))}async function m(c){const{currentTarget:u}=c,b=await navigator.clipboard.readText();console.log("[clipboard] readText:",b),g.value&&!g.value.endsWith(`
`)&&(g.value+=`
`),g.value+=b,o(u)}async function h(c){const{currentTarget:u}=c,b=await navigator.clipboard.readText();console.log("[clipboard] readText:",b),g.value=b,o(u)}return(c,u)=>(y(),x("div",mt,[s("div",_t,[vt,et(s("textarea",{id:"urls-textarea",spellcheck:"false","onUpdate:modelValue":u[0]||(u[0]=b=>ot(g)?g.value=b:null),ref_key:"textareaEl",ref:n},null,512),[[nt,_(g)]])]),s("div",ht,[s("span",gt,[s("span",{class:".col m-1"},[yt,s("button",{class:"btn btn-outline-primary me-1",onClick:h},"Replace"),s("button",{class:"btn btn-outline-primary me-1",onClick:m},"Append")]),s("span",bt,[xt,s("button",{class:"btn btn-outline-primary me-1",onClick:r},"Clear"),s("button",{class:"btn btn-primary me-1",title:"Copy URLs",onClick:a,onContextmenu:l,onPointerdown:i},"Copy",32)])])])]))}});const k=(t,e)=>{const o=t.__vccOpts||t;for(const[n,r]of e)o[n]=r;return o},Ct=k(wt,[["__scopeId","data-v-f9a7f093"]]);function $t(t,e=50){let o=!1,n=!1,r,a;return function(...l){o?(r=this,a=l,n=!0):(o=!0,setTimeout(function(){n&&t.apply(r,a),o=n=!1},e),t.apply(this,l))}}const G=F("HrefListerComments","Comments");function Tt(t,e){j(t,e,G)}function St(t){return R(t,G)}const q=F("HrefLister","Visits");function kt(t,e){return j(t,e,q)}function Mt(t){return R(t,q)}function Dt(t){return rt(t,q)}const It={class:"col-9 nowrap-text-ceil"},Et={class:"nowrap-text-ceil-content"},Lt=["title","onContextmenu"],Ut=["href","title"],At={class:"comment-content nowrap-text-ceil-content no-dbl-click-select"},Pt=C({__name:"UrlListItem",props:{ue:null},setup(t){const e=t,o=e.ue.url,n=w(-1);H(r),W(r);async function r(){const p=Mt(o),d=St(o);n.value=await p||-2;const f=await d;f&&(e.ue.commentFromStore=f)}function a(){Dt(o),n.value=-2}function l(){const p=Date.now();kt(o,p),n.value=p}const i=$(m);function m(){return n.value<0?"never clicked":b(n.value)}const h=$(()=>{if(e.ue.commentFromStore&&!e.ue.comment)return"comment-from-store";if(e.ue.commentFromStore&&e.ue.commentFromStore!==e.ue.comment)return"comment-from-store-over"});function c(){O(v.value)===O(e.ue)?v.value=null:v.value=e.ue}const u=$(()=>{if(n.value<0)return"never-clicked";const p=Date.now(),d=Math.trunc((p-n.value)/1e3);return d<60?"minute-1":d<60*2?"minute-2":d<60*5?"minute-5":d<60*10?"minute-10":d<60*30?"minute-30":d<60*60?"hour-1":d<60*60*2?"hour-2":d<60*60*24?"day-1":"day-n"});function b(p){return J(p)+" — "+at(p,"YYYY.MM.DD HH:mm:SS",!1)}function J(p){const d=Date.now(),f=Math.trunc((d-p)/1e3);if(f<60)return`${f} second${f>1?"s":""} ago`;if(f<60*60){const S=Math.trunc(f/60);return`${S} minute${S>1?"s":""} ago`}if(f<60*60*24){const S=Math.trunc(f/60%60).toString().padStart(2,"0");return`${Math.trunc(f/60/60)}:${S} ago`}return Math.trunc(f/60/60/24)+" days ago"}const T=w(!1);function Q(){T.value=!0,l()}function X(){T.value=!T.value}const V=$t(Z,1e3);function Z(){lt(n)}function z(p){p.button===1&&(p.preventDefault(),a())}return(p,d)=>(y(),x("tr",{class:M({clicked:T.value}),onPointerenter:d[0]||(d[0]=(...f)=>_(V)&&_(V)(...f))},[s("td",It,[s("span",Et,[s("span",{class:M(["info-dot",{["has-comment"]:t.ue.comment,visited:n.value>0,[_(u)]:!0}]),title:_(i),onContextmenu:ct(X,["prevent"]),onPointerdown:z},null,42,Lt),s("a",{class:"url link-primary",target:"_blank",rel:"noreferrer noopener",href:t.ue.url,title:t.ue.comment,onClick:Q},E(t.ue.url),9,Ut)])]),s("td",{class:M(["col-3 comment nowrap-text-ceil",{[_(h)]:_(h)}]),onDblclick:c},[s("span",At,E(t.ue.commentFromStore||t.ue.comment||" "),1)],34)],34))}});const qt=k(Pt,[["__scopeId","data-v-aed49efe"]]),Vt={class:"table table-borderless"},Ot=C({__name:"UrlList",setup(t){return(e,o)=>(y(),x("div",null,[s("table",Vt,[s("tbody",null,[(y(!0),x(U,null,it(_(K),n=>(y(),A(qt,{key:n.url,ue:n},null,8,["ue"]))),128))])])]))}}),Nt={key:0,class:"message-edit-popup modal"},Bt={class:"popup-content"},Ft={class:"modal-content"},Rt={class:"modal-header"},jt={class:"modal-title"},Ht={class:"modal-body"},Wt=["value"],Yt=C({__name:"MessageEditPopup",setup(t){function e(){v.value=null}const o=w(null),n=()=>{var a;return(a=o.value)==null?void 0:a.focus()};H(n),W(n);function r(a){if(!v.value)return;const l=a.currentTarget.value;v.value.commentFromStore=l,Tt(v.value.url,l)}return(a,l)=>(y(),A(ut,{to:"body"},[_(v)?(y(),x("div",Nt,[s("div",Bt,[s("div",Ft,[s("div",Rt,[s("h5",jt,E(_(v).url),1),s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:e})]),s("div",Ht,[s("textarea",{rows:"5",value:_(v).commentFromStore||_(v).comment,onInput:r,ref_key:"textareaElem",ref:o},null,40,Wt)])])])])):Y("",!0)]))}});const Kt=k(Yt,[["__scopeId","data-v-fc47bbe6"]]),Gt=s("hr",null,null,-1),Jt=s("hr",null,null,-1),Qt=C({__name:"Main",setup(t){return(e,o)=>(y(),x(U,null,[Gt,L(Ct),Jt,L(Ot),_(v)?(y(),A(Kt,{key:0})):Y("",!0)],64))}}),Xt=t=>(N("data-v-80fad6c5"),t=t(),B(),t),Zt=Xt(()=>s("a",{class:"readme",title:"Open Readme",href:"https://github.com/AlttiRi/href-lister#keeplister",target:"_blank"},[s("i",null,"i")],-1)),zt=C({__name:"App",setup(t){return(e,o)=>(y(),x(U,null,[L(Qt),Zt],64))}});const te=k(zt,[["__scopeId","data-v-80fad6c5"]]);dt(te).mount("#app");
//# sourceMappingURL=index.js.map
