import{ref as y,computed as C,defineComponent as x,openBlock as m,createElementBlock as v,createBaseVNode as s,withDirectives as H,vModelText as J,unref as d,isRef as K,pushScopeId as z,popScopeId as G,createBlock as A,renderSlot as At,Teleport as wt,createStore as kt,del as It,get as xt,set as Lt,entries as St,toRaw as X,watchEffect as mt,sleep as lt,withModifiers as Et,toDisplayString as w,createCommentVNode as M,toRefs as qt,watch as dt,normalizeClass as Y,reactive as Nt,onUnmounted as Bt,triggerRef as vt,Fragment as Q,renderList as it,onBeforeUnmount as jt,formatDate as Wt,createVNode as O,onMounted as Ut,mergeProps as Ft,toHandlers as Yt,withCtx as gt,createApp as Ht}from"./vendor.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function e(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerPolicy&&(i.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?i.credentials="include":l.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(l){if(l.ep)return;l.ep=!0;const i=e(l);fetch(l.href,i)}})();const Mt={input_only:"",input_only_disabled:!1,input_ignore:"",input_ignore_disabled:!1,reverse_input_only:!1,case_sensitive:!1},tt=y(Mt.input_only),et=y(Mt.input_ignore),Jt=C(()=>{let n=tt.value.trim().split(/\s+/g).filter(l=>l),t=et.value.trim().split(/\s+/g).filter(l=>l);n=n.map(l=>l.toLowerCase()),t=t.map(l=>l.toLowerCase());let e,o;return e=l=>n.some(i=>l.toLowerCase().includes(i)),o=l=>t.some(i=>l.toLowerCase().includes(i)),{matchOnly:e,matchIgnore:o,onlyParts:n,ignoreParts:t}}),Kt=C(()=>{const{matchOnly:n,matchIgnore:t,onlyParts:e}=Jt.value;return e.length?o=>n(o):o=>!t(o)}),Pt=n=>(z("data-v-40d2bd48"),n=n(),G(),n),Xt={class:"row row-cols-lg-3 g-3 align-items-center","data-comp":"Filters"},zt={class:"col-12"},Gt={class:"input-group"},Qt=Pt(()=>s("span",{class:"input-group-text"},"Only",-1)),Zt={class:"col-12"},te={class:"input-group"},ee=Pt(()=>s("span",{class:"input-group-text"},"Ignore",-1)),ne=x({__name:"Filters",setup(n){return(t,e)=>(m(),v("div",Xt,[s("div",zt,[s("label",null,[s("span",Gt,[Qt,H(s("input",{type:"text",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=o=>K(tt)?tt.value=o:null)},null,512),[[J,d(tt)]])])])]),s("div",Zt,[s("label",null,[s("span",te,[ee,H(s("input",{type:"text",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=o=>K(et)?et.value=o:null)},null,512),[[J,d(et)]])])])])]))}}),E=(n,t)=>{const e=n.__vccOpts||n;for(const[o,l]of t)e[o]=l;return e},se=E(ne,[["__scopeId","data-v-40d2bd48"]]),oe={};function ae(n,t){return m(),A(wt,{to:"body"},[At(n.$slots,"default")])}const yt=E(oe,[["render",ae]]),nt={createStore:kt,del:It,get:xt,set:Lt,entries:St},st=nt.createStore("HrefListerUrlInfo","UrlInfo"),Ot=class F{constructor(t,e,o){this.url=t,this.state=e,o&&(this.inputComment=o),e.visited&&(this.initialVisited=e.visited)}static async getInstance({url:t,inputComment:e}){let o=F.stateMap.get(t);return o?new F(t,o,e):(o=await nt.get(t,st),o===void 0&&(o={}),F.stateMap.set(t,o),new F(t,o,e))}isEquals(t){return t?this.state===t.state&&this.inputComment===t.inputComment:!1}get comment(){return this.state.comment}get visited(){return this.state.visited}get tags(){return this.state.tags}async setComment(t){this.state.comment=t,await this.update()}async delComment(){delete this.state.comment,await this.update()}async setVisited(t){this.state.visited=t,await this.update()}async delVisited(){delete this.state.visited,await this.update()}async addTag(t){this.state.tags||(this.state.tags=[]),!this.state.tags.includes(t)&&(this.state.tags.push(t),await this.update())}async delTag(t){if(!this.state.tags)return;const e=this.state.tags.indexOf(t);e!=-1&&(this.state.tags.splice(e,1),this.state.tags.length===0&&delete this.state.tags,await this.update())}update(){return Object.keys(this.state).length?nt.set(this.url,X(this.state),st):nt.del(this.url,st)}};Ot.stateMap=new Map;let Rt=Ot;Object.assign(globalThis,{idb:{createStore:kt,del:It,get:xt,set:Lt,entries:St,urlInfoStore:st},UrlEntry:Rt});function le(n){const t=n.split(`
`).map(o=>o.trim()).filter(o=>o),e=[];for(const o of t){const[l,...i]=o.split(/\s+(#|\/\/)/),[c,...a]=l.trim().split(/\s+/);if(c.startsWith("http")){const r=ut(c);if(r&&a.every(f=>!ut(f))){e.push({url:r,inputComment:[...a,...i].join(" ")});continue}r&&e.push({url:r})}else a.unshift(c);for(const r of a){const f=ut(r);f&&e.push({url:f})}}return e}function ut(n){const t=n.match(/(['"]?)(?<url>https?:\/\/[^\s"]+)(\1)/);if(console.log(t),t?.groups)return t.groups.url}const ie=-1,L=y(""),S=y(null),U=y(null),ot=y(new Set),N=y(!1),pt=y(!1);async function bt(){pt.value=!0,N.value&&(N.value=!1,await lt(),N.value=!0)}const q=y(!0),at=y(!0),k=y(null),Dt=y([]);mt(async()=>{const n=le(L.value),t=[];for(const e of n)t.push(await Rt.getInstance(e));Dt.value=t});const Vt=C(()=>Dt.value.filter(n=>Kt.value(n.url))),B=C(()=>Vt.value.map(n=>n.url));location.href==="http://localhost:5173/"&&(L.value=`http://localhost:5173/ asdf
http://localhost:5173/#qqq
http://localhost:5173/#qqq
http://localhost:5173/#www
`);function re(n,t=50){let e=!1,o=!1,l,i;function c(){o?(setTimeout(c,t),n.apply(l,i)):e=!1,o=!1}return function(...a){e?(l=this,i=a,o=!0):(e=!0,setTimeout(c,t),n.apply(this,a))}}function ce(n,t=100){const e=a=>`${a.length?'["'+a.join('", "')+'"]':"[]"}`;if(n.length<=t)return`/* ${n.length.toString().padStart(3)} */ ${e(n)},`;const o=a=>a.toString().length,l=Math.trunc(n.length/t),c=[`/* ${n.length.toString().padStart(1+o(n.length))+" ".repeat(3+o(l))} */`];for(let a=0;a<=l;a++){const r=n.slice(t*a,t+t*a),f=`(${a+1})`.padStart(2+o(l)),p=r.length.toString().padStart(1+o(n.length));c.push(`/* ${p} ${f} */ ${e(r)},`)}return c.join(`
`)}function ue(n){const t=Date.now(),e=Math.trunc((t-n)/1e3);if(e<60)return`${e} second${e>1?"s":""} ago`;if(e<60*60){const o=Math.trunc(e/60);return`${o} minute${o>1?"s":""} ago`}if(e<60*60*24){const o=Math.trunc(e/60%60).toString().padStart(2,"0");return`${Math.trunc(e/60/60)}:${o} ago`}return Math.trunc(e/60/60/24)+" days ago"}function de(n){let t=0;for(let e=0;e<n.length;e++)t=Math.imul(Math.imul(31,t)+n.charCodeAt(e),1);return t}const $t=["1st","2nd","3rd"];function pe(n){return n=Number(n),$t[n]?$t[n]:n+1+"th"}function fe(n,t){if(t.aborted)return Promise.resolve(t.reason);let e;return new Promise(o=>{e=setTimeout(o,n),t.onabort=()=>{clearTimeout(e),o(t.reason)}})}function me(n,t,e){const o=document.createElement("a");o.setAttribute("download",t||"");const l=URL.createObjectURL(n);o.href=l+(e?"#"+e:""),o.click(),setTimeout(()=>URL.revokeObjectURL(l),15e3)}Object.assign(globalThis,{downloadBlob:me});const _t=n=>(z("data-v-f705f8cf"),n=n(),G(),n),_e={class:"row row-cols-lg-3 g-3 align-items-end","data-comp":"InputControls"},he={class:"input col-12"},ve=_t(()=>s("label",{for:"urls-textarea",class:"fuck-off-lighthouse"},null,-1)),ge=["disabled"],ye={class:"input col-12"},be={class:"row"},$e={class:".col m-1"},Ce=_t(()=>s("span",{class:"btn-group"},[s("span",{class:"input-group-text me-2"},"Clipboard")],-1)),Te=["disabled"],we=["disabled"],ke={class:".col m-1"},Ie=_t(()=>s("span",{class:"btn-group"},[s("span",{class:"input-group-text me-2 text-center"},"Controls")],-1)),xe=["disabled"],Le=x({__name:"InputControls",setup(n){const t=new WeakMap;async function e(p){p.classList.add("btn-active");const _=lt(150);t.set(p,_),await _,t.get(p)===_&&p.classList.remove("btn-active")}const o=y(null);function l(p){L.value="",o.value?.focus(),e(p.currentTarget)}function i(p){navigator.clipboard.writeText(B.value.join(" ")),e(p.currentTarget)}function c(p){p.preventDefault(),navigator.clipboard.writeText(B.value.join(`
`)),e(p.currentTarget)}function a(p){p.button===1&&(p.preventDefault(),navigator.clipboard.writeText(ce(B.value)),e(p.currentTarget))}async function r(p){const{currentTarget:_}=p,$=await navigator.clipboard.readText();console.log("[clipboard] readText:",$),L.value&&!L.value.endsWith(`
`)&&(L.value+=`
`),L.value+=$,e(_)}async function f(p){const{currentTarget:_}=p,$=await navigator.clipboard.readText();console.log("[clipboard] readText:",$),L.value=$,e(_)}return(p,_)=>(m(),v("div",_e,[s("div",he,[ve,H(s("textarea",{id:"urls-textarea",spellcheck:"false","onUpdate:modelValue":_[0]||(_[0]=$=>K(L)?L.value=$:null),ref_key:"textareaEl",ref:o,disabled:!d(q)},null,8,ge),[[J,d(L)]])]),s("div",ye,[s("span",be,[s("span",$e,[Ce,s("button",{class:"btn btn-outline-primary me-1",onClick:f,disabled:!d(q)},"Replace",8,Te),s("button",{class:"btn btn-outline-primary me-1",onClick:r,disabled:!(d(q)||d(at))},"Append",8,we)]),s("span",ke,[Ie,s("button",{class:"btn btn-outline-danger me-1",onClick:l,disabled:!d(q)},"Clear",8,xe),s("button",{class:"btn btn-primary me-1",title:"Copy URLs",onClick:i,onContextmenu:c,onPointerdown:a},"Copy",32),s("button",{class:"btn btn-outline-primary me-1",title:"Toggle Auto Clicker Popup",onClick:_[1]||(_[1]=$=>N.value=!d(N)),onContextmenu:_[2]||(_[2]=Et((...$)=>d(bt)&&d(bt)(...$),["prevent"]))},"Auto Clicker",32)])])])]))}}),Se=E(Le,[["__scopeId","data-v-f705f8cf"]]),Ct=C(()=>{const n=[...new Set(B.value)].sort().join(" ");return Math.abs(de(n)).toString(16).slice(-8).padStart(8,"0").toUpperCase()}),W=C(()=>{const n=B.value,t=n.length,e=new Set(n).size;return{count:t,uniqueCount:e}}),V=C(()=>{let n=0;const t=new Set;for(const e of B.value)ot.value.has(e)&&(n++,t.add(e));return{count:n,uniqueCount:t.size}}),j=n=>(z("data-v-456c13e6"),n=n(),G(),n),Ee={"data-comp":"URLsInfoLine"},Ue={title:"URLs count"},Me={key:0,title:"URLs count (unique)"},Pe=j(()=>s("span",{class:"grey"}," — ",-1)),Oe={title:"URLs hash"},Re=j(()=>s("span",{class:"grey"},"#",-1)),De={class:"urls-hash"},Ve={key:0},Ae=j(()=>s("span",{class:"grey"}," — ",-1)),qe=j(()=>s("span",{class:"grey"},"[",-1)),Ne={class:"clicked-count"},Be={title:"Clicked URLs count"},je={key:0,title:"Clicked URLs count (unique)"},We=j(()=>s("span",{class:"grey"},"]",-1)),Fe=j(()=>s("span",{class:"grey"}," — ",-1)),Ye=["title"],He=x({__name:"URLsInfoLine",setup(n){mt(()=>{const{count:i,uniqueCount:c}=W.value;if(!i){document.title="HrefLister";return}if(document.title=`HrefLister — ${t(i,c)} — #${Ct.value}`,V.value.count){const{count:a,uniqueCount:r}=V.value;document.title=`${document.title} — [ ${t(a,r)} ]`}});function t(i,c){let a=i.toString();return i!==c&&(a=`${a} (${c})`),a}async function e(){if(!k.value)return;const i=k.value.elem;i.scrollIntoView({block:"center"}),i.classList.add("highlighted-2"),await lt(800),i.classList.remove("highlighted-2")}function o(){k.value&&k.value.elem.classList.add("highlighted-1")}function l(){k.value&&k.value.elem.classList.remove("highlighted-1")}return(i,c)=>(m(),v("div",Ee,[s("span",null,[s("span",Ue,w(d(W).count),1),d(W).count!==d(W).uniqueCount?(m(),v("span",Me," ("+w(d(W).uniqueCount)+")",1)):M("",!0)]),Pe,s("span",Oe,[Re,s("span",De,w(d(Ct)),1)]),d(V).count?(m(),v("span",Ve,[Ae,s("span",null,[qe,s("span",Ne,[s("span",Be,w(d(V).count),1),d(V).count!==d(V).uniqueCount?(m(),v("span",je," ("+w(d(V).uniqueCount)+")",1)):M("",!0)]),We])])):M("",!0),d(k)?(m(),v("span",{key:1,onClick:e,onPointerenter:o,onPointerleave:l},[Fe,s("span",{class:"grey",title:`Last clicked URL index
`+d(k).entry.url},w(d(pe)(d(k).index)),9,Ye)],32)):M("",!0)]))}}),Je=E(He,[["__scopeId","data-v-456c13e6"]]);function Ke(n,t){for(const[e,o]of Object.entries(t))n.style[e]=o}function Xe(n,{handle:t,onStop:e,onMove:o,state:l}={}){const i=a=>{o?.(a),Ke(n,a)};l&&(i(l),e?.(l));const c=t||n;c.style.userSelect="none",c.style.touchAction="none",n.style.position="absolute",c.addEventListener("pointerdown",a=>{a.preventDefault();const r=a.clientY-parseInt(getComputedStyle(n).top),f=a.clientX-parseInt(getComputedStyle(n).left);let p;function _(g){!c.hasPointerCapture(g.pointerId)&&c.setPointerCapture(g.pointerId),p={top:g.clientY-r+"px",left:g.clientX-f+"px"},i(p)}function $(){removeEventListener("pointermove",_),p&&e?.(p)}addEventListener("pointermove",_,{passive:!0}),addEventListener("pointerup",$,{once:!0})})}function ze({id:n,onMove:t,onStop:e,reset:o,restore:l}){if(o&&n&&localStorage.removeItem(n),!l||!n)return{onMove:t,onStop:e};const i=localStorage.getItem(n);let c;i&&(c=JSON.parse(i));function a(f){localStorage.setItem(n,JSON.stringify(f))}let r;return e?r=function(f){e(f),a(f)}:r=a,{onMove:t,onStop:r,state:c}}const Ge={class:"popup-root","data-comp":"AutoClickPopup"},Qe={class:"popup-content"},Ze={class:"btn-group p-1 container",role:"group","aria-label":"Basic example"},tn=["disabled"],en=["disabled"],nn=["disabled"],sn={class:"div-wrap"},on={class:"p-1 pt-0 col-12"},an={class:"input-group"},ln=s("span",{class:"input-group-text col-3"},"Delay",-1),rn={class:"div-wrap"},cn={class:"p-1 pt-0 col-12"},un={class:"input-group"},dn=s("span",{class:"input-group-text col-3"},"Count",-1),pn=x({__name:"AutoClickPopup",setup(n){const t=y(),e=y(),o=mt(()=>{if(!t.value||!e.value)return;const h=t.value,T=e.value;Xe(t.value,{handle:T,...ze({restore:!0,id:"href-lister-popup-move-state",reset:pt.value})}),T.addEventListener("pointerdown",u=>{h.focus()},{passive:!0}),pt.value=!1,o()});function l(h,T){const u=localStorage.getItem(h),I=Nt(u?JSON.parse(u):T);return dt(I,()=>{localStorage.setItem(h,JSON.stringify(I))}),I}const{delay:i,count:c}=qt(l("href-lister-clicker-settings",{delay:1,count:0})),a=y("ready"),r=y(0);let f=new AbortController;dt(a,()=>{a.value==="ready"?at.value=q.value=!0:a.value==="started"?at.value=q.value=!1:a.value==="paused"&&(at.value=!0)});async function p(){console.log("startClicking");const h=[...document.querySelectorAll("a.url")],T=c.value===0?h.length:Math.min(h.length,c.value+r.value),u=T<h.length;for(a.value="started";r.value<T;){const I=h[r.value],b=I.closest('[data-comp="UrlListItem"]');if(b.classList.add("hover"),await fe(i.value*1e3,f.signal),b.classList.remove("hover"),a.value==="started")r.value++,I.dispatchEvent(new MouseEvent("click")),await lt();else if(a.value==="paused"){a.value="paused";return}else if(a.value==="stopped"){r.value=0,a.value="ready";return}}u?a.value="paused":(r.value=0,a.value="ready")}function _(h){r.value===0&&(h="stopped"),a.value=h,f.abort(h),f=new AbortController}function $(){if(a.value==="started"){_("stopped");return}r.value=0,a.value="ready"}const g=y(!1);let D=0;function P(){g.value=!0,setTimeout(()=>clearTimeout(D))}function rt(){D=setTimeout(()=>{g.value=!1},250)}let R;function ct(){if(k.value&&a.value!=="ready"){const h=k.value.elem.nextElementSibling;h&&(h.classList.add("highlighted-1"),R=h)}else{const h=document.querySelector('[data-comp="UrlListItem"]');h&&(h.classList.add("highlighted-1"),R=h)}}function Z(){R&&(R.classList.remove("highlighted-1"),R=null)}return(h,T)=>(m(),v("div",Ge,[s("div",{class:Y(["popup",{focus:g.value}]),tabindex:"-1",ref_key:"popupElem",ref:t,onFocusin:P,onFocusout:rt},[s("div",{class:"popup-header p-1",ref_key:"headerElem",ref:e},"Auto Clicker",512),s("div",Qe,[s("div",Ze,[s("button",{class:"btn btn-primary col-4",onClick:p,onPointerenter:ct,onPointerleave:Z,disabled:!(a.value==="ready"||a.value==="paused")},w(a.value==="ready"||!r.value?"Start":"Next"),41,tn),s("button",{class:"btn btn-secondary col-4",disabled:a.value!=="started",onClick:T[0]||(T[0]=u=>_("paused"))},"Pause",8,en),s("button",{class:"btn btn-secondary col-4",disabled:!r.value,onClick:$},w(a.value==="paused"?"Reset":"Stop"),9,nn)]),s("div",sn,[s("label",on,[s("span",an,[ln,H(s("input",{title:"Click delay (seconds)",class:"form-control",type:"number","onUpdate:modelValue":T[1]||(T[1]=u=>K(i)?i.value=u:null)},null,512),[[J,d(i)]])])])]),s("div",rn,[s("label",cn,[s("span",un,[dn,H(s("input",{title:"Count",class:"form-control",type:"number","onUpdate:modelValue":T[2]||(T[2]=u=>K(c)?c.value=u:null)},null,512),[[J,d(c)]])])])])])],34)]))}}),ht=1e3*60,Tt=ht*10,ft=ht*60,fn=ft*24;class mn{constructor(t){this.timeRef=t,dt(t,e=>{e>0&&this.setTimer()}),Bt(()=>{this.clearTimer()})}setTimer(){this.clearTimer();const t=Date.now()-this.timeRef.value;let e;if(t<Tt)e=ht;else if(t<ft)e=Tt;else if(t<fn)e=ft;else return;this.timerId=setTimeout(()=>{vt(this.timeRef),this.setTimer()},e)}clearTimer(){clearTimeout(this.timerId)}forceTrigger(){vt(this.timeRef),this.setTimer()}}const _n=n=>(z("data-v-47825c5d"),n=n(),G(),n),hn={class:"tags"},vn={class:"tag-master","data-comp":"EntryTags"},gn=["data-tag"],yn={key:0,class:"tag add-tag"},bn=_n(()=>s("span",{class:"plus"},"+",-1)),$n=[bn],Cn=x({__name:"UrlListItemTags",props:{ue:{}},setup(n){const t=n;function e(){X(U.value)===X(t.ue)?U.value=null:U.value=t.ue,console.log(U.value)}return(o,l)=>(m(),v("div",{class:"tags-wrapper",onClick:e,"data-comp":"UrlListItemTags"},[s("div",hn,[s("div",vn,[(m(!0),v(Q,null,it(o.ue.tags,i=>(m(),v("div",{class:"tag","data-tag":i},w(i),9,gn))),256))])]),o.ue.tags?.length?M("",!0):(m(),v("div",yn,$n))]))}}),Tn=E(Cn,[["__scopeId","data-v-47825c5d"]]),wn=["data-index"],kn={class:"col-9 nowrap-text-ceil url url-cell"},In={class:"nowrap-text-ceil-content"},xn=["title"],Ln=["href","title"],Sn={class:"comment-content nowrap-text-ceil-content no-dbl-click-select"},En=x({__name:"UrlListItem",props:{ue:{},index:{}},setup(n){const t=n,e=C(()=>t.ue.visited||ie);function o(){t.ue.delVisited()}function l(){const u=Date.now();t.ue.setVisited(u)}function i(u){u.button===1&&(u.preventDefault(),o())}const c=C(()=>{if(t.ue.comment!==void 0){if(!t.ue.inputComment)return"comment-from-store";if(t.ue.comment!==t.ue.inputComment)return"comment-from-store-over"}return""}),a=C(()=>t.ue.comment!==void 0?t.ue.comment.trim():t.ue.inputComment);function r(){X(S.value)===X(t.ue)?S.value=null:S.value=t.ue}const f=y(),p=C(()=>ot.value.has(t.ue.url));function _(){ot.value.add(t.ue.url),l(),k.value={entry:t.ue,index:t.index,elem:f.value}}function $(u){u.button!==1||document.getRootNode().activeElement!==u.currentTarget||_()}function g(){ot.value.delete(t.ue.url)}const D=C(()=>{const u=k.value;return u?t.index===u.index&&t.ue.isEquals(u.entry):!1});jt(()=>{D.value&&(k.value=null)});const P=new mn(e);function rt(){P.forceTrigger()}const R=re(rt,2e3),ct=C(()=>{let u=`№ ${t.index+1}.
`;return e.value<0?u+="never clicked":u+=Z(e.value),t.ue.initialVisited&&t.ue.initialVisited!==e.value?`${u}
${Z(t.ue.initialVisited)}`:u});function Z(u){return ue(u)+" — "+Wt(u,"YYYY.MM.DD HH:mm:SS",!1)}const h=C(()=>T(e.value));function T(u){if(u<0)return"never-clicked";const I=Date.now(),b=Math.trunc((I-u)/1e3);return b<60?"minute-1":b<60*2?"minute-2":b<60*5?"minute-5":b<60*10?"minute-10":b<60*30?"minute-30":b<60*45?"minute-45":b<60*60?"minute-60":b<3600*2?"hour-2":b<3600*4?"hour-4":b<3600*8?"hour-8":b<3600*14?"hour-14":b<3600*24?"day-1":b<86400*7?"day-7":b<86400*30?"month-1":b<2592e3*3?"month-3":b<2592e3*6?"month-6":"long-ago"}return(u,I)=>(m(),v("tr",{onPointerenter:I[0]||(I[0]=(...b)=>d(R)&&d(R)(...b)),"data-index":u.index+1,class:Y([{clicked:p.value,"last-clicked":D.value},"list-item-row"]),"data-comp":"UrlListItem",ref_key:"htmlCompRef",ref:f},[s("td",kn,[s("span",In,[s("span",{class:Y(["info-dot",{"has-comment":u.ue.inputComment,visited:e.value>0,[h.value]:!0}]),title:ct.value,onContextmenu:Et(g,["prevent"]),onPointerdown:i},null,42,xn),s("a",{class:"url link-primary",target:"_blank",rel:"noreferrer noopener",href:u.ue.url,title:u.ue.inputComment,onClick:_,onPointerup:$},w(u.ue.url),41,Ln)]),O(Tn,{class:"tags",ue:u.ue},null,8,["ue"])]),s("td",{class:Y(["col-3 comment nowrap-text-ceil",{[c.value]:c.value}]),onDblclick:r},[s("span",Sn,w(a.value||" "),1)],34)],42,wn))}}),Un=E(En,[["__scopeId","data-v-190f36cc"]]),Mn={"data-comp":"UrlList"},Pn={class:"table table-borderless"},On=x({__name:"UrlList",setup(n){return(t,e)=>(m(),v("div",Mn,[s("table",Pn,[s("tbody",null,[(m(!0),v(Q,null,it(d(Vt),(o,l)=>(m(),A(Un,{ue:o,index:l,key:l+o.url},null,8,["ue","index"]))),128))])])]))}}),Rn={class:"popup-content"},Dn={class:"modal-content"},Vn={class:"modal-header"},An={class:"modal-title"},qn={class:"modal-body"},Nn=["value"],Bn=x({__name:"MessageEditPopup",setup(n){const t=C(()=>{const r=S.value;return r.comment===void 0?r.inputComment:r.comment});function e(r){r.currentTarget===r.target&&(S.value=null)}function o(r){r.key==="Enter"&&!r.shiftKey&&(r.preventDefault(),S.value=null)}const l=y(null);Ut(()=>{l.value?.focus()});function c(r){const f=r.currentTarget.value;S.value?.setComment(f)}function a(){S.value?.delComment()}return(r,f)=>d(S)?(m(),v("div",{key:0,class:"modal message-edit-popup","data-comp":"MessageEditPopup",onPointerdown:e},[s("div",Rn,[s("div",Dn,[s("div",Vn,[s("h5",An,w(d(S).url),1),s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:e})]),s("div",qn,[s("textarea",{rows:"5",value:t.value,onInput:c,ref_key:"textareaElem",ref:l,onKeydown:o},null,40,Nn)]),s("div",{class:"modal-footer"},[s("button",{type:"button",class:"btn btn-secondary",onClick:a},"Reset")])])])],32)):M("",!0)}}),jn=E(Bn,[["__scopeId","data-v-29a45c96"]]),Wn={class:"selected-tags","data-comp":"SelectedTags"},Fn=["data-tag"],Yn={class:"input-wrapper"},Hn=["value"],Jn=x({__name:"SelectedTags",props:{entry:{},modelValue:{}},emits:["update:modelValue","tabPressed"],setup(n,{emit:t}){const e=n,o=t;function l(g){const P=g.target.dataset.tag;P&&e.entry?.delTag(P)}const i=y(null),a=document.createElement("canvas").getContext("2d");Ut(()=>{i.value&&(a.font=window.getComputedStyle(i.value).font)});function r(){if(!i.value)return;const g=a.measureText(i.value.value).width;i.value.style.width=g+6+"px"}function f(){i.value&&(i.value.selectionStart=i.value.selectionEnd,i.value.focus())}function p(){i.value?.select()}function _(g){o("update:modelValue",g.target.value)}function $(g){console.log(g),g.code==="Tab"&&(g.preventDefault(),o("tabPressed"))}return(g,D)=>(m(),v("div",Wn,[s("div",{class:"tag-master",onClick:l},[(m(!0),v(Q,null,it(g.entry.tags,P=>(m(),v("div",{class:"tag","data-tag":P},w(P),9,Fn))),256))]),s("span",{class:"label",onDblclick:p,onClick:f},[s("span",Yn,[s("input",Ft({type:"text",ref_key:"tagInput",ref:i,value:g.modelValue},Yt({input:[r,_]},!0),{onKeydown:$}),null,16,Hn)])],32)]))}}),Kn=E(Jn,[["__scopeId","data-v-9d97319f"]]),Xn=["data-tag"],zn=x({__name:"SuggestedTag",props:{tagWrap:{}},setup(n){const t=n,{entry:e,tag:o}=t.tagWrap,l=C(()=>!!e.tags?.includes(o));function i(){l.value?e.delTag(o):e.addTag(o)}return(c,a)=>(m(),v("div",{class:Y(["tag",{selected:l.value}]),onClick:i,"data-tag":c.tagWrap.tag,"data-comp":"SuggestedTag"},w(c.tagWrap.tag),11,Xn))}}),Gn=E(zn,[["__scopeId","data-v-40287b21"]]);function Qn(){return JSON.parse(localStorage.getItem("href_lister_all_tags")||"[]")}const Zn=y(Qn()),ts={class:"popup-content"},es={class:"modal-content"},ns={class:"modal-header"},ss={class:"modal-title"},os={class:"modal-body"},as={class:"tags selected-tags-group"},ls={class:"tags all-tags-group"},is={class:"tag-master"},rs=x({__name:"UrlEntryTagsEditPopup",setup(n){const t=y(""),e=U,o=C(()=>Zn.value.map(a=>({tag:a,entry:e.value}))),l=C(()=>{const a=[],r=[];for(const f of o.value){const p=f.tag.indexOf(t.value);p!==-1&&(p===0?a.push(f):r.push(f))}return[a,r].flat()});function i(){t.value=""}function c(a){a.currentTarget===a.target&&(U.value=null)}return(a,r)=>(m(),A(wt,{to:"body"},[d(U)?(m(),v("div",{key:0,class:"modal tags-edit-popup",onPointerdown:c,"data-comp":"URLsInfoLine"},[s("div",ts,[s("div",es,[s("div",ns,[s("h5",ss,w(d(U).url),1)]),s("div",os,[s("div",as,[O(Kn,{entry:d(U),modelValue:t.value,"onUpdate:modelValue":r[0]||(r[0]=f=>t.value=f),onTabPressed:i},null,8,["entry","modelValue"])]),s("div",ls,[s("div",is,[(m(!0),v(Q,null,it(l.value,f=>(m(),A(Gn,{"tag-wrap":f},null,8,["tag-wrap"]))),256))])])])])])],32)):M("",!0)]))}}),cs=E(rs,[["__scopeId","data-v-b9b3916d"]]),us={"data-comp":"Main"},ds=s("hr",null,null,-1),ps=s("hr",null,null,-1),fs=s("hr",null,null,-1),ms=s("hr",null,null,-1),_s=x({__name:"Main",setup(n){return(t,e)=>(m(),v("div",us,[ds,O(se),ps,O(Se),fs,O(Je),ms,O(On),d(U)?(m(),A(cs,{key:0})):M("",!0),d(S)?(m(),A(yt,{key:1},{default:gt(()=>[O(jn)]),_:1})):M("",!0),d(N)?(m(),A(yt,{key:2},{default:gt(()=>[O(pn)]),_:1})):M("",!0)]))}}),hs=n=>(z("data-v-80fad6c5"),n=n(),G(),n),vs=hs(()=>s("a",{class:"readme",title:"Open Readme",href:"https://github.com/AlttiRi/href-lister#keeplister",target:"_blank"},[s("i",null,"i")],-1)),gs=x({__name:"App",setup(n){return(t,e)=>(m(),v(Q,null,[O(_s),vs],64))}}),ys=E(gs,[["__scopeId","data-v-80fad6c5"]]);Ht(ys).mount("#app");
//# sourceMappingURL=index.js.map
