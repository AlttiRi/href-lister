import{r as w,c as T,a as it,d as $,o as y,b as x,e as s,w as lt,v as ut,u as m,i as dt,p as K,f as W,s as pt,g as Y,h as G,j as J,k as ft,l as Q,m as X,n as mt,q as _t,t as vt,x as k,y as E,z as ht,A as U,B as j,F as A,C as gt,D as q,E as Z,T as yt,G as P,H as bt}from"./vendor.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function r(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(o){if(o.ep)return;o.ep=!0;const l=r(o);fetch(o.href,l)}})();const g=w("");location.href==="http://localhost:5173/"&&(g.value=`http://localhost:5173/ asdf
http://localhost:5173/#qwe #qwerty1qwerty2qwerty3qwerty4qwerty5qwerty6
http://localhost:5173/#qqq`);const v=w(null),H=w(null),z=T(()=>{const t=wt(g.value),e=it(t);return console.log(t,e),e}),I=T(()=>z.value.map(t=>t.url));function wt(t){const e=t.split(`
`).map(n=>n.trim()).filter(n=>n),r=[];for(const n of e){const[o,...l]=n.split(/\s+(#|\/\/)/),[c,...u]=o.trim().split(/\s+/);if(c.startsWith("http")){const _=L(c);if(_&&u.every(h=>!L(h))){r.push({url:_,comment:[...u,...l].join(" ")});continue}_&&r.push({url:_})}else u.unshift(c);for(const _ of u){const h=L(_);h&&r.push({url:h})}}return r}function L(t){const e=t.match(/(['"]?)(?<url>https?:\/\/[^\s"]+)(\1)/);if(console.log(e),e!=null&&e.groups)return e.groups.url}function xt(t,e=100){const r=u=>`${u.length?'["'+u.join('", "')+'"]':"[]"}`;if(t.length<=e)return`/* ${t.length.toString().padStart(3)} */ ${r(t)},`;const n=u=>u.toString().length,o=Math.trunc(t.length/e),c=[`/* ${t.length.toString().padStart(1+n(t.length))+" ".repeat(3+n(o))} */`];for(let u=0;u<=o;u++){const _=t.slice(e*u,e+e*u),h=`(${u+1})`.padStart(2+n(o)),i=_.length.toString().padStart(1+n(t.length));c.push(`/* ${i} ${h} */ ${r(_)},`)}return c.join(`
`)}const V=t=>(K("data-v-95e40442"),t=t(),W(),t),Ct={class:"row row-cols-lg-3 g-3 align-items-end"},Tt={class:"input col-12"},$t=V(()=>s("label",{for:"urls-textarea",class:"fuck-off-lighthouse"},null,-1)),kt={class:"input col-12"},St={class:"row"},Mt=V(()=>s("span",{class:"btn-group"},[s("span",{class:"input-group-text me-2"},"Clipboard")],-1)),Dt={class:".col m-1"},Et=V(()=>s("span",{class:"btn-group"},[s("span",{class:"input-group-text me-2 text-center"},"Controls")],-1)),It=$({__name:"InputControls",setup(t){const e=new WeakMap;async function r(i){i.classList.add("btn-active");const p=pt(150);e.set(i,p),await p,e.get(i)===p&&i.classList.remove("btn-active")}const n=w(null);function o(i){var p;g.value="",(p=n.value)==null||p.focus(),r(i.currentTarget)}function l(i){navigator.clipboard.writeText(I.value.join(" ")),r(i.currentTarget)}function c(i){i.preventDefault(),navigator.clipboard.writeText(I.value.join(`
`)),r(i.currentTarget)}function u(i){i.button===1&&(i.preventDefault(),navigator.clipboard.writeText(xt(I.value)),r(i.currentTarget))}async function _(i){const{currentTarget:p}=i,b=await navigator.clipboard.readText();console.log("[clipboard] readText:",b),g.value&&!g.value.endsWith(`
`)&&(g.value+=`
`),g.value+=b,r(p)}async function h(i){const{currentTarget:p}=i,b=await navigator.clipboard.readText();console.log("[clipboard] readText:",b),g.value=b,r(p)}return(i,p)=>(y(),x("div",Ct,[s("div",Tt,[$t,lt(s("textarea",{id:"urls-textarea",spellcheck:"false","onUpdate:modelValue":p[0]||(p[0]=b=>dt(g)?g.value=b:null),ref_key:"textareaEl",ref:n},null,512),[[ut,m(g)]])]),s("div",kt,[s("span",St,[s("span",{class:".col m-1"},[Mt,s("button",{class:"btn btn-outline-primary me-1",onClick:h},"Replace"),s("button",{class:"btn btn-outline-primary me-1",onClick:_},"Append")]),s("span",Dt,[Et,s("button",{class:"btn btn-outline-primary me-1",onClick:o},"Clear"),s("button",{class:"btn btn-primary me-1",title:"Copy URLs",onClick:l,onContextmenu:c,onPointerdown:u},"Copy",32)])])])]))}});const D=(t,e)=>{const r=t.__vccOpts||t;for(const[n,o]of e)r[n]=o;return r},Lt=D(It,[["__scopeId","data-v-95e40442"]]);function Ut(t,e=50){let r=!1,n=!1,o,l;return function(...c){r?(o=this,l=c,n=!0):(r=!0,setTimeout(function(){n&&t.apply(o,l),r=n=!1},e),t.apply(this,c))}}const tt=Y("HrefListerComments","Comments");function Pt(t,e){J(t,e,tt)}function At(t){return G(t,tt)}const N=Y("HrefLister","Visits");function qt(t,e){return J(t,e,N)}function Vt(t){return G(t,N)}function Nt(t){return ft(t,N)}const Ot={class:"col-9 nowrap-text-ceil url"},Bt={class:"nowrap-text-ceil-content"},Ft=["title","onContextmenu"],Rt=["href","title"],jt={class:"comment-content nowrap-text-ceil-content no-dbl-click-select"},Ht=$({__name:"UrlListItem",props:{ue:null},setup(t){const e=t,r=e.ue.url,n=w(-1);Q(o),X(o);async function o(){const d=Vt(r),f=At(r);n.value=await d||-2;const a=await f;a&&(e.ue.commentFromStore=a)}function l(){Nt(r),n.value=-2}function c(){const d=Date.now();qt(r,d),n.value=d}const u=T(_);function _(){return n.value<0?"never clicked":et(n.value)}const h=T(()=>{if(e.ue.commentFromStore&&!e.ue.comment)return"comment-from-store";if(e.ue.commentFromStore&&e.ue.commentFromStore!==e.ue.comment)return"comment-from-store-over"});function i(){k(v.value)===k(e.ue)?v.value=null:v.value=e.ue}const p=T(()=>b(n.value));function b(d){if(d<0)return"never-clicked";const f=Date.now(),a=Math.trunc((f-d)/1e3);return a<60?"minute-1":a<60*2?"minute-2":a<60*5?"minute-5":a<60*10?"minute-10":a<60*30?"minute-30":a<60*45?"minute-45":a<60*60?"minute-60":a<3600*2?"hour-2":a<3600*4?"hour-4":a<3600*8?"hour-8":a<3600*14?"hour-14":a<3600*24?"day-1":a<86400*7?"day-7":a<86400*30?"month-1":a<2592e3*3?"month-3":a<2592e3*6?"month-6":"long-ago"}mt(n,d=>{d>0&&B()}),_t(F);let O;const C=1e3*60;function B(){F();const d=Date.now()-n.value;let f;if(d<C*10)f=C;else if(d<C*60)f=C*10;else if(d<C*60*24)f=C*60;else return;console.log("setTimeout",f),O=setTimeout(()=>{j(n),B()},f)}function F(){clearTimeout(O)}function et(d){return nt(d)+" — "+vt(d,"YYYY.MM.DD HH:mm:SS",!1)}function nt(d){const f=Date.now(),a=Math.trunc((f-d)/1e3);if(a<60)return`${a} second${a>1?"s":""} ago`;if(a<60*60){const M=Math.trunc(a/60);return`${M} minute${M>1?"s":""} ago`}if(a<60*60*24){const M=Math.trunc(a/60%60).toString().padStart(2,"0");return`${Math.trunc(a/60/60)}:${M} ago`}return Math.trunc(a/60/60/24)+" days ago"}const S=w(!1);function ot(){S.value=!0,c(),H.value=k(e.ue)}const st=T(()=>k(H.value)===k(e.ue));function rt(){S.value=!S.value}const R=Ut(at,1e3);function at(){j(n)}function ct(d){d.button===1&&(d.preventDefault(),l())}return(d,f)=>(y(),x("tr",{onPointerenter:f[0]||(f[0]=(...a)=>m(R)&&m(R)(...a)),class:E({clicked:S.value,"last-clicked":m(st)})},[s("td",Ot,[s("span",Bt,[s("span",{class:E(["info-dot",{["has-comment"]:t.ue.comment,visited:n.value>0,[m(p)]:!0}]),title:m(u),onContextmenu:ht(rt,["prevent"]),onPointerdown:ct},null,42,Ft),s("a",{class:"url link-primary",target:"_blank",rel:"noreferrer noopener",href:t.ue.url,title:t.ue.comment,onClick:ot},U(t.ue.url),9,Rt)])]),s("td",{class:E(["col-3 comment nowrap-text-ceil",{[m(h)]:m(h)}]),onDblclick:i},[s("span",jt,U(t.ue.commentFromStore||t.ue.comment||" "),1)],34)],34))}});const Kt=D(Ht,[["__scopeId","data-v-a49bb0b3"]]),Wt={class:"table table-borderless"},Yt=$({__name:"UrlList",setup(t){return(e,r)=>(y(),x("div",null,[s("table",Wt,[s("tbody",null,[(y(!0),x(A,null,gt(m(z),n=>(y(),q(Kt,{key:n.url,ue:n},null,8,["ue"]))),128))])])]))}}),Gt={class:"popup-content"},Jt={class:"modal-content"},Qt={class:"modal-header"},Xt={class:"modal-title"},Zt={class:"modal-body"},zt=["value"],te=$({__name:"MessageEditPopup",setup(t){function e(c){c.currentTarget===c.target&&(v.value=null)}function r(c){c.key==="Enter"&&!c.shiftKey&&(c.preventDefault(),v.value=null)}const n=w(null),o=()=>{var c;return(c=n.value)==null?void 0:c.focus()};Q(o),X(o);function l(c){if(!v.value)return;const u=c.currentTarget.value;v.value.commentFromStore=u,Pt(v.value.url,u)}return(c,u)=>(y(),q(yt,{to:"body"},[m(v)?(y(),x("div",{key:0,class:"message-edit-popup modal",onClick:e},[s("div",Gt,[s("div",Jt,[s("div",Qt,[s("h5",Xt,U(m(v).url),1),s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:e})]),s("div",Zt,[s("textarea",{rows:"5",value:m(v).commentFromStore||m(v).comment,onInput:l,ref_key:"textareaElem",ref:n,onKeydown:r},null,40,zt)])])])])):Z("",!0)]))}});const ee=D(te,[["__scopeId","data-v-c6abb4ea"]]),ne=s("hr",null,null,-1),oe=s("hr",null,null,-1),se=$({__name:"Main",setup(t){return(e,r)=>(y(),x(A,null,[ne,P(Lt),oe,P(Yt),m(v)?(y(),q(ee,{key:0})):Z("",!0)],64))}}),re=t=>(K("data-v-80fad6c5"),t=t(),W(),t),ae=re(()=>s("a",{class:"readme",title:"Open Readme",href:"https://github.com/AlttiRi/href-lister#keeplister",target:"_blank"},[s("i",null,"i")],-1)),ce=$({__name:"App",setup(t){return(e,r)=>(y(),x(A,null,[P(se),ae],64))}});const ie=D(ce,[["__scopeId","data-v-80fad6c5"]]);bt(ie).mount("#app");
//# sourceMappingURL=index.js.map
